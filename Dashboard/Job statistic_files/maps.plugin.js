/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */!function(e){function t(t){for(var n,i,a=t[0],o=t[1],u=0,c=[];u<a.length;u++)i=a[u],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&c.push(r[i][0]),r[i]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);for(s&&s(t);c.length;)c.shift()()}var n={},r={2:0};function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,i){n=r[e]=[t,i]}));t.push(n[2]=a);var o,u=document.createElement("script");u.charset="utf-8",u.timeout=120,i.nc&&u.setAttribute("nonce",i.nc),u.src=function(e){return i.p+"maps.chunk."+e+".js"}(e);var s=new Error;o=function(t){u.onerror=u.onload=null,clearTimeout(c);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;s.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",s.name="ChunkLoadError",s.type=i,s.request=a,n[1](s)}r[e]=void 0}};var c=setTimeout((function(){o({type:"timeout",target:u})}),12e4);u.onerror=u.onload=o,document.head.appendChild(u)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var a=window.maps_bundle_jsonpfunction=window.maps_bundle_jsonpfunction||[],o=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var s=o;i(i.s=52)}([function(e,t){e.exports=__kbnSharedDeps__.Lodash},function(e,t,n){"use strict";n.d(t,"eb",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return u})),n.d(t,"f",(function(){return s})),n.d(t,"S",(function(){return c})),n.d(t,"db",(function(){return d})),n.d(t,"L",(function(){return f})),n.d(t,"Q",(function(){return p})),n.d(t,"F",(function(){return g})),n.d(t,"R",(function(){return m})),n.d(t,"P",(function(){return b})),n.d(t,"K",(function(){return _})),n.d(t,"h",(function(){return y})),n.d(t,"mb",(function(){return h})),n.d(t,"lb",(function(){return v})),n.d(t,"nb",(function(){return E})),n.d(t,"V",(function(){return O})),n.d(t,"Hb",(function(){return S})),n.d(t,"Gb",(function(){return T})),n.d(t,"Z",(function(){return A})),n.d(t,"wb",(function(){return I})),n.d(t,"E",(function(){return L})),n.d(t,"U",(function(){return C})),n.d(t,"ib",(function(){return N})),n.d(t,"G",(function(){return x})),n.d(t,"tb",(function(){return P})),n.d(t,"vb",(function(){return M})),n.d(t,"ub",(function(){return R})),n.d(t,"sb",(function(){return j})),n.d(t,"jb",(function(){return w})),n.d(t,"fb",(function(){return D})),n.d(t,"o",(function(){return k})),n.d(t,"Eb",(function(){return F})),n.d(t,"u",(function(){return B})),n.d(t,"t",(function(){return G})),n.d(t,"s",(function(){return U})),n.d(t,"D",(function(){return V})),n.d(t,"hb",(function(){return z})),n.d(t,"A",(function(){return q})),n.d(t,"B",(function(){return $})),n.d(t,"C",(function(){return H})),n.d(t,"J",(function(){return Y})),n.d(t,"pb",(function(){return W})),n.d(t,"bb",(function(){return J})),n.d(t,"X",(function(){return Z})),n.d(t,"z",(function(){return Q})),n.d(t,"x",(function(){return K})),n.d(t,"y",(function(){return X})),n.d(t,"a",(function(){return ee})),n.d(t,"b",(function(){return te})),n.d(t,"qb",(function(){return ne})),n.d(t,"M",(function(){return re})),n.d(t,"I",(function(){return ie})),n.d(t,"H",(function(){return ae})),n.d(t,"Ab",(function(){return oe})),n.d(t,"v",(function(){return ue})),n.d(t,"j",(function(){return se})),n.d(t,"k",(function(){return ce})),n.d(t,"yb",(function(){return le})),n.d(t,"Y",(function(){return de})),n.d(t,"i",(function(){return fe})),n.d(t,"g",(function(){return pe})),n.d(t,"ob",(function(){return ge})),n.d(t,"zb",(function(){return me})),n.d(t,"W",(function(){return be})),n.d(t,"r",(function(){return _e})),n.d(t,"p",(function(){return ye})),n.d(t,"q",(function(){return he})),n.d(t,"m",(function(){return ve})),n.d(t,"l",(function(){return Ee})),n.d(t,"cb",(function(){return Oe})),n.d(t,"N",(function(){return Se})),n.d(t,"O",(function(){return Te})),n.d(t,"Cb",(function(){return Ae})),n.d(t,"rb",(function(){return Ie})),n.d(t,"kb",(function(){return Le})),n.d(t,"xb",(function(){return Ce})),n.d(t,"T",(function(){return Ne})),n.d(t,"ab",(function(){return xe})),n.d(t,"Bb",(function(){return Pe})),n.d(t,"gb",(function(){return Me})),n.d(t,"n",(function(){return Re})),n.d(t,"w",(function(){return je})),n.d(t,"Fb",(function(){return we})),n.d(t,"Db",(function(){return De}));var r=n(2);const i="map",a="maps",o="gisApp",u="logoKibana",s=r.i18n.translate("xpack.maps.visTypeAlias.title",{defaultMessage:"Maps"}),c="initialLayers",l=`app/${a}`,d="map",f=`api/${a}`,p=`${f}/indexSettings`,g=`${f}/fonts`,m=`${f}/docSource`,b=`/${f}/feature`,_=`/${f}/getMatchingIndexes`,y=`/${f}/checkIsDrawingIndex`,h="mvt/getTile",v="mvt/getGridTile",E="openLayerWizard",O="__kbn_is_centroid_feature__";function S(e){return`/${l}${T(e)}`}function T(e){return e?`/${d}/${e}`:`/${d}`}let A,I,L;!function(e){e.RASTER_TILE="RASTER_TILE",e.GEOJSON_VECTOR="GEOJSON_VECTOR",e.EMS_VECTOR_TILE="EMS_VECTOR_TILE",e.HEATMAP="HEATMAP",e.BLENDED_VECTOR="BLENDED_VECTOR",e.MVT_VECTOR="MVT_VECTOR"}(A||(A={})),function(e){e.EMS_TMS="EMS_TMS",e.EMS_FILE="EMS_FILE",e.ES_GEO_GRID="ES_GEO_GRID",e.ES_GEO_LINE="ES_GEO_LINE",e.ES_SEARCH="ES_SEARCH",e.ES_PEW_PEW="ES_PEW_PEW",e.ES_TERM_SOURCE="ES_TERM_SOURCE",e.EMS_XYZ="EMS_XYZ",e.WMS="WMS",e.KIBANA_TILEMAP="KIBANA_TILEMAP",e.GEOJSON_FILE="GEOJSON_FILE",e.MVT_SINGLE_LAYER="MVT_SINGLE_LAYER",e.TABLE_SOURCE="TABLE_SOURCE"}(I||(I={})),function(e){e.SOURCE="source",e.JOIN="join"}(L||(L={}));const C="__kbnjoin__",N="meta",x="formatters",P="source",M=`${P}_${N}`,R=`${P}_${x}`,j=`${P}_bounds`,w=0,D=24,k=5,F=2,B=1e4,G=100,U=65535,V="__kbn_isvisibleduetojoin__",z="_";let q;!function(e){e.GEO_POINT="geo_point",e.GEO_SHAPE="geo_shape"}(q||(q={}));const $=["geo_point","geo_shape"];let H,Y;!function(e){e.INTERSECTS="INTERSECTS",e.DISJOINT="DISJOINT",e.WITHIN="WITHIN"}(H||(H={})),function(e){e.POINT="Point",e.MULTI_POINT="MultiPoint",e.LINE_STRING="LineString",e.MULTI_LINE_STRING="MultiLineString",e.POLYGON="Polygon",e.MULTI_POLYGON="MultiPolygon",e.GEOMETRY_COLLECTION="GeometryCollection"}(Y||(Y={}));const W=0,J=0,Z=1,Q={type:"FeatureCollection",features:[]};let K,X;!function(e){e.DRAW_SHAPES="DRAW_SHAPES",e.DRAW_POINTS="DRAW_POINTS",e.DRAW_FILTERS="DRAW_FILTERS",e.NONE="NONE"}(K||(K={})),function(e){e.BOUNDS="BOUNDS",e.DISTANCE="DISTANCE",e.POLYGON="POLYGON",e.POINT="POINT",e.LINE="LINE",e.SIMPLE_SELECT="SIMPLE_SELECT",e.DELETE="DELETE",e.WAIT="WAIT"}(X||(X={}));const ee="_of_";let te,ne,re;!function(e){e.AVG="avg",e.COUNT="count",e.MAX="max",e.MIN="min",e.SUM="sum",e.TERMS="terms",e.PERCENTILE="percentile",e.UNIQUE_COUNT="cardinality"}(te||(te={})),function(e){e.HEATMAP="heatmap",e.POINT="point",e.GRID="grid",e.HEX="hex"}(ne||(ne={})),function(e){e.COARSE="COARSE",e.FINE="FINE",e.MOST_FINE="MOST_FINE",e.SUPER_FINE="SUPER_FINE"}(re||(re={}));const ie="gridSplit",ae="gridCentroid",oe="__percentage",ue=50,se=r.i18n.translate("xpack.maps.aggs.defaultCountLabel",{defaultMessage:"count"}),ce="doc_count";let le,de,fe;!function(e){e.STATIC="STATIC",e.DYNAMIC="DYNAMIC"}(le||(le={})),function(e){e.VECTOR="VECTOR",e.HEATMAP="HEATMAP",e.TILE="TILE"}(de||(de={})),function(e){e.CATEGORICAL="CATEGORICAL",e.ORDINAL="ORDINAL"}(fe||(fe={}));const pe=["string","ip","boolean"],ge=["number","date"];let me,be;!function(e){e.CIRCLE="circle",e.ICON="icon"}(me||(me={})),function(e){e.NONE="NONE",e.SMALL="SMALL",e.MEDIUM="MEDIUM",e.LARGE="LARGE"}(be||(be={}));const _e="marker",ye=.25,he=.25,ve=64,Ee="__kbn__custom_icon_sdf__",Oe=16,Se=Oe/2;let Te,Ae,Ie,Le;!function(e){e.CUSTOM="CUSTOM",e.MAKI="MAKI"}(Te||(Te={})),function(e){e.SYMBOLIZE_AS="symbolizeAs",e.FILL_COLOR="fillColor",e.LINE_COLOR="lineColor",e.LINE_WIDTH="lineWidth",e.ICON="icon",e.ICON_SIZE="iconSize",e.ICON_ORIENTATION="iconOrientation",e.LABEL_TEXT="labelText",e.LABEL_COLOR="labelColor",e.LABEL_SIZE="labelSize",e.LABEL_BORDER_COLOR="labelBorderColor",e.LABEL_BORDER_SIZE="labelBorderSize"}(Ae||(Ae={})),function(e){e.LIMIT="LIMIT",e.CLUSTERS="CLUSTERS",e.TOP_HITS="TOP_HITS",e.MVT="MVT"}(Ie||(Ie={})),function(e){e.STRING="String",e.NUMBER="Number"}(Le||(Le={}));const Ce="SPATIAL_FILTERS_LAYER_ID";let Ne,xe,Pe,Me,Re;!function(e){e.LAST_SAVED_LOCATION="LAST_SAVED_LOCATION",e.FIXED_LOCATION="FIXED_LOCATION",e.BROWSER_LOCATION="BROWSER_LOCATION",e.AUTO_FIT_TO_BOUNDS="AUTO_FIT_TO_BOUNDS"}(Ne||(Ne={})),function(e){e.ELASTICSEARCH="ELASTICSEARCH",e.REFERENCE="REFERENCE",e.SOLUTIONS="SOLUTIONS"}(xe||(xe={})),function(e){e.POINT="POINT",e.LINE="LINE",e.POLYGON="POLYGON"}(Pe||(Pe={})),function(e){e.GET="get",e.FEATURE_STATE="feature-state"}(Me||(Me={})),function(e){e.INTERPOLATE="INTERPOLATE",e.PERCENTILES="PERCENTILES"}(Re||(Re={}));const je=[50,75,90,95,99],we="world_countries";let De;!function(e){e.CHOROPLETH="choropleth",e.GEO_FILE="uploadGeoFile",e.NEW_VECTOR="newVectorLayer",e.OBSERVABILITY="observabilityLayer",e.SECURITY="securityLayer",e.EMS_BOUNDARIES="emsBoundaries",e.EMS_BASEMAP="emsBaseMap",e.CLUSTERS="clusters",e.HEATMAP="heatmap",e.GEO_LINE="geoLine",e.POINT_2_POINT="point2Point",e.ES_DOCUMENT="esDocument",e.ES_TOP_HITS="esTopHits",e.KIBANA_BASEMAP="kibanaBasemap",e.MVT_VECTOR="mvtVector",e.WMS_LAYER="wmsLayer",e.TMS_LAYER="tmsLayer"}(De||(De={}))},function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t,n){e.exports=n(10)(2471)},function(e,t,n){e.exports=n(10)(2)},function(e,t,n){e.exports=n(10)(21)},function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t,n){"use strict";let r,i,a,o;function u(e,t){r=e,i=t,a=t.mapsEms,o=a.createEMSSettings()}n.d(t,"V",(function(){return u})),n.d(t,"T",(function(){return c})),n.d(t,"u",(function(){return l})),n.d(t,"p",(function(){return d})),n.d(t,"n",(function(){return f})),n.d(t,"r",(function(){return p})),n.d(t,"a",(function(){return g})),n.d(t,"s",(function(){return m})),n.d(t,"m",(function(){return b})),n.d(t,"Q",(function(){return _})),n.d(t,"v",(function(){return y})),n.d(t,"q",(function(){return h})),n.d(t,"o",(function(){return v})),n.d(t,"l",(function(){return E})),n.d(t,"N",(function(){return O})),n.d(t,"O",(function(){return S})),n.d(t,"E",(function(){return T})),n.d(t,"d",(function(){return A})),n.d(t,"x",(function(){return I})),n.d(t,"S",(function(){return L})),n.d(t,"h",(function(){return C})),n.d(t,"f",(function(){return N})),n.d(t,"g",(function(){return x})),n.d(t,"D",(function(){return P})),n.d(t,"P",(function(){return M})),n.d(t,"c",(function(){return R})),n.d(t,"A",(function(){return j})),n.d(t,"e",(function(){return w})),n.d(t,"G",(function(){return D})),n.d(t,"j",(function(){return k})),n.d(t,"z",(function(){return F})),n.d(t,"F",(function(){return B})),n.d(t,"B",(function(){return G})),n.d(t,"H",(function(){return U})),n.d(t,"K",(function(){return V})),n.d(t,"L",(function(){return z})),n.d(t,"R",(function(){return q})),n.d(t,"U",(function(){return H})),n.d(t,"w",(function(){return Y})),n.d(t,"J",(function(){return W})),n.d(t,"C",(function(){return J})),n.d(t,"y",(function(){return Z})),n.d(t,"i",(function(){return Q})),n.d(t,"k",(function(){return K})),n.d(t,"M",(function(){return X})),n.d(t,"I",(function(){return ee})),n.d(t,"t",(function(){return te})),n.d(t,"b",(function(){return ne}));let s=!1;function c(e){s=e}const l=()=>s,d=()=>i.fileUpload.IndexNameFormComponent,f=()=>i.fileUpload.FileUploadComponent,p=()=>i.data.indexPatterns,g=()=>i.data.autocomplete,m=()=>i.inspector,b=()=>i.fileUpload,_=()=>r.uiSettings,y=()=>_().get("theme:darkMode",!1),h=()=>i.data.ui.IndexPatternSelect,v=()=>r.http,E=()=>r.executionContext,O=()=>i.data.query.timefilter.timefilter,S=()=>r.notifications.toasts,T=()=>r.savedObjects.client,A=()=>r.chrome,I=()=>r.application.capabilities.maps,L=()=>r.application.capabilities.visualize,C=()=>r.docLinks,N=()=>r.overlays,x=()=>i.data,P=()=>i.savedObjects,M=()=>i.uiActions,R=()=>r,j=()=>i.navigation,w=()=>r.i18n,D=()=>i.data.search,k=()=>i.embeddable,F=()=>r.application.navigateToApp,B=()=>i.savedObjectsTagging,G=()=>i.presentationUtil.ContextProvider,U=()=>i.security,V=()=>i.spaces,z=()=>r.theme,q=()=>i.usageCollection;let $;const H=e=>$=e,Y=()=>$,W=()=>Y().showMapsInspectorAdapter,J=()=>Y().preserveDrawingBuffer,Z=()=>a,Q=()=>o,K=()=>a.config.emsTileLayerId,X=()=>a.config.tilemap?a.config.tilemap:{},ee=()=>i.share,te=()=>i.dashboard.dashboardFeatureFlagConfig.allowByValueEmbeddables;async function ne(){const e=i.charts?await i.charts.palettes.getPalettes():null;if(!e)return null;const t=e.get("default"),n={syncColors:!0};return e=>{const r=[{name:e,rankAtDepth:0,totalSeriesAtDepth:1}];return t.getCategoricalColor(r,n)||"#3d3d3d"}}},function(e,t,n){"use strict";let r;async function i(){return void 0!==r||(r=new Promise((async(e,t)=>{try{const{MapEmbeddable:t,getIndexPatternService:r,getMapsCapabilities:i,renderApp:a,createSecurityLayerDescriptors:o,createTileMapLayerDescriptor:u,createRegionMapLayerDescriptor:s,createBasemapLayerDescriptor:c,createESSearchSourceLayerDescriptor:l,suggestEMSTermJoinConfig:d}=await Promise.all([n.e(0),n.e(3)]).then(n.bind(null,72));e({MapEmbeddable:t,getIndexPatternService:r,getMapsCapabilities:i,renderApp:a,createSecurityLayerDescriptors:o,createTileMapLayerDescriptor:u,createRegionMapLayerDescriptor:s,createBasemapLayerDescriptor:c,createESSearchSourceLayerDescriptor:l,suggestEMSTermJoinConfig:d})}catch(e){t(e)}}))),r}n.d(t,"a",(function(){return i}))},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,n){e.exports=n(10)(9)},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(7),i=n(21),a=n(6);const o=()=>Object(a.jsx)(i.EuiDelayRender,null,Object(a.jsx)(i.EuiLoadingContent,{lines:3}));function u({getLazyComponent:e,lazyComponentProps:t}){const n=e();return Object(a.jsx)(i.EuiErrorBoundary,null,Object(a.jsx)(r.Suspense,{fallback:Object(a.jsx)(o,null)},Object(a.jsx)(n,t)))}},function(e,t){e.exports=__kbnSharedDeps__.ReactDom},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/uiActions/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}));const r="tile_map_vis",i="tile_map";let a;!function(e){e.ScaledCircleMarkers="Scaled Circle Markers",e.Heatmap="Heatmap"}(a||(a={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));const r="region_map_vis",i="region_map"},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"g",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"h",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"d",(function(){return f}));var r=n(2),i=n(1);function a(){return r.i18n.translate("xpack.maps.appTitle",{defaultMessage:"Maps"})}function o(){return r.i18n.translate("xpack.maps.embeddableDisplayName",{defaultMessage:"map"})}function u(){return r.i18n.translate("xpack.maps.source.dataSourceLabel",{defaultMessage:"Data source"})}function s(){return r.i18n.translate("xpack.maps.source.urlLabel",{defaultMessage:"Url"})}function c(e){switch(e){case i.C.INTERSECTS:return r.i18n.translate("xpack.maps.common.esSpatialRelation.intersectsLabel",{defaultMessage:"intersects"});case i.C.DISJOINT:return r.i18n.translate("xpack.maps.common.esSpatialRelation.disjointLabel",{defaultMessage:"disjoint"});case i.C.WITHIN:return r.i18n.translate("xpack.maps.common.esSpatialRelation.withinLabel",{defaultMessage:"within"});case i.C.CONTAINS:return r.i18n.translate("xpack.maps.common.esSpatialRelation.containsLabel",{defaultMessage:"contains"});default:return e}}function l(){return r.i18n.translate("xpack.maps.dataView.label",{defaultMessage:"Data view"})}function d(){return r.i18n.translate("xpack.maps.dataView.selectPlacholder",{defaultMessage:"Select data view"})}function f(e){return r.i18n.translate("xpack.maps.dataView.notFoundMessage",{defaultMessage:"Unable to find data view '{id}'",values:{id:e}})}},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/expressions/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";function r({attributes:e,references:t=[]}){if(!e.layerListJSON)return{attributes:e,references:t};const n=[];let r=[];try{r=JSON.parse(e.layerListJSON)}catch(e){throw new Error("Unable to parse attribute layerListJSON")}return r.forEach(((e,t)=>{if(e.sourceDescriptor&&"indexPatternId"in e.sourceDescriptor){const r=e.sourceDescriptor,i=`layer_${t}_source_index_pattern`;n.push({name:i,type:"index-pattern",id:r.indexPatternId}),delete r.indexPatternId,r.indexPatternRefName=i}if("joins"in e){const r=e;(r.joins?r.joins:[]).forEach(((e,r)=>{if("indexPatternId"in e.right){const i=e.right,a=`layer_${t}_join_${r}_index_pattern`;n.push({name:a,type:"index-pattern",id:i.indexPatternId}),delete i.indexPatternId,i.indexPatternRefName=a}}))}})),{attributes:{...e,layerListJSON:JSON.stringify(r)},references:t.concat(n)}}function i(e,t){const n=t.find((({name:t})=>t===e));if(!n)throw new Error(`Could not find reference "${e}"`);return n}function a({attributes:e,references:t}){if(!e.layerListJSON)return{attributes:e};let n=[];try{n=JSON.parse(e.layerListJSON)}catch(e){throw new Error("Unable to parse attribute layerListJSON")}return n.forEach((e=>{if(e.sourceDescriptor&&"indexPatternRefName"in e.sourceDescriptor){const n=e.sourceDescriptor,r=i(n.indexPatternRefName,t);n.indexPatternId=r.id,delete n.indexPatternRefName}if("joins"in e){const n=e;(n.joins?n.joins:[]).forEach((e=>{if("indexPatternRefName"in e.right){const n=e.right,r=i(n.indexPatternRefName,t);n.indexPatternId=r.id,delete n.indexPatternRefName}}))}})),{attributes:{...e,layerListJSON:JSON.stringify(n)}}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}))},function(e,t,n){e.exports=n(10)(42)},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/embeddable/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d}));var r=n(7),i=n(2),a=n(18),o=n(42),u=n(16),s=n(12),c=n(6);const l=i.i18n.translate("xpack.maps.regionMapMap.vis.title",{defaultMessage:"Region Map"}),d={name:u.b,title:l,icon:"visMapRegion",description:i.i18n.translate("xpack.maps.regionMap.vis.description",{defaultMessage:"Show metrics on a thematic map."}),editorConfig:{optionTabs:[{name:"",title:"",editor:function(e){return Object(c.jsx)(s.a,{getLazyComponent:()=>Object(r.lazy)((()=>n.e(7).then(n.bind(null,443)))),lazyComponentProps:e})}}]},visConfig:{defaults:{colorSchema:"Yellow to Red",mapZoom:2,mapCenter:[0,0]}},toExpressionAst:e=>{const t=Object(a.buildExpressionFunction)("regionmap",{visConfig:JSON.stringify({...e.params,mapCenter:e.uiState.get("mapCenter",[0,0]),mapZoom:parseInt(e.uiState.get("mapZoom",2),10),layerDescriptorParams:Object(o.a)(e)})});return Object(a.buildExpression)([t]).toAst()},requiresSearch:!0}},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d}));var r=n(7),i=n(2),a=n(18),o=n(43),u=n(15),s=n(12),c=n(6);const l=i.i18n.translate("xpack.maps.tileMap.vis.title",{defaultMessage:"Coordinate Map"}),d={name:u.c,title:l,icon:"visMapCoordinate",description:i.i18n.translate("xpack.maps.tileMap.vis.description",{defaultMessage:"Plot latitude and longitude coordinates on a map"}),editorConfig:{optionTabs:[{name:"",title:"",editor:function(e){return Object(c.jsx)(s.a,{getLazyComponent:()=>Object(r.lazy)((()=>n.e(8).then(n.bind(null,445)))),lazyComponentProps:e})}}]},visConfig:{defaults:{colorSchema:"Yellow to Red",mapType:u.a.ScaledCircleMarkers,mapZoom:2,mapCenter:[0,0]}},toExpressionAst:e=>{const t=Object(a.buildExpressionFunction)("tilemap",{visConfig:JSON.stringify({...e.params,mapCenter:e.uiState.get("mapCenter",[0,0]),mapZoom:parseInt(e.uiState.get("mapZoom",2),10),layerDescriptorParams:Object(o.a)(e)})});return Object(a.buildExpression)([t]).toAst()},requiresSearch:!0}},function(e,t,n){var r=n(50),i=n(51);e.exports=function(e,t,n){var a=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var u=0;u<16;++u)t[a+u]=o[u];return t||i(o)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"g",(function(){return p})),n.d(t,"f",(function(){return g})),n.d(t,"e",(function(){return b})),n.d(t,"d",(function(){return _}));var r=n(1);let i;!function(e){e.GEO_LINE_AGG="GEO_LINE_AGG",e.GEO_SHAPE_AGGS_GEO_TILE="GEO_SHAPE_AGGS_GEO_TILE",e.ON_PREM_EMS="ON_PREM_EMS"}(i||(i={}));const a={[i.GEO_LINE_AGG]:{name:"geo_line aggregation",license:"gold"},[i.GEO_SHAPE_AGGS_GEO_TILE]:{name:"geo_tile aggregation on geo_shape field-type",license:"gold"},[i.ON_PREM_EMS]:{name:"layer from local Elastic Maps Server",license:"enterprise"}};let o,u=!1;const s=()=>o,c=()=>u;let l,d;const f=new Promise((e=>{d=e})),p=async()=>{await f};async function g(e){m(await e.refresh()),l=e,l.license$.subscribe(m),d(void 0)}function m(e){const t=e.check(r.e,"gold");u="valid"===t.state,o=e.uid}function b(e){for(const t of Object.values(i))e.featureUsage.register(a[t].name,a[t].license)}function _(e){l?l.featureUsage.notifyUsage(a[i[e]].name):console.error("May not call notifyLicensedFeatureUsage before plugin start")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return M})),n.d(t,"d",(function(){return A})),n.d(t,"e",(function(){return S})),n.d(t,"f",(function(){return R}));var r={};n.r(r),n.d(r,"buildNode",(function(){return F})),n.d(r,"toElasticsearchQuery",(function(){return B}));var i={};n.r(i),n.d(i,"wildcardSymbol",(function(){return G})),n.d(i,"buildNode",(function(){return z})),n.d(i,"test",(function(){return q})),n.d(i,"toElasticsearchQuery",(function(){return $})),n.d(i,"toQueryStringQuery",(function(){return H})),n.d(i,"hasLeadingWildcard",(function(){return Y}));var a={};n.r(a),n.d(a,"buildNodeParams",(function(){return ee})),n.d(a,"toElasticsearchQuery",(function(){return te}));var o={};n.r(o),n.d(o,"buildNodeParams",(function(){return ne})),n.d(o,"toElasticsearchQuery",(function(){return re}));var u={};n.r(u),n.d(u,"buildNodeParams",(function(){return ie})),n.d(u,"toElasticsearchQuery",(function(){return ae}));var s={};n.r(s),n.d(s,"buildNodeParams",(function(){return oe})),n.d(s,"toElasticsearchQuery",(function(){return ue}));var c={};n.r(c),n.d(c,"buildNodeParams",(function(){return se})),n.d(c,"toElasticsearchQuery",(function(){return ce}));var l={};n.r(l),n.d(l,"buildNodeParams",(function(){return le})),n.d(l,"toElasticsearchQuery",(function(){return de}));var d={};n.r(d),n.d(d,"buildNodeParams",(function(){return fe})),n.d(d,"toElasticsearchQuery",(function(){return pe}));var f={};n.r(f),n.d(f,"buildNode",(function(){return me})),n.d(f,"buildNodeWithArgumentNodes",(function(){return be})),n.d(f,"toElasticsearchQuery",(function(){return _e}));var p,g,m=n(4),b=n.n(m),_=n(3),y=n.n(_),h=n(0),v=n.n(h),E=function(e,t,n){var r,i,a=Object(h.omit)(e,n);return t.index&&(a.index=null===(r=e.meta)||void 0===r?void 0:r.index),t.negate&&(a.negate=e.meta&&Boolean(e.meta.negate)),t.disabled&&(a.disabled=e.meta&&Boolean(e.meta.disabled)),t.alias&&(a.alias=null===(i=e.meta)||void 0===i?void 0:i.alias),a},O=function(e,t,n){return Object(h.map)(e,(function(e){return E(e,t,n)}))},S=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||!t)return!1;var r={},i=["$$hashKey","meta"];return(r=Object(h.defaults)(n||{},{index:!1,state:!1,negate:!1,disabled:!1,alias:!1})).state||i.push("$state"),Array.isArray(e)&&Array.isArray(t)?Object(h.isEqual)(O(e,r,i),O(t,r,i)):!Array.isArray(e)&&!Array.isArray(t)&&Object(h.isEqual)(E(e,r,i),E(t,r,i))},T=(n(20),function(e,t){if("boolean"!=typeof t&&"boolean"===e.type){if([1,"true"].includes(t))return!0;if([0,"false"].includes(t))return!1;throw new Error("".concat(t," is not a valid boolean value for boolean field ").concat(e.name))}return"number"!=typeof t&&"number"===e.type?Number(t):t}),A=function(e,t,n){var r=T(e,t);return e.scripted?{meta:{index:n.id,field:e.name},query:{script:I(e,t)}}:{meta:{index:n.id},query:{match_phrase:b()({},e.name,r)}}},I=function(e,t){var n=T(e,t);return{script:{source:L(e),lang:e.lang,params:{value:n}}}},L=function(e){return"painless"===e.lang?"boolean compare(Supplier s, def v) {return s.get() == v;}"+"compare(() -> { ".concat(e.script," }, params.value);"):"(".concat(e.script,") == value")};!function(e){e.CUSTOM="custom",e.PHRASES="phrases",e.PHRASE="phrase",e.EXISTS="exists",e.MATCH_ALL="match_all",e.QUERY_STRING="query_string",e.RANGE="range",e.RANGE_FROM_VALUE="range_from_value",e.SPATIAL_FILTER="spatial_filter"}(p||(p={})),function(e){e.APP_STATE="appState",e.GLOBAL_STATE="globalState"}(g||(g={}));var C={gt:">",gte:">=",lte:"<=",lt:"<"},N={gt:"boolean gt(Supplier s, def v) {return s.get() > v}",gte:"boolean gte(Supplier s, def v) {return s.get() >= v}",lte:"boolean lte(Supplier s, def v) {return s.get() <= v}",lt:"boolean lt(Supplier s, def v) {return s.get() < v}"},x={gt:"boolean gt(Supplier s, def v) {return s.get().toInstant().isAfter(Instant.parse(v))}",gte:"boolean gte(Supplier s, def v) {return !s.get().toInstant().isBefore(Instant.parse(v))}",lte:"boolean lte(Supplier s, def v) {return !s.get().toInstant().isAfter(Instant.parse(v))}",lt:"boolean lt(Supplier s, def v) {return s.get().toInstant().isBefore(Instant.parse(v))}"},P=function(e,t){var n=Object(h.mapValues)(Object(h.pickBy)(t,(function(e,t){return t in C})),(function(t){return"number"===e.type&&"string"==typeof t?parseFloat(t):t})),r=Object(h.map)(n,(function(t,n){return"("+e.script+")"+Object(h.get)(C,n)+n})).join(" && ");if("painless"===e.lang){var i="date"===e.type?x:N,a=Object(h.reduce)(n,(function(e,t,n){return e.concat(Object(h.get)(i,n))}),[]).join(" "),o=Object(h.map)(n,(function(t,n){return"".concat(n,"(() -> { ").concat(e.script," }, params.").concat(n,")")})).join(" && ");r="".concat(a).concat(o)}return{script:{source:r,params:n,lang:e.lang}}},M=function(e,t){return{meta:{index:t.id},query:{exists:{field:e.name}}}},R=function(e){return e.$state&&e.$state.store===g.GLOBAL_STATE},j=n(5),w=n.n(j),D=n(11),k=n.n(D);function F(e){return{type:"literal",value:e}}function B(e){return e.value}var G="@kuery-wildcard@";function U(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function V(e){return e.replace(/[+-=&|><!(){}[\]^"~*?:\\/]/g,"\\$&")}function z(e){return e.includes(G)?{type:"wildcard",value:e}:Oe(e)}function q(e,t){var n=e.value.split(G).map(U).join("[\\s\\S]*");return new RegExp("^".concat(n,"$")).test(t)}function $(e){return e.value.split(G).join("*")}function H(e){return e.value.split(G).map(V).join("*")}function Y(e){var t=e.value;return t.startsWith(G)&&t.replace(G,"").length>0}function W(e,t){if(!t)return[];if("literal"===e.type){var n=B(e),r=t.fields.find((function(e){return e.name===n}));return r?[r]:[]}return"wildcard"===e.type?t.fields.filter((function(t){return q(e,t.name)})):void 0}var J=n(36),Z=n.n(J);function Q(e){var t=Z.a.tz.guess();return"Browser"===e?t:e}function K(e){return function(e){var t,n=null==e?void 0:e.subType;return!(null==n||null===(t=n.nested)||void 0===t||!t.path)}(e)?e.subType:void 0}function X(e,t,n){var r=y()(y()({},e),{},{value:n?"".concat(n,".").concat(e.value):e.value});if(!t||"wildcard"===r.type&&!n)return r;var i=W(r,t).reduce((function(e,t){var r=K(t),i=null==r?void 0:r.nested.path;return n&&!i?[].concat(w()(e),["".concat(t.name,' is not a nested field but is in nested group "').concat(n,'" in the KQL expression.')]):i&&!n?[].concat(w()(e),["".concat(t.name," is a nested field, but is not in a nested group in the KQL expression.")]):i!==n?[].concat(w()(e),["Nested field ".concat(t.name," is being queried with the incorrect nested path. The correct path is ").concat(null==r?void 0:r.nested.path,".")]):e}),[]);if(i.length>0)throw new Error(i.join("\n"));return r}function ee(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Object(h.isUndefined)(e))throw new Error("fieldName is a required argument");if(Object(h.isUndefined)(t))throw new Error("value is a required argument");var r="string"==typeof e?Oe(e):F(e),i="string"==typeof t?Oe(t):F(t),a=F(n);return{arguments:[r,i,a]}}function te(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=k()(e.arguments,3),a=i[0],o=i[1],u=i[2],s="wildcard"===o.type&&o.value===G,c="wildcard"===a.type&&a.value===G,l=s&&c;if(l)return{match_all:{}};var d=X(a,t,null!=r&&r.nested?r.nested.path:void 0),f=Object(h.isUndefined)(o)?o:Se(o),p=u.value?"phrase":"best_fields";if(null===d.value)return"wildcard"===o.type?{query_string:{query:H(o)}}:{multi_match:{type:p,query:f,lenient:!0}};var g=t?W(d,t):[];if(g&&0===g.length&&g.push({name:Se(d),scripted:!1,type:""}),s&&(null==g||!g.length||(null==g?void 0:g.length)===(null==t?void 0:t.fields.length)))return{match_all:{}};var m=g.reduce((function(e,t){var i=function(e){var n=K(t);return"wildcard"!==d.type||null==n||!n.nested||null!=r&&r.nested?e:{nested:{path:n.nested.path,query:e,score_mode:"none"}}};if(!t.scripted){if(s)return[].concat(w()(e),[i({exists:{field:t.name}})]);if("wildcard"===o.type)return[].concat(w()(e),[i({query_string:{fields:[t.name],query:H(o)}})]);if("date"===t.type){var a=n.dateFormatTZ?{time_zone:Q(n.dateFormatTZ)}:{};return[].concat(w()(e),[i({range:b()({},t.name,y()({gte:f,lte:f},a))})])}var u="phrase"===p?"match_phrase":"match";return[].concat(w()(e),[i(b()({},u,b()({},t.name,f)))])}if(!s)return[].concat(w()(e),[{script:y()({},I(t,f))}])}),[]);return{bool:{should:m||[],minimum_should_match:1}}}function ne(e){return{arguments:e}}function re(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n.filtersInMustClause,a=e.arguments||[],o=i?"must":"filter";return{bool:b()({},o,a.map((function(e){return Se(e,t,n,r)})))}}function ie(e){return{arguments:e}}function ae(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=e.arguments||[];return{bool:{should:i.map((function(e){return Se(e,t,n,r)})),minimum_should_match:1}}}function oe(e){return{arguments:[e]}}function ue(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=k()(e.arguments,1),a=i[0];return{bool:{must_not:Se(a,t,n,r)}}}function se(e,t,n){return{arguments:[Oe(e),t,ye.literal.buildNode(n)]}}function ce(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=k()(e.arguments,3),a=i[0],o=i[1],u=i[2],s=X(a,t,null!=r&&r.nested?r.nested.path:void 0),c=t?W(s,t):[];c&&0===c.length&&c.push({name:Se(s),scripted:!1,type:""});var l=c.map((function(e){var t=function(t){var n=K(e);return"wildcard"!==s.type||null==n||!n.nested||r.nested?t:{nested:{path:n.nested.path,query:t,score_mode:"none"}}},i=b()({},o,Se(u));if(e.scripted)return{script:P(e,i)};if("date"===e.type){var a=n.dateFormatTZ?{time_zone:Q(n.dateFormatTZ)}:{};return t({range:b()({},e.name,y()(y()({},i),a))})}return t({range:b()({},e.name,i)})}));return{bool:{should:l,minimum_should_match:1}}}function le(e){return{arguments:[F(e)]}}function de(e,t){var n,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=k()(e.arguments,1),a=i[0],o=y()(y()({},a),{},{value:null!=r&&r.nested?"".concat(r.nested.path,".").concat(a.value):a.value}),u=B(o),s=null==t||null===(n=t.fields)||void 0===n?void 0:n.find((function(e){return e.name===u}));if(null!=s&&s.scripted)throw new Error("Exists query does not support scripted fields");return{exists:{field:u}}}function fe(e,t){return{arguments:["string"==typeof e?Oe(e):F(e),t]}}function pe(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=k()(e.arguments,2),o=a[0],u=a[1],s=Se(o),c=null!=i&&null!==(n=i.nested)&&void 0!==n&&n.path?"".concat(i.nested.path,".").concat(s):s;return{nested:{path:c,query:Se(u,t,r,y()(y()({},i),{},{nested:{path:c}})),score_mode:"none"}}}var ge={is:a,and:o,or:u,not:s,range:c,exists:l,nested:d};function me(e){var t=ge[e];if(v.a.isUndefined(t))throw new Error('Unknown function "'.concat(e,'"'));for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return y()({type:"function",function:e},t.buildNodeParams.apply(t,r))}function be(e,t){if(v.a.isUndefined(ge[e]))throw new Error('Unknown function "'.concat(e,'"'));return{type:"function",function:e,arguments:t}}function _e(e,t,n,r){return ge[e.function].toElasticsearchQuery(e,t,n,r)}var ye={function:f,literal:r,wildcard:i},he=(n(37),n(38),n(39),n(40),n(46),n(47),n(2)),ve=(he.i18n.translate("esQuery.kql.errors.endOfInputText",{defaultMessage:"end of input"}),he.i18n.translate("esQuery.kql.errors.fieldNameText",{defaultMessage:"field name"}),he.i18n.translate("esQuery.kql.errors.valueText",{defaultMessage:"value"}),he.i18n.translate("esQuery.kql.errors.literalText",{defaultMessage:"literal"}),he.i18n.translate("esQuery.kql.errors.whitespaceText",{defaultMessage:"whitespace"}),Error,n(41)),Ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ve.parse;if(void 0===e)throw new Error("expression must be a string, got undefined instead");return n(e,y()(y()({},t),{},{helpers:{nodeTypes:ye}}))},Oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ee(e,y()(y()({},t),{},{startRule:"Literal"}),ve.parse)},Se=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!t||!t.type||!ye[t.type])return e(ye.function.buildNode("and",[]),n);var a=ye[t.type];return a.toElasticsearchQuery(t,n,r,i)};Object(h.flow)((function(e){return e.replace(/[\\():<>"*]/g,"\\$&")}),(function(e){return e.replace(/(\s+)(and|or)(\s+)/gi,"$1\\$2$3")}),(function(e){return e.replace(/not(\s+)/gi,"\\$&")}),(function(e){return e.replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\n/g,"\\n")}))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u}));const r=[];function i(e){r.push({checkVisibility:async()=>!0,getIsDisabled:async()=>!1,isBeta:!1,...e})}function a(e){if(e.order<100)throw new Error("layerWizard.order should be greater than or equal to '100'");i(e)}async function o(){const e=r.map((async e=>({...e,isVisible:await e.checkVisibility(),isDisabled:await e.getIsDisabled()})));return(await Promise.all(e)).filter((({isVisible:e})=>e)).sort(((e,t)=>e.order-t.order))}function u(e){return r.find((t=>t.id===e))}},function(e,t,n){e.exports=n(10)(3)},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/data/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));const r=[];function i(e){if(r.some((({type:t})=>e.type===t)))throw new Error(`Unable to register source type ${e.type}. ${e.type} has already been registered`);r.push(e)}function a(e){return r.find((t=>t.type===e))}},function(e,t){e.exports=__kbnSharedDeps__.RisonNode},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var r=n(0),i=n.n(r);const a="__kbn__feature_id__";let o=0;function u(){const e=o<Number.MAX_SAFE_INTEGER?o:0;return o=e+1,e}function s(e){const t=[];for(let n=0;n<e.features.length;n++){const e=u();t.push(e)}const n=i.a.shuffle(t),r=[];for(let t=0;t<e.features.length;t++){const i=n[t],o=e.features[t];r.push({type:"Feature",geometry:o.geometry,properties:{[a]:null==o.id?i:o.id,...o.properties},id:i})}return{type:"FeatureCollection",features:r}}},function(e,t,n){n.r(t);var r=__kbnBundles__.get("entry/core/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.MomentTimezone},function(e,t,n){e.exports=n(10)(16)},function(e,t,n){e.exports=n(10)(14)},function(e,t,n){e.exports=n(10)(4)},function(e,t,n){e.exports=n(10)(19)},function(e,t,n){"use strict";function r(e,t,n,i){var a=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(a,r.prototype),a.expected=t,a.found=n,a.location=i,a.name="SyntaxError",a}function i(e,t,n){return n=n||" ",e.length>t?e:(t-=e.length,e+(n+=n.repeat(t)).slice(0,t))}!function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(r,Error),r.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var n,r=null;for(n=0;n<e.length;n++)if(e[n].source===this.location.source){r=e[n].text.split(/\r\n|\n|\r/g);break}var a=this.location.start,o=this.location.source+":"+a.line+":"+a.column;if(r){var u=this.location.end,s=i("",a.line.toString().length),c=r[a.line-1],l=a.line===u.line?u.column:c.length+1;t+="\n --\x3e "+o+"\n"+s+" |\n"+a.line+" | "+c+"\n"+s+" | "+i("",a.column-1)+i("",l-a.column,"^")}else t+="\n at "+o}return t},r.buildMessage=function(e,t){var n={literal:function(e){return'"'+i(e.text)+'"'},class:function(e){var t=e.parts.map((function(e){return Array.isArray(e)?a(e[0])+"-"+a(e[1]):a(e)}));return"["+(e.inverted?"^":"")+t+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function i(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function a(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function o(e){return n[e.type](e)}return"Expected "+function(e){var t,n,r=e.map(o);if(r.sort(),r.length>0){for(t=1,n=1;t<r.length;t++)r[t-1]!==r[t]&&(r[n]=r[t],n++);r.length=n}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(e)+" but "+function(e){return e?'"'+i(e)+'"':"end of input"}(t)+" found."},e.exports={SyntaxError:r,parse:function(e,t){var n,i={},a=(t=void 0!==t?t:{}).grammarSource,o={start:de,Literal:Te},u=de,s='"',c="\\",l="@kuery-cursor@",d=/^[\\"]/,f=/^[^"]/,p=/^[\\():<>"*{}]/,g=/^[0-9a-f]/i,m=/^[ \t\r\n\xA0]/,b=ae("(",!1),_=ae(")",!1),y=ae(":",!1),h=ae("{",!1),v=ae("}",!1),E=ue("fieldName"),O=ue("value"),S=ue("OR"),T=ae("or",!0),A=ue("AND"),I=ae("and",!0),L=ue("NOT"),C=ae("not",!0),N=ue("literal"),x=ae('"',!1),P=ae("\\",!1),M=oe(["\\",'"'],!1,!1),R=oe(['"'],!0,!1),j={type:"any"},w=ae("*",!1),D=ae("\\t",!1),k=ae("\\r",!1),F=ae("\\n",!1),B=oe(["\\","(",")",":","<",">",'"',"*","{","}"],!1,!1),G=ae("u",!1),U=oe([["0","9"],["a","f"]],!1,!0),V=ae("<=",!1),z=ae(">=",!1),q=ae("<",!1),$=ae(">",!1),H=ue("whitespace"),Y=oe([" ","\t","\r","\n","Â "],!1,!1),W=ae("@kuery-cursor@",!1),J=function(e,t){return t},Z=function(e,t){return t},Q=function(){return De},K=function(t,n,r){const{start:i,end:a}=ce(ee,X);return{type:"cursor",start:i.offset,end:a.offset-n.length,prefix:t.join(""),suffix:r.join(""),text:e.substring(ee,X).replace(n,"")}},X=0,ee=0,te=[{line:1,column:1}],ne=0,re=[],ie=0;if("startRule"in t){if(!(t.startRule in o))throw new Error("Can't start parsing from rule \""+t.startRule+'".');u=o[t.startRule]}function ae(e,t){return{type:"literal",text:e,ignoreCase:t}}function oe(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function ue(e){return{type:"other",description:e}}function se(t){var n,r=te[t];if(r)return r;for(n=t-1;!te[n];)n--;for(r={line:(r=te[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return te[t]=r,r}function ce(e,t){var n=se(e),r=se(t);return{source:a,start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function le(e){X<ne||(X>ne&&(ne=X,re=[]),re.push(e))}function de(){var e,t,n,r,a,o;for(e=X,t=[],n=je();n!==i;)t.push(n),n=je();return(n=fe())===i&&(n=null),(r=Ne())!==i?(ee=e,a=n,e="cursor"===(o=r).type?{...o,suggestionTypes:["conjunction"]}:null!==a?a:Be.function.buildNode("is","*","*")):(X=e,e=i),e}function fe(){var e,t,n,r,a;if(e=X,(t=pe())!==i){if(n=[],r=X,Ee()!==i&&(a=pe())!==i?(ee=r,r=J(0,a)):(X=r,r=i),r!==i)for(;r!==i;)n.push(r),r=X,Ee()!==i&&(a=pe())!==i?(ee=r,r=J(0,a)):(X=r,r=i);else n=i;n!==i?(ee=e,e=function(e,t){const n=[e,...t];return De&&n.find((e=>"cursor"===e.type))||Ge("or",n)}(t,n)):(X=e,e=i)}else X=e,e=i;return e===i&&(e=pe()),e}function pe(){var e,t,n,r,a;if(e=X,(t=ge())!==i){if(n=[],r=X,Oe()!==i&&(a=ge())!==i?(ee=r,r=J(0,a)):(X=r,r=i),r!==i)for(;r!==i;)n.push(r),r=X,Oe()!==i&&(a=ge())!==i?(ee=r,r=J(0,a)):(X=r,r=i);else n=i;n!==i?(ee=e,e=function(e,t){const n=[e,...t];return De&&n.find((e=>"cursor"===e.type))||Ge("and",n)}(t,n)):(X=e,e=i)}else X=e,e=i;return e===i&&(e=ge()),e}function ge(){var e,t,n;return e=X,Se()!==i&&(t=me())!==i?(ee=e,e="cursor"===(n=t).type?n:Ge("not",[n])):(X=e,e=i),e===i&&(e=me()),e}function me(){var t,n,r,a,o,u,s,c;if(t=X,40===e.charCodeAt(X)?(n="(",X++):(n=i,0===ie&&le(b)),n!==i){for(r=[],a=je();a!==i;)r.push(a),a=je();(a=fe())!==i&&(o=Ne())!==i?(41===e.charCodeAt(X)?(u=")",X++):(u=i,0===ie&&le(_)),u!==i?(ee=t,s=a,t="cursor"===(c=o).type?{...c,suggestionTypes:["conjunction"]}:s):(X=t,t=i)):(X=t,t=i)}else X=t,t=i;return t===i&&(t=function(){var t,n,r,a,o,u,s,c,l,d;if(t=X,(n=be())!==i){for(r=[],a=je();a!==i;)r.push(a),a=je();if(58===e.charCodeAt(X)?(a=":",X++):(a=i,0===ie&&le(y)),a!==i){for(o=[],u=je();u!==i;)o.push(u),u=je();if(123===e.charCodeAt(X)?(u="{",X++):(u=i,0===ie&&le(h)),u!==i){for(s=[],c=je();c!==i;)s.push(c),c=je();(c=fe())!==i&&(l=Ne())!==i?(125===e.charCodeAt(X)?(d="}",X++):(d=i,0===ie&&le(v)),d!==i?(ee=t,t=function(e,t,n){return"cursor"===t.type?{...t,nestedPath:t.nestedPath?`${e.value}.${t.nestedPath}`:e.value}:"cursor"===n.type?{...n,suggestionTypes:["conjunction"]}:Ge("nested",[e,t])}(n,c,l)):(X=t,t=i)):(X=t,t=i)}else X=t,t=i}else X=t,t=i}else X=t,t=i;return t===i&&(t=function(){var t;return t=function(){var t,n,r,a,o,u,s,c,l;if(t=X,(n=be())!==i){for(r=[],a=je();a!==i;)r.push(a),a=je();if(a=function(){var t,n;return t=X,"<="===e.substr(X,2)?(n="<=",X+=2):(n=i,0===ie&&le(V)),n!==i&&(ee=t,n="lte"),(t=n)===i&&(t=X,">="===e.substr(X,2)?(n=">=",X+=2):(n=i,0===ie&&le(z)),n!==i&&(ee=t,n="gte"),(t=n)===i&&(t=X,60===e.charCodeAt(X)?(n="<",X++):(n=i,0===ie&&le(q)),n!==i&&(ee=t,n="lt"),(t=n)===i&&(t=X,62===e.charCodeAt(X)?(n=">",X++):(n=i,0===ie&&le($)),n!==i&&(ee=t,n="gt"),t=n))),t}(),a!==i){for(o=[],u=je();u!==i;)o.push(u),u=je();(u=Te())!==i?(ee=t,s=n,c=a,t="cursor"===(l=u).type?{...l,suggestionTypes:["conjunction"]}:Ge("range",[s,c,l])):(X=t,t=i)}else X=t,t=i}else X=t,t=i;return t}(),t===i&&(t=function(){var t,n,r,a,o,u,s,c;if(t=X,(n=be())!==i){for(r=[],a=je();a!==i;)r.push(a),a=je();if(58===e.charCodeAt(X)?(a=":",X++):(a=i,0===ie&&le(y)),a!==i){for(o=[],u=je();u!==i;)o.push(u),u=je();(u=_e())!==i?(ee=t,s=n,t="cursor"===(c=u).type?{...c,fieldName:s.value,suggestionTypes:["value","conjunction"]}:c(s)):(X=t,t=i)}else X=t,t=i}else X=t,t=i;return t}(),t===i&&(t=function(){var e,t;return e=X,(t=ve())!==i&&(ee=e,t=function(e){if("cursor"===e.type){const t=`${e.prefix}${e.suffix}`.trim();return{...e,fieldName:t,suggestionTypes:["field","operator","conjunction"]}}return e(Ue(null))}(t)),t}())),t}()),t}()),t}function be(){var e;return ie++,e=Te(),ie--,e===i&&0===ie&&le(E),e}function _e(){var t,n,r,a,o,u,s,c;if(t=X,40===e.charCodeAt(X)?(n="(",X++):(n=i,0===ie&&le(b)),n!==i){for(r=[],a=je();a!==i;)r.push(a),a=je();a=function(){var e,t,n,r,a;if(e=X,(t=ye())!==i){if(n=[],r=X,Ee()!==i&&(a=ye())!==i?(ee=r,r=Z(0,a)):(X=r,r=i),r!==i)for(;r!==i;)n.push(r),r=X,Ee()!==i&&(a=ye())!==i?(ee=r,r=Z(0,a)):(X=r,r=i);else n=i;n!==i?(ee=e,e=function(e,t){const n=[e,...t],r=De&&n.find((e=>"cursor"===e.type));return r?{...r,suggestionTypes:["value"]}:e=>Ge("or",n.map((t=>t(e))))}(t,n)):(X=e,e=i)}else X=e,e=i;return e===i&&(e=ye()),e}(),a!==i&&(o=Ne())!==i?(41===e.charCodeAt(X)?(u=")",X++):(u=i,0===ie&&le(_)),u!==i?(ee=t,s=a,t="cursor"===(c=o).type?{...c,suggestionTypes:["conjunction"]}:s):(X=t,t=i)):(X=t,t=i)}else X=t,t=i;return t===i&&(t=ve()),t}function ye(){var e,t,n,r,a;if(e=X,(t=he())!==i){if(n=[],r=X,Oe()!==i&&(a=he())!==i?(ee=r,r=Z(0,a)):(X=r,r=i),r!==i)for(;r!==i;)n.push(r),r=X,Oe()!==i&&(a=he())!==i?(ee=r,r=Z(0,a)):(X=r,r=i);else n=i;n!==i?(ee=e,e=function(e,t){const n=[e,...t],r=De&&n.find((e=>"cursor"===e.type));return r?{...r,suggestionTypes:["value"]}:e=>Ge("and",n.map((t=>t(e))))}(t,n)):(X=e,e=i)}else X=e,e=i;return e===i&&(e=he()),e}function he(){var e,t,n;return e=X,Se()!==i&&(t=_e())!==i?(ee=e,e="cursor"===(n=t).type?{...list,suggestionTypes:["value"]}:e=>Ge("not",[n(e)])):(X=e,e=i),e===i&&(e=_e()),e}function ve(){var e,t;return ie++,e=X,(t=Ae())!==i&&(ee=e,t=function(e){if("cursor"===e.type)return e;const t=Ue(!0);return n=>Ge("is",[n,e,t])}(t)),(e=t)===i&&(e=X,(t=Le())!==i&&(ee=e,t=function(e){if("cursor"===e.type)return e;!Fe&&"wildcard"===e.type&&Be.wildcard.hasLeadingWildcard(e)&&function(e,t){throw function(e,t){return new r("Leading wildcards are disabled. See query:allowLeadingWildcards in Advanced Settings.",null,null,t)}(0,t=void 0!==t?t:ce(ee,X))}();const t=Ue(!1);return n=>Ge("is",[n,e,t])}(t)),e=t),ie--,e===i&&(t=i,0===ie&&le(O)),e}function Ee(){var t,n,r,a,o;if(ie++,t=X,n=[],(r=je())!==i)for(;r!==i;)n.push(r),r=je();else n=i;if(n!==i)if("or"===e.substr(X,2).toLowerCase()?(r=e.substr(X,2),X+=2):(r=i,0===ie&&le(T)),r!==i){if(a=[],(o=je())!==i)for(;o!==i;)a.push(o),o=je();else a=i;a!==i?t=n=[n,r,a]:(X=t,t=i)}else X=t,t=i;else X=t,t=i;return ie--,t===i&&(n=i,0===ie&&le(S)),t}function Oe(){var t,n,r,a,o;if(ie++,t=X,n=[],(r=je())!==i)for(;r!==i;)n.push(r),r=je();else n=i;if(n!==i)if("and"===e.substr(X,3).toLowerCase()?(r=e.substr(X,3),X+=3):(r=i,0===ie&&le(I)),r!==i){if(a=[],(o=je())!==i)for(;o!==i;)a.push(o),o=je();else a=i;a!==i?t=n=[n,r,a]:(X=t,t=i)}else X=t,t=i;else X=t,t=i;return ie--,t===i&&(n=i,0===ie&&le(A)),t}function Se(){var t,n,r,a;if(ie++,t=X,"not"===e.substr(X,3).toLowerCase()?(n=e.substr(X,3),X+=3):(n=i,0===ie&&le(C)),n!==i){if(r=[],(a=je())!==i)for(;a!==i;)r.push(a),a=je();else r=i;r!==i?t=n=[n,r]:(X=t,t=i)}else X=t,t=i;return ie--,t===i&&(n=i,0===ie&&le(L)),t}function Te(){var e;return ie++,(e=Ae())===i&&(e=Le()),ie--,e===i&&0===ie&&le(N),e}function Ae(){var t,n,r,a,o,u,c;if(t=X,ee=X,(n=(n=Q())?void 0:i)!==i)if(34===e.charCodeAt(X)?(r=s,X++):(r=i,0===ie&&le(x)),r!==i){for(a=[],o=Ie();o!==i;)a.push(o),o=Ie();if((o=we())!==i){for(u=[],c=Ie();c!==i;)u.push(c),c=Ie();34===e.charCodeAt(X)?(c=s,X++):(c=i,0===ie&&le(x)),c!==i?(ee=t,t=K(a,o,u)):(X=t,t=i)}else X=t,t=i}else X=t,t=i;else X=t,t=i;if(t===i)if(t=X,34===e.charCodeAt(X)?(n=s,X++):(n=i,0===ie&&le(x)),n!==i){for(r=[],a=Ie();a!==i;)r.push(a),a=Ie();34===e.charCodeAt(X)?(a=s,X++):(a=i,0===ie&&le(x)),a!==i?(ee=t,t=Ue(r.join(""))):(X=t,t=i)}else X=t,t=i;return t}function Ie(){var t,n,r;return(t=xe())===i&&(t=Me())===i&&(t=X,92===e.charCodeAt(X)?(n=c,X++):(n=i,0===ie&&le(P)),n!==i?(d.test(e.charAt(X))?(r=e.charAt(X),X++):(r=i,0===ie&&le(M)),r!==i?(ee=t,t=r):(X=t,t=i)):(X=t,t=i),t===i&&(t=X,n=X,ie++,r=we(),ie--,r===i?n=void 0:(X=n,n=i),n!==i?(f.test(e.charAt(X))?(r=e.charAt(X),X++):(r=i,0===ie&&le(R)),r!==i?(ee=t,t=r):(X=t,t=i)):(X=t,t=i))),t}function Le(){var e,t,n,r,a,o;if(e=X,ee=X,(t=(t=Q())?void 0:i)!==i){for(n=[],r=Ce();r!==i;)n.push(r),r=Ce();if((r=we())!==i){for(a=[],o=Ce();o!==i;)a.push(o),o=Ce();ee=e,e=K(n,r,a)}else X=e,e=i}else X=e,e=i;if(e===i){if(e=X,t=[],(n=Ce())!==i)for(;n!==i;)t.push(n),n=Ce();else t=i;t!==i&&(ee=e,t=function(e){const t=e.join("").trim();return"null"===t?Ue(null):"true"===t?Ue(!0):"false"===t?Ue(!1):e.includes(ze)?Ve(t):Ue(t)}(t)),e=t}return e}function Ce(){var t,n,r,a,o;return(t=xe())===i&&(t=function(){var t,n,r;return t=X,92===e.charCodeAt(X)?(n=c,X++):(n=i,0===ie&&le(P)),n!==i&&(r=Pe())!==i?(ee=t,t=r):(X=t,t=i),t}(),t===i&&(t=Me())===i&&(t=function(){var t,n,r;return t=X,92===e.charCodeAt(X)?(n=c,X++):(n=i,0===ie&&le(P)),n!==i?("or"===e.substr(X,2).toLowerCase()?(r=e.substr(X,2),X+=2):(r=i,0===ie&&le(T)),r===i&&("and"===e.substr(X,3).toLowerCase()?(r=e.substr(X,3),X+=3):(r=i,0===ie&&le(I)),r===i&&("not"===e.substr(X,3).toLowerCase()?(r=e.substr(X,3),X+=3):(r=i,0===ie&&le(C)))),r!==i?(ee=t,t=r):(X=t,t=i)):(X=t,t=i),t}(),t===i&&(t=function(){var t,n;return t=X,42===e.charCodeAt(X)?(n="*",X++):(n=i,0===ie&&le(w)),n!==i&&(ee=t,n=ze),n}(),t===i&&(t=X,n=X,ie++,r=Pe(),ie--,r===i?n=void 0:(X=n,n=i),n!==i?(r=X,ie++,a=function(){var e;return(e=Ee())===i&&(e=Oe())===i&&(e=Se()),e}(),ie--,a===i?r=void 0:(X=r,r=i),r!==i?(a=X,ie++,o=we(),ie--,o===i?a=void 0:(X=a,a=i),a!==i?(e.length>X?(o=e.charAt(X),X++):(o=i,0===ie&&le(j)),o!==i?(ee=t,t=o):(X=t,t=i)):(X=t,t=i)):(X=t,t=i)):(X=t,t=i))))),t}function Ne(){var e,t,n,r,a,o;if(e=X,ee=X,(t=(t=Q())?void 0:i)!==i){for(n=[],r=je();r!==i;)n.push(r),r=je();if((r=we())!==i){for(a=[],o=je();o!==i;)a.push(o),o=je();ee=e,e=K(n,r,a)}else X=e,e=i}else X=e,e=i;if(e===i)for(e=[],t=je();t!==i;)e.push(t),t=je();return e}function xe(){var t,n;return t=X,"\\t"===e.substr(X,2)?(n="\\t",X+=2):(n=i,0===ie&&le(D)),n!==i&&(ee=t,n="\t"),(t=n)===i&&(t=X,"\\r"===e.substr(X,2)?(n="\\r",X+=2):(n=i,0===ie&&le(k)),n!==i&&(ee=t,n="\r"),(t=n)===i&&(t=X,"\\n"===e.substr(X,2)?(n="\\n",X+=2):(n=i,0===ie&&le(F)),n!==i&&(ee=t,n="\n"),t=n)),t}function Pe(){var t;return p.test(e.charAt(X))?(t=e.charAt(X),X++):(t=i,0===ie&&le(B)),t}function Me(){var t,n,r;return t=X,92===e.charCodeAt(X)?(n=c,X++):(n=i,0===ie&&le(P)),n!==i?(r=function(){var t,n,r,a,o,u,s,c,l;return t=X,117===e.charCodeAt(X)?(n="u",X++):(n=i,0===ie&&le(G)),n!==i?(r=X,a=X,(o=Re())!==i&&(u=Re())!==i&&(s=Re())!==i&&(c=Re())!==i?a=o=[o,u,s,c]:(X=a,a=i),(r=a!==i?e.substring(r,X):a)!==i?(ee=t,l=r,t=String.fromCharCode(parseInt(l,16))):(X=t,t=i)):(X=t,t=i),t}(),r!==i?(ee=t,t=r):(X=t,t=i)):(X=t,t=i),t}function Re(){var t;return g.test(e.charAt(X))?(t=e.charAt(X),X++):(t=i,0===ie&&le(U)),t}function je(){var t;return ie++,m.test(e.charAt(X))?(t=e.charAt(X),X++):(t=i,0===ie&&le(Y)),ie--,t===i&&0===ie&&le(H),t}function we(){var t,n;return t=X,ee=X,(Q()?void 0:i)!==i?(e.substr(X,14)===l?(n=l,X+=14):(n=i,0===ie&&le(W)),n!==i?(ee=t,t=ke):(X=t,t=i)):(X=t,t=i),t}const{parseCursor:De,cursorSymbol:ke,allowLeadingWildcards:Fe=!0,helpers:{nodeTypes:Be}}=t,Ge=Be.function.buildNodeWithArgumentNodes,Ue=Be.literal.buildNode,Ve=Be.wildcard.buildNode,{wildcardSymbol:ze}=Be.wildcard;if((n=u())!==i&&X===e.length)return n;throw n!==i&&X<e.length&&le({type:"end"}),qe=re,$e=ne<e.length?e.charAt(ne):null,He=ne<e.length?ce(ne,ne+1):ce(ne,ne),new r(r.buildMessage(qe,$e),qe,$e,He);var qe,$e,He}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(23);function i(e,t){if("string"==typeof e)return e;const n=t.split(".");return 2===n.length?n[1]:void 0}function a(e){var t,n,a,o,u,s;const c={label:e.title?e.title:r.b,emsLayerId:e.params.selectedLayer.isEMS?i(e.params.selectedLayer.id,e.params.selectedLayer.layerId):void 0,leftFieldName:e.params.selectedLayer.isEMS?e.params.selectedJoinField.name:void 0,colorSchema:e.params.colorSchema,indexPatternId:null===(t=e.data.indexPattern)||void 0===t?void 0:t.id,indexPatternTitle:null===(n=e.data.indexPattern)||void 0===n?void 0:n.title,metricAgg:"count"},l=null===(a=e.data)||void 0===a||null===(o=a.aggs)||void 0===o?void 0:o.byType("buckets");var d;null!=l&&l.length&&"terms"===l[0].type.dslName&&(c.termsFieldName=null===(d=l[0].getField())||void 0===d?void 0:d.name,c.termsSize=l[0].getParam("size"));const f=null===(u=e.data)||void 0===u||null===(s=u.aggs)||void 0===s?void 0:s.byType("metrics");var p;return null!=f&&f.length&&(c.metricAgg=f[0].type.dslName,c.metricFieldName=null===(p=f[0].getField())||void 0===p?void 0:p.name),c}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(31),i=n(24);function a(e){var t,n,a,o,u;const s={label:e.title?e.title:i.b,mapType:e.params.mapType,colorSchema:e.params.colorSchema,indexPatternId:null===(t=e.data.indexPattern)||void 0===t?void 0:t.id,metricAgg:"count"},c=null===(n=e.data)||void 0===n||null===(a=n.aggs)||void 0===a?void 0:a.byType("buckets");var l;if(null!=c&&c.length&&"geohash_grid"===c[0].type.dslName)s.geoFieldName=null===(l=c[0].getField())||void 0===l?void 0:l.name;else if(e.data.indexPattern){const t=e.data.indexPattern.fields.find((e=>!r.indexPatterns.isNestedField(e)&&e.aggregatable&&"geo_point"===e.type));t&&(s.geoFieldName=t.name)}const d=null===(o=e.data)||void 0===o||null===(u=o.aggs)||void 0===u?void 0:u.byType("metrics");var f;return null!=d&&d.length&&(s.metricAgg=d[0].type.dslName,s.metricFieldName=null===(f=d[0].getField())||void 0===f?void 0:f.name),s}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return r.c}));var r=n(29)},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/home/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){e.exports=n(10)(2468)},function(e,t,n){e.exports=n(10)(2476)},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/visualizations/common/utils");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";n.r(t);var r=n(1);n.d(t,"AGG_TYPE",(function(){return r.b})),n.d(t,"APP_ID",(function(){return r.e})),n.d(t,"COLOR_MAP_TYPE",(function(){return r.i})),n.d(t,"DECIMAL_DEGREES_PRECISION",(function(){return r.o})),n.d(t,"ES_GEO_FIELD_TYPE",(function(){return r.A})),n.d(t,"FIELD_ORIGIN",(function(){return r.E})),n.d(t,"INITIAL_LOCATION",(function(){return r.T})),n.d(t,"LABEL_BORDER_SIZES",(function(){return r.W})),n.d(t,"LAYER_TYPE",(function(){return r.Z})),n.d(t,"MAP_SAVED_OBJECT_TYPE",(function(){return r.eb})),n.d(t,"SCALING_TYPES",(function(){return r.rb})),n.d(t,"SOURCE_TYPES",(function(){return r.wb})),n.d(t,"STYLE_TYPE",(function(){return r.yb})),n.d(t,"SYMBOLIZE_AS_TYPES",(function(){return r.zb})),n.d(t,"LAYER_WIZARD_CATEGORY",(function(){return r.ab})),n.d(t,"MAX_ZOOM",(function(){return r.fb})),n.d(t,"MIN_ZOOM",(function(){return r.jb})),n.d(t,"VECTOR_SHAPE_TYPE",(function(){return r.Bb})),n.d(t,"VECTOR_STYLES",(function(){return r.Cb}))},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},function(e,t,n){n(53),__kbnBundles__.define("plugin/maps/public",n,54),__kbnBundles__.define("plugin/maps/common",n,49)},function(e,t,n){n.p=window.__kbnPublicPath__.maps},function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return ie})),n.d(t,"MAP_SAVED_OBJECT_TYPE",(function(){return g.eb})),n.d(t,"MAPS_APP_LOCATOR",(function(){return I})),n.d(t,"GEOJSON_FEATURE_ID_PROPERTY_NAME",(function(){return re.a}));var r=n(4),i=n.n(r),a=n(7),o=n.n(a),u=n(35),s=n(2),c=n(12),l=n(6);const d=()=>Object(a.lazy)((()=>n.e(10).then(n.bind(null,448)))),f={title:s.i18n.translate("xpack.maps.inspector.mapDetailsViewTitle",{defaultMessage:"Map details"}),order:30,help:s.i18n.translate("xpack.maps.inspector.mapDetailsViewHelpText",{defaultMessage:"View the map state"}),shouldShow:e=>Boolean(e.map),component:e=>Object(l.jsx)(c.a,{getLazyComponent:d,lazyComponentProps:e})};var p=n(8),g=n(1),m=n(17),b=n(45);const _={id:g.e,title:Object(m.a)(),subtitle:s.i18n.translate("xpack.maps.featureCatalogue.mapsSubtitle",{defaultMessage:"Plot geographic data."}),description:s.i18n.translate("xpack.maps.feature.appDescription",{defaultMessage:"Explore geospatial data from Elasticsearch and the Elastic Maps Service."}),icon:g.c,path:"/app/maps",showOnHomePage:!1,category:b.FeatureCatalogueCategory.DATA,solutionId:"kibana",order:400};var y=n(14),h=n(25),v=n.n(h),E=n(33),O=n.n(E),S=n(27),T=n(28),A=n(9);const I="MAPS_APP_LOCATOR";class locators_MapsAppLocatorDefinition{constructor(e){i()(this,"id",I),i()(this,"getLocation",(async e=>{const{mapId:t,filters:n,query:r,refreshInterval:i,timeRange:a,initialLayers:o,hash:u}=e,s=null!=u?u:this.deps.useHash,c={},l={};r&&(c.query=r),n&&n.length&&(c.filters=null==n?void 0:n.filter((e=>!Object(S.f)(e)))),a&&(l.time=a),n&&n.length&&(l.filters=null==n?void 0:n.filter((e=>Object(S.f)(e)))),i&&(l.refreshInterval=i);let d=`/map#/${t||""}`;if(d=Object(T.setStateToKbnUrl)("_g",l,{useHash:s},d),d=Object(T.setStateToKbnUrl)("_a",c,{useHash:s},d),o&&o.length){const e=O.a.encode_array(o);d=`${d}&${g.S}=${encodeURIComponent(e)}`}return{app:g.e,path:d,state:{}}})),this.deps=e}}class locators_MapsAppTileMapLocatorDefinition{constructor(e){i()(this,"id","MAPS_APP_TILE_MAP_LOCATOR"),i()(this,"getLocation",(async e=>{const{label:t,mapType:n,colorSchema:r,indexPatternId:i,geoFieldName:a,metricAgg:o,metricFieldName:u,filters:s,query:c,timeRange:l,hash:d=!0}=e,f=[],p=(await Object(A.a)()).createTileMapLayerDescriptor({label:t,mapType:n,colorSchema:r,indexPatternId:i,geoFieldName:a,metricAgg:o,metricFieldName:u});return p&&f.push(p),await this.deps.locator.getLocation({initialLayers:f,filters:s,query:c,timeRange:l,hash:d})})),this.deps=e}}class locators_MapsAppRegionMapLocatorDefinition{constructor(e){i()(this,"id","MAPS_APP_REGION_MAP_LOCATOR"),i()(this,"getLocation",(async e=>{const{label:t,emsLayerId:n,leftFieldName:r,termsFieldName:i,termsSize:a,colorSchema:o,indexPatternId:u,indexPatternTitle:s,metricAgg:c,metricFieldName:l,filters:d,query:f,timeRange:p,hash:g=!0}=e,m=[],b=(await Object(A.a)()).createRegionMapLayerDescriptor({label:t,emsLayerId:n,leftFieldName:r,termsFieldName:i,termsSize:a,colorSchema:o,indexPatternId:u,indexPatternTitle:s,metricAgg:c,metricFieldName:l});return b&&m.push(b),await this.deps.locator.getLocation({initialLayers:m,filters:d,query:f,timeRange:p,hash:g})})),this.deps=e}}const L=Object(y.createAction)({id:y.ACTION_VISUALIZE_GEO_FIELD,type:y.ACTION_VISUALIZE_GEO_FIELD,getDisplayName:()=>s.i18n.translate("xpack.maps.discover.visualizeFieldLabel",{defaultMessage:"Visualize in Maps"}),isCompatible:async()=>!!Object(p.S)().show,getHref:async e=>{const{app:t,path:n}=await C(e);return Object(p.c)().application.getUrlForApp(t,{path:n,absolute:!1})},execute:async e=>{const{app:t,path:n,state:r}=await C(e),i=Object(p.R)();null==i||i.reportUiCounter(g.e,"visualize_geo_field",e.originatingApp?e.originatingApp:"unknownOriginatingApp"),Object(p.c)().application.navigateToApp(t,{path:n,state:r})}}),C=async e=>{var t;const n=await Object(p.r)().get(e.indexPatternId),r=(null==e||null===(t=e.contextualFields)||void 0===t?void 0:t.length)&&"_source"!==(null==e?void 0:e.contextualFields[0]),i=[{id:v()(),visible:!0,type:g.Z.MVT_VECTOR,sourceDescriptor:{id:v()(),type:g.wb.ES_SEARCH,tooltipProperties:r?e.contextualFields:[],label:n.title,indexPatternId:e.indexPatternId,geoField:e.fieldName,scalingType:g.rb.MVT}}],a=Object(p.I)().url.locators.get(I);return await a.getLocation({filters:Object(p.g)().query.filterManager.getFilters(),query:Object(p.g)().query.queryString.getQuery(),initialLayers:i,timeRange:Object(p.g)().query.timefilter.timefilter.getTime()})};var N=n(22);const x="FILTER_BY_MAP_EXTENT",P=Object(y.createAction)({id:x,type:x,order:20,getDisplayName:({embeddable:e})=>e.getInput().filterByMapExtent?s.i18n.translate("xpack.maps.filterByMapExtentMenuItem.disableDisplayName",{defaultMessage:"Disable filter by map extent"}):s.i18n.translate("xpack.maps.filterByMapExtentMenuItem.enableDisplayName",{defaultMessage:"Enable filter by map extent"}),getIconType:()=>"filter",isCompatible:async({embeddable:e})=>e.type===g.eb&&e.getInput().viewMode===N.ViewMode.EDIT,execute:async({embeddable:e})=>{e.updateInput({filterByMapExtent:!e.getInput().filterByMapExtent})}});var M=n(19);const R=e=>{const t=e;if(!("attributes"in t)||void 0===t.attributes)return{state:e,references:[]};const{attributes:n,references:r}=Object(M.a)({attributes:t.attributes});return{state:{...e,attributes:n},references:r}},j=(e,t)=>{const n=e;if(!("attributes"in n)||void 0===n.attributes)return n;try{const{attributes:e}=Object(M.a)({attributes:n.attributes}),{attributes:r}=Object(M.b)({attributes:e,references:t});return{...n,attributes:r}}catch(e){return n}};class map_embeddable_factory_MapEmbeddableFactory{constructor(){i()(this,"type",g.eb),i()(this,"savedObjectMetaData",{name:s.i18n.translate("xpack.maps.mapSavedObjectLabel",{defaultMessage:"Map"}),type:g.eb,getIconForSavedObject:()=>g.c}),i()(this,"createFromSavedObject",(async(e,t,n)=>(t.savedObjectId||(t.savedObjectId=e),this.create(t,n)))),i()(this,"create",(async(e,t)=>{const{MapEmbeddable:n}=await Object(A.a)();return new n({editable:await this.isEditable()},e,t)})),i()(this,"inject",j),i()(this,"extract",R)}async isEditable(){const{getMapsCapabilities:e}=await Object(A.a)();return e().save}canCreateNew(){return!1}getDisplayName(){return Object(m.g)()}}const w={createSecurityLayerDescriptors:async(e,t)=>(await Object(A.a)()).createSecurityLayerDescriptors(e,t),createBasemapLayerDescriptor:async()=>(await Object(A.a)()).createBasemapLayerDescriptor(),createESSearchSourceLayerDescriptor:async e=>(await Object(A.a)()).createESSearchSourceLayerDescriptor(e)};async function D(e){const t=await Object(A.a)();return await t.suggestEMSTermJoinConfig(e)}var k=n(44),F=n(32),B=n(26),G=n(23),U=n(16);const V=()=>({name:"regionmap",type:"render",help:s.i18n.translate("xpack.maps.regionMap.function.help",{defaultMessage:"Regionmap visualization"}),args:{visConfig:{types:["string"],default:'"{}"',help:""}},fn:async(e,t)=>({type:"render",as:U.a,value:{visType:U.b,visConfig:JSON.parse(t.visConfig),filters:e.filters,query:Array.isArray(e.query)?e.query[0]:e.query,timeRange:e.timeRange}})});var z=n(13),q=n.n(z);const $=()=>Object(a.lazy)((()=>n.e(5).then(n.bind(null,444)))),H={name:U.a,reuseDomNode:!0,render:async(e,{filters:t,query:n,timeRange:r,visConfig:i},a)=>{a.onDestroy((()=>{Object(z.unmountComponentAtNode)(e)}));const o={onInitialRenderComplete:()=>{a.done()},filters:t,query:n,timeRange:r,visConfig:i};Object(z.render)(Object(l.jsx)(c.a,{getLazyComponent:$,lazyComponentProps:o}),e)}};var Y=n(24),W=n(15);const J=()=>({name:"tilemap",type:"render",help:s.i18n.translate("xpack.maps.tileMap.function.help",{defaultMessage:"Tilemap visualization"}),args:{visConfig:{types:["string"],default:'"{}"',help:""}},fn:async(e,t)=>({type:"render",as:W.b,value:{visType:W.c,visConfig:JSON.parse(t.visConfig),filters:e.filters,query:Array.isArray(e.query)?e.query[0]:e.query,timeRange:e.timeRange}})}),Z=()=>Object(a.lazy)((()=>n.e(6).then(n.bind(null,446)))),Q={name:W.b,reuseDomNode:!0,render:async(e,{filters:t,query:n,timeRange:r,visConfig:i},a)=>{a.onDestroy((()=>{Object(z.unmountComponentAtNode)(e)}));const o={onInitialRenderComplete:()=>{a.done()},filters:t,query:n,timeRange:r,visConfig:i};Object(z.render)(Object(l.jsx)(c.a,{getLazyComponent:Z,lazyComponentProps:o}),e)}};var K=n(30),X=n.n(K);const ee="lens_choropleth_chart_renderer";var te=n(48);const ne=()=>({name:"lens_choropleth_chart",type:"render",help:"A choropleth chart. Metrics are joined to vector features to compare values across political boundaries",args:{title:{types:["string"],help:""},description:{types:["string"],help:""},layerId:{types:["string"],help:""},emsField:{types:["string"],help:"Elastic Map Service boundaries layer field provides the vector feature join key"},emsLayerId:{types:["string"],help:"Elastic Map Service boundaries layer id that provides vector features"},regionAccessor:{types:["string"],help:"Bucket accessor identifies the region key column"},valueAccessor:{types:["string"],help:"Value accessor identifies the value column"}},inputTypes:["lens_multitable"],fn(e,t,n){var r;if(null!=n&&null!==(r=n.inspectorAdapters)&&void 0!==r&&r.tables){const r=Object(te.prepareLogTable)(Object.values(e.tables)[0],[[t.valueAccessor?[t.valueAccessor]:void 0,s.i18n.translate("xpack.maps.logDatatable.value",{defaultMessage:"Value"})],[t.regionAccessor?[t.regionAccessor]:void 0,s.i18n.translate("xpack.maps.logDatatable.region",{defaultMessage:"Region key"})]],!0);n.inspectorAdapters.tables.logDatatable("default",r)}return{type:"render",as:ee,value:{data:e,args:t}}}});class plugin_MapsPlugin{constructor(e){i()(this,"_initializerContext",void 0),this._initializerContext=e}setup(e,t){var r;Object(B.e)(t.licensing);const i=this._initializerContext.config.get();Object(p.U)(i);const a=t.share.url.locators.create(new locators_MapsAppLocatorDefinition({useHash:e.uiSettings.get("state:storeInSessionStorage")}));return t.share.url.locators.create(new locators_MapsAppTileMapLocatorDefinition({locator:a})),t.share.url.locators.create(new locators_MapsAppRegionMapLocatorDefinition({locator:a})),t.inspector.registerView(f),t.home&&t.home.featureCatalogue.register(_),t.visualizations.registerAlias(function(e){e.hideTypes(["region_map","tile_map"]);const t=s.i18n.translate("xpack.maps.visTypeAlias.description",{defaultMessage:"Create and style maps with multiple layers and indices."});return{aliasApp:g.e,aliasPath:`/${g.db}`,name:g.e,title:g.f,description:t,icon:g.c,stage:"production",appExtensions:{visualizations:{docTypes:[g.eb],searchFields:["title^3"],toListItem(e){const{id:t,type:n,attributes:r}=e,{title:i,description:a}=r;return{id:t,title:i,description:a,editUrl:Object(g.Gb)(t),editApp:g.e,icon:g.c,stage:"production",savedObjectType:n,typeTitle:g.f}}}}}}(t.visualizations)),t.embeddable.registerEmbeddableFactory(g.eb,new map_embeddable_factory_MapEmbeddableFactory),e.application.register({id:g.e,title:Object(m.a)(),order:4e3,icon:`plugins/${g.e}/icon.svg`,euiIconType:g.d,category:u.DEFAULT_APP_CATEGORIES.kibana,async mount(e){var n,r;const i=null!==(n=null===(r=t.usageCollection)||void 0===r?void 0:r.components.ApplicationUsageTrackingProvider)&&void 0!==n?n:o.a.Fragment,{renderApp:a}=await Object(A.a)();return a(e,i)}}),c=e,d=t.expressions,b=t.lens,d.registerRenderer((()=>function(e){return{name:ee,displayName:"Choropleth chart",help:"Choropleth chart renderer",validate:()=>{},reuseDomNode:!0,render:async(t,r,i)=>{const[a,o]=await e.getStartServices(),{ChoroplethChart:u}=await Promise.all([n.e(0),n.e(9)]).then(n.bind(null,449)),{getEmsFileLayers:s}=await n.e(1).then(n.bind(null,77)),c=o.embeddable.getEmbeddableFactory("map");if(!c)return;let d=[];try{d=await s()}catch(e){}q.a.render(Object(l.jsx)(u,X()({},r,{formatFactory:o.fieldFormats.deserialize,uiSettings:a.uiSettings,emsFileLayers:d,mapEmbeddableFactory:c})),t,(()=>{i.done()})),i.onDestroy((()=>q.a.unmountComponentAtNode(t)))}}}(c))),d.registerFunction(ne),b.registerVisualization((async()=>{const[e,t]=await c.getStartServices(),{getEmsFileLayers:r}=await n.e(1).then(n.bind(null,77)),{getVisualization:i}=await n.e(4).then(n.bind(null,447));let a=[];try{a=await r()}catch(e){}return i({theme:e.theme,emsFileLayers:a,paletteService:await t.charts.palettes.getPalettes()})})),t.expressions.registerFunction(V),t.expressions.registerRenderer(H),t.visualizations.createBaseVisualization(G.a),t.expressions.registerFunction(J),t.expressions.registerRenderer(Q),t.visualizations.createBaseVisualization(Y.a),Object(p.T)(!(null===(r=t.cloud)||void 0===r||!r.isCloudEnabled)),{registerLayerWizard:k.b,registerSource:F.b};var c,d,b}start(e,t){return Object(B.f)(t.licensing),Object(p.V)(e,t),e.application.capabilities.maps.show&&t.uiActions.addTriggerAction(y.VISUALIZE_GEO_FIELD_TRIGGER,L),t.uiActions.addTriggerAction(N.CONTEXT_MENU_TRIGGER,P),e.application.capabilities.maps.save||t.visualizations.unRegisterAlias(g.e),{createLayerDescriptors:w,suggestEMSTermJoinConfig:D}}}var re=n(34);const ie=e=>new plugin_MapsPlugin(e)},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.Classnames},function(e,t){e.exports=__kbnSharedDeps__.RxjsOperators},function(e,t){e.exports=__kbnSharedDeps__.KbnStd},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/data/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/savedObjects/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.ReactRouterDom},function(e,t){e.exports=__kbnSharedDeps__.Rxjs},function(e,t){e.exports=__kbnSharedDeps__.ElasticEuiLibServices},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/inspector/common/adapters/request");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.Moment},function(e,t){e.exports=__kbnSharedDeps__.SaferLodashSet},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/usageCollection/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.KbnUiTheme},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/presentationUtil/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/lens/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))}]);