/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.maps_bundle_jsonpfunction=window.maps_bundle_jsonpfunction||[]).push([[0,1],{104:function(e,t,r){e.exports=r(10)(954)},111:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return n}));const i="__trackedLayerDescriptor";function n(e){if("object"!=typeof e||null===e)return e;const t=Array.isArray(e)?[]:{};for(const r in e)r.startsWith("__")||(t[r]=n(e[r]));return t}},114:function(e,t,r){"use strict";r.d(t,"a",(function(){return AbstractSource}));var i=r(4),n=r.n(i),s=r(111),a=r(1);class AbstractSource{constructor(e,t){n()(this,"_descriptor",void 0),n()(this,"_inspectorAdapters",void 0),this._descriptor=e,this._inspectorAdapters=t}destroy(){}cloneDescriptor(){return Object(s.b)(this._descriptor)}async supportsFitToBounds(){return!1}async getImmutableProperties(){return[]}getInspectorAdapters(){return this._inspectorAdapters}getType(){return this._descriptor.type}async getDisplayName(){return""}getAttributionProvider(){return null}isFieldAware(){return!1}isGeoGridPrecisionAware(){return!1}isQueryAware(){return!1}getFieldNames(){return[]}renderSourceSettingsEditor(e){return null}getApplyGlobalQuery(){return!1}getApplyGlobalTime(){return!1}getApplyForceRefresh(){return!1}getIndexPatternIds(){return[]}getQueryableIndexPatternIds(){return[]}getGeoGridPrecision(e){return 0}isESSource(){return!1}async getPreIndexedShape(e){return null}async createFieldFormatter(e){return null}async getValueSuggestions(e,t){return[]}async isTimeAware(){return!1}isFilterByMapBounds(){return!1}getMinZoom(){return a.jb}getMaxZoom(){return a.fb}async getLicensedFeatures(){return[]}getUpdateDueToTimeslice(e,t){return!0}}},116:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var i=r(2),n=r(8);function s(){const e=Object(n.i)();return e.isIncludeElasticMapsService()?e.isEMSUrlSet()?e.hasOnPremLicense()?i.i18n.translate("xpack.maps.source.ems.noOnPremConnectionDescription",{defaultMessage:"Cannot connect to {host}.",values:{host:e.getEMSRoot()}}):i.i18n.translate("xpack.maps.source.ems.noOnPremLicenseDescription",{defaultMessage:"An enterprise license is required to connect to local Elastic Maps Server installations."}):i.i18n.translate("xpack.maps.source.ems.noAccessDescription",{defaultMessage:"Kibana is unable to access Elastic Maps Service. Contact your system administrator."}):i.i18n.translate("xpack.maps.source.ems.disabledDescription",{defaultMessage:'Access to Elastic Maps Service has been disabled. Ask your system administrator to set "map.includeElasticMapsService" in kibana.yml.'})}},118:function(e,t,r){"use strict";r.d(t,"a",(function(){return RasterTileLayer}));var i=r(4),n=r.n(i),s=r(0),a=r.n(s),o=r(119),c=r(1),u=r(212);class RasterTileLayer extends o.a{static createDescriptor(e){const t=super.createDescriptor(e);return t.type=c.Z.RASTER_TILE,t.alpha=a.a.get(e,"alpha",1),t.style={type:c.Y.TILE},t}constructor({source:e,layerDescriptor:t}){super({source:e,layerDescriptor:t}),n()(this,"_style",void 0),this._style=new u.a}getSource(){return super.getSource()}getStyleForEditing(){return this._style}getStyle(){return this._style}getCurrentStyle(){return this._style}async syncData({startLoading:e,stopLoading:t,onLoadError:r,dataFilters:i}){if(this.getSourceDataRequest())return;const n=Symbol(`layer-source-refresh:${this.getId()} - source`);e(c.tb,n,i);try{const e=await this.getSource().getUrlTemplate();t(c.tb,n,{url:e},{})}catch(e){r(c.tb,n,e.message)}}_getMbLayerId(){return this.makeMbLayerId("raster")}getMbLayerIds(){return[this._getMbLayerId()]}ownsMbLayerId(e){return this._getMbLayerId()===e}ownsMbSourceId(e){return this.getId()===e}syncLayerWithMB(e){const t=e.getSource(this.getId()),r=this._getMbLayerId();if(!t){const t=this.getSourceDataRequest();if(!t)return;const i=t.getData();if(!i||!i.url)return;const n=this.getMbSourceId();e.addSource(n,{type:"raster",tiles:[i.url],tileSize:256,scheme:"xyz"}),e.addLayer({id:r,type:"raster",source:n,minzoom:this._descriptor.minZoom,maxzoom:this._descriptor.maxZoom})}this._setTileLayerProperties(e,r)}_setTileLayerProperties(e,t){this.syncVisibilityWithMb(e,t),e.setLayerZoomRange(t,this.getMinZoom(),this.getMaxZoom()),e.setPaintProperty(t,"raster-opacity",this.getAlpha())}getLayerTypeIconName(){return"grid"}isBasemap(e){return 0===e}}},119:function(e,t,r){"use strict";r.d(t,"a",(function(){return AbstractLayer}));var i=r(4),n=r.n(i),s=r(0),a=r.n(s),o=(r(7),r(21)),c=r(25),u=r.n(c),l=r(93),p=r(1),d=r(111),h=r(6);class AbstractLayer{static createDescriptor(e){return{...e,sourceDescriptor:e.sourceDescriptor?e.sourceDescriptor:null,__dataRequests:a.a.get(e,"__dataRequests",[]),id:a.a.get(e,"id",u()()),label:e.label&&e.label.length>0?e.label:null,minZoom:a.a.get(e,"minZoom",p.jb),maxZoom:a.a.get(e,"maxZoom",p.fb),alpha:a.a.get(e,"alpha",.75),visible:a.a.get(e,"visible",!0),style:a.a.get(e,"style",null),includeInFitToBounds:"boolean"!=typeof e.includeInFitToBounds||e.includeInFitToBounds}}destroy(){this._source&&this._source.destroy()}constructor({layerDescriptor:e,source:t}){n()(this,"_descriptor",void 0),n()(this,"_source",void 0),n()(this,"_dataRequests",void 0),this._descriptor=AbstractLayer.createDescriptor(e),this._source=t,this._descriptor.__dataRequests?this._dataRequests=this._descriptor.__dataRequests.map((e=>new l.a(e))):this._dataRequests=[]}static getBoundDataForSource(e,t){return e.getStyle().sources[t].data}getDescriptor(){return this._descriptor}async cloneDescriptor(){const e=Object(d.b)(this._descriptor);e.id=u()();const t=await this.getDisplayName();return e.label=`Clone of ${t}`,e.sourceDescriptor=this.getSource().cloneDescriptor(),e}makeMbLayerId(e){return`${this.getId()}${p.hb}${e}`}isPreviewLayer(){return!!this._descriptor.__isPreviewLayer}supportsElasticsearchFilters(){return this.getSource().isESSource()}async supportsFitToBounds(){return await this.getSource().supportsFitToBounds()}async isFittable(){return await this.supportsFitToBounds()&&this.isVisible()&&this.isIncludeInFitToBounds()}isIncludeInFitToBounds(){return!!this._descriptor.includeInFitToBounds}async isFilteredByGlobalTime(){return!1}async getDisplayName(e){return this._descriptor.label?this._descriptor.label:(e?await e.getDisplayName():await this.getSource().getDisplayName())||`Layer ${this._descriptor.id}`}async getAttributions(){if(this.hasErrors()||!this.isVisible())return[];const e=this.getSource().getAttributionProvider();return e?e():void 0!==this._descriptor.attribution?[this._descriptor.attribution]:[]}getStyleForEditing(){throw new Error("Should implement AbstractLayer#getStyleForEditing")}getStyle(){throw new Error("Should implement AbstractLayer#getStyle")}getCurrentStyle(){throw new Error("Should implement AbstractLayer#getCurrentStyle")}getLabel(){return this._descriptor.label?this._descriptor.label:""}getLayerIcon(e){return{icon:Object(h.jsx)(o.EuiIcon,{size:"m",type:this.getLayerTypeIconName()})}}async hasLegendDetails(){return!1}renderLegendDetails(){return null}getId(){return this._descriptor.id}getSource(){return this._source}getSourceForEditing(){return this._source}isVisible(){return!!this._descriptor.visible}showAtZoomLevel(e){return e>=this.getMinZoom()&&e<=this.getMaxZoom()}getMinZoom(){return"number"==typeof this._descriptor.minZoom?this._descriptor.minZoom:p.jb}getMaxZoom(){return"number"==typeof this._descriptor.maxZoom?this._descriptor.maxZoom:p.fb}getMinSourceZoom(){return this._source.getMinZoom()}getMbSourceId(){return this.getId()}_requiresPrevSourceCleanup(e){return!1}_removeStaleMbSourcesAndLayers(e){if(this._requiresPrevSourceCleanup(e)){const t=e.getStyle();t.layers.forEach((t=>{this.ownsMbLayerId(t.id)&&e.removeLayer(t.id)})),Object.keys(t.sources).some((t=>{this.ownsMbSourceId(t)&&e.removeSource(t)}))}}getAlpha(){return"number"==typeof this._descriptor.alpha?this._descriptor.alpha:1}getQuery(){return this._descriptor.query?this._descriptor.query:null}async getImmutableSourceProperties(){const e=this.getSource();return await e.getImmutableProperties()}renderSourceSettingsEditor(e){return this.getSourceForEditing().renderSourceSettingsEditor(e)}getPrevRequestToken(e){const t=this.getDataRequest(e);if(t)return t.getRequestToken()}getInFlightRequestTokens(){if(!this._dataRequests)return[];const e=this._dataRequests.map((e=>e.getRequestToken()));return a.a.compact(e)}getSourceDataRequest(){return this.getDataRequest(p.tb)}getDataRequest(e){return this._dataRequests.find((t=>t.getDataId()===e))}isLayerLoading(){return void 0!==this._descriptor.__areTilesLoaded&&!this._descriptor.__areTilesLoaded||this._dataRequests.some((e=>e.isLoading()))}isLoadingBounds(){const e=this.getDataRequest(p.sb);return!!e&&e.isLoading()}hasErrors(){return a.a.get(this._descriptor,"__isInErrorState",!1)}getErrors(){return this.hasErrors()&&this._descriptor.__errorMessage?this._descriptor.__errorMessage:""}async syncData(e){}getMbLayerIds(){throw new Error("Should implement AbstractLayer#getMbLayerIds")}ownsMbLayerId(e){throw new Error("Should implement AbstractLayer#ownsMbLayerId")}ownsMbSourceId(e){throw new Error("Should implement AbstractLayer#ownsMbSourceId")}syncLayerWithMB(e){throw new Error("Should implement AbstractLayer#syncLayerWithMB")}getLayerTypeIconName(){throw new Error("should implement Layer#getLayerTypeIconName")}isInitialDataLoadComplete(){const e=this.getSourceDataRequest();return!!e&&e.hasData()}async getBounds(e){return null}renderStyleEditor(e,t){const r=this.getStyleForEditing();return r?r.renderEditor(e,t):null}getIndexPatternIds(){return[]}getQueryableIndexPatternIds(){return[]}syncVisibilityWithMb(e,t){e.setLayoutProperty(t,"visibility",this.isVisible()?"visible":"none")}getType(){return this._descriptor.type}areLabelsOnTop(){return!1}supportsLabelsOnTop(){return!1}async getLicensedFeatures(){return[]}getGeoFieldNames(){const e=this.getSource();return e.isESSource()?[e.getGeoFieldName()]:[]}async getStyleMetaDescriptorFromLocalFeatures(){return null}isBasemap(e){return!1}_getMetaFromTiles(){return this._descriptor.__metaFromTiles||[]}}},132:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return s}));var i=r(77);async function n(e){try{return s(e,await Object(i.getEmsFileLayers)())}catch(e){return null}}function s(e,t){const r=[];if(e.sampleValuesColumnName){const i=function(e,t,r){const i=[];return e.forEach((e=>{e.getFields().forEach((n=>{if(!n.alias||!n.alias.length)return;const s={layerId:e.getId(),field:n.id,displayName:e.getDisplayName()};n.alias.forEach((e=>{const o=new RegExp(e,"i"),c=!!t.match(o);let u;u=r?!(!n.values||!n.values.length)&&c&&a(r,n.values):c,u&&i.push(s)}))}))})),i}(t,e.sampleValuesColumnName,e.sampleValues);r.push(...i)}if(e.sampleValues&&e.sampleValues.length){const i=function(e,t){const r=[];return e.forEach((e=>{e.getFields().forEach((i=>{i.values&&i.values.length&&a(t,i.values)&&r.push({layerId:e.getId(),field:i.id,displayName:e.getDisplayName()})}))})),r}(t,e.sampleValues);r.push(...i)}const i=r.reduce(((e,t)=>{const r=e.find((e=>e.config.layerId===t.layerId&&e.config.field===t.layerId));return r?r.count+=1:e.push({config:t,count:1}),e}),[]);return i.sort(((e,t)=>t.count-e.count)),i.length?i[0].config:null}function a(e,t){for(let r=0;r<e.length;r++){const i=e[r].toString();if(!t.includes(i))return!1}return!0}},134:function(e,t,r){(function(e){var i=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},i=0;i<t.length;i++)r[t[i]]=Object.getOwnPropertyDescriptor(e,t[i]);return r},n=/%[sdj%]/g;t.format=function(e){if(!m(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(o(arguments[r]));return t.join(" ")}r=1;for(var i=arguments,s=i.length,a=String(e).replace(n,(function(e){if("%%"===e)return"%";if(r>=s)return e;switch(e){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(e){return"[Circular]"}default:return e}})),c=i[r];r<s;c=i[++r])f(c)||!_(c)?a+=" "+c:a+=" "+o(c);return a},t.deprecate=function(r,i){if(void 0!==e&&!0===e.noDeprecation)return r;if(void 0===e)return function(){return t.deprecate(r,i).apply(this,arguments)};var n=!1;return function(){if(!n){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),n=!0}return r.apply(this,arguments)}};var s,a={};function o(e,r){var i={seen:[],stylize:u};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),g(r)?i.showHidden=r:r&&t._extend(i,r),b(i.showHidden)&&(i.showHidden=!1),b(i.depth)&&(i.depth=2),b(i.colors)&&(i.colors=!1),b(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=c),l(i,e,i.depth)}function c(e,t){var r=o.styles[t];return r?"["+o.colors[r][0]+"m"+e+"["+o.colors[r][1]+"m":e}function u(e,t){return e}function l(e,r,i){if(e.customInspect&&r&&w(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var n=r.inspect(i,e);return m(n)||(n=l(e,n,i)),n}var s=function(e,t){if(b(t))return e.stylize("undefined","undefined");if(m(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return y(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):f(t)?e.stylize("null","null"):void 0}(e,r);if(s)return s;var a=Object.keys(r),o=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(r)),v(r)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return p(r);if(0===a.length){if(w(r)){var c=r.name?": "+r.name:"";return e.stylize("[Function"+c+"]","special")}if(S(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(M(r))return e.stylize(Date.prototype.toString.call(r),"date");if(v(r))return p(r)}var u,_="",E=!1,T=["{","}"];return h(r)&&(E=!0,T=["[","]"]),w(r)&&(_=" [Function"+(r.name?": "+r.name:"")+"]"),S(r)&&(_=" "+RegExp.prototype.toString.call(r)),M(r)&&(_=" "+Date.prototype.toUTCString.call(r)),v(r)&&(_=" "+p(r)),0!==a.length||E&&0!=r.length?i<0?S(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),u=E?function(e,t,r,i,n){for(var s=[],a=0,o=t.length;a<o;++a)x(t,String(a))?s.push(d(e,t,r,i,String(a),!0)):s.push("");return n.forEach((function(n){n.match(/^\d+$/)||s.push(d(e,t,r,i,n,!0))})),s}(e,r,i,o,a):a.map((function(t){return d(e,r,i,o,t,E)})),e.seen.pop(),function(e,t,r){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}(u,_,T)):T[0]+_+T[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,r,i,n,s){var a,o,c;if((c=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]}).get?o=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(o=e.stylize("[Setter]","special")),x(i,n)||(a="["+n+"]"),o||(e.seen.indexOf(c.value)<0?(o=f(r)?l(e,c.value,null):l(e,c.value,r-1)).indexOf("\n")>-1&&(o=s?o.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+o.split("\n").map((function(e){return"   "+e})).join("\n")):o=e.stylize("[Circular]","special")),b(a)){if(s&&n.match(/^\d+$/))return o;(a=JSON.stringify(""+n)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+o}function h(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function f(e){return null===e}function y(e){return"number"==typeof e}function m(e){return"string"==typeof e}function b(e){return void 0===e}function S(e){return _(e)&&"[object RegExp]"===E(e)}function _(e){return"object"==typeof e&&null!==e}function M(e){return _(e)&&"[object Date]"===E(e)}function v(e){return _(e)&&("[object Error]"===E(e)||e instanceof Error)}function w(e){return"function"==typeof e}function E(e){return Object.prototype.toString.call(e)}function T(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(r){if(b(s)&&(s=Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG||""),r=r.toUpperCase(),!a[r])if(new RegExp("\\b"+r+"\\b","i").test(s)){var i=e.pid;a[r]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",r,i,e)}}else a[r]=function(){};return a[r]},t.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=h,t.isBoolean=g,t.isNull=f,t.isNullOrUndefined=function(e){return null==e},t.isNumber=y,t.isString=m,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=b,t.isRegExp=S,t.isObject=_,t.isDate=M,t.isError=v,t.isFunction=w,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(290);var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(){var e=new Date,t=[T(e.getHours()),T(e.getMinutes()),T(e.getSeconds())].join(":");return[e.getDate(),I[e.getMonth()],t].join(" ")}function x(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",O(),t.format.apply(t,arguments))},t.inherits=r(291),t._extend=function(e,t){if(!t||!_(t))return e;for(var r=Object.keys(t),i=r.length;i--;)e[r[i]]=t[r[i]];return e};var j="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function D(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(j&&e[j]){var t;if("function"!=typeof(t=e[j]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,j,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,i=new Promise((function(e,i){t=e,r=i})),n=[],s=0;s<arguments.length;s++)n.push(arguments[s]);n.push((function(e,i){e?r(e):t(i)}));try{e.apply(this,n)}catch(e){r(e)}return i}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),j&&Object.defineProperty(t,j,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,i(e))},t.promisify.custom=j,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],i=0;i<arguments.length;i++)r.push(arguments[i]);var n=r.pop();if("function"!=typeof n)throw new TypeError("The last argument must be of type Function");var s=this,a=function(){return n.apply(s,arguments)};t.apply(this,r).then((function(t){e.nextTick(a,null,t)}),(function(t){e.nextTick(D,t,a)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.defineProperties(r,i(t)),r}}).call(this,r(104))},153:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var i=r(0),n=r.n(i),s=r(77),a=r(8),o=(r(195),r(196)),c=r(118),u=r(194),l=r(260);function p(){const e=Object(s.getKibanaTileMap)();return n.a.get(e,"url")?c.a.createDescriptor({sourceDescriptor:o.a.createDescriptor()}):Object(a.i)().isEMSEnabled()?u.a.createDescriptor({sourceDescriptor:l.a.createDescriptor({isAutoSelect:!0})}):null}},194:function(e,t,r){"use strict";r.d(t,"a",(function(){return ems_vector_tile_layer_EmsVectorTileLayer}));var i=r(4),n=r.n(i),s=r(0),a=r.n(s),o=r(289),c=r.n(o);function u(e,{width:t,height:r},i,n){if(n){if(n instanceof Uint8ClampedArray)n=new Uint8Array(n.buffer);else if(n.length!==t*r*i)throw new RangeError("mismatched image size")}else n=new Uint8Array(t*r*i);return e.width=t,e.height=r,e.data=n,e}function l(e,t,r,i,n,s){if(0===n.width||0===n.height)return t;if(n.width>e.width||n.height>e.height||r.x>e.width-n.width||r.y>e.height-n.height)throw new RangeError("out of range source coordinates for image copy");if(n.width>t.width||n.height>t.height||i.x>t.width-n.width||i.y>t.height-n.height)throw new RangeError("out of range destination coordinates for image copy");const a=e.data,o=t.data;c()(a!==o);for(let c=0;c<n.height;c++){const u=((r.y+c)*e.width+r.x)*s,l=((i.y+c)*t.width+i.x)*s;for(let e=0;e<n.width*s;e++)o[l+e]=a[u+e]}return t}class RGBAImage{constructor(e,t){u(this,e,4,t)}resize(e){!function(e,{width:t,height:r},i){if(t===e.width&&r===e.height)return;const n=u({},{width:t,height:r},i);l(e,n,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,t),height:Math.min(e.height,r)},i),e.width=t,e.height=r,e.data=n.data}(this,e,4)}replace(e,t){t?this.data.set(e):e instanceof Uint8ClampedArray?this.data=new Uint8Array(e.buffer):this.data=e}clone(){return new RGBAImage({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,r,i,n){l(e,t,r,i,n,4)}}var p=r(119),d=r(1),h=r(77),g=r(212);class ems_vector_tile_layer_EmsVectorTileLayer extends p.a{static createDescriptor(e){const t=super.createDescriptor(e);return t.type=d.Z.EMS_VECTOR_TILE,t.alpha=a.a.get(e,"alpha",1),t.style={type:d.Y.TILE},t}constructor({source:e,layerDescriptor:t}){super({source:e,layerDescriptor:t}),n()(this,"_style",void 0),this._style=new g.a}isInitialDataLoadComplete(){return!!this._descriptor.__areTilesLoaded}getSource(){return super.getSource()}getStyleForEditing(){return this._style}getStyle(){return this._style}getCurrentStyle(){return this._style}_canSkipSync({prevDataRequest:e,nextMeta:t}){if(!e)return!1;const r=e.getMeta();return!!r&&r.tileLayerId===t.tileLayerId}async syncData({startLoading:e,stopLoading:t,onLoadError:r}){const i={tileLayerId:this.getSource().getTileLayerId()};if(this._canSkipSync({prevDataRequest:this.getSourceDataRequest(),nextMeta:i}))return;const n=Symbol(`layer-source-refresh:${this.getId()} - source`);try{e(d.tb,n,i);const r=await this.getSource().getVectorStyleSheetAndSpriteMeta(Object(h.isRetina)()),s=r.spriteMeta?await this._loadSpriteSheetImageData(r.spriteMeta.png):void 0,a={...r,spriteSheetImageData:s};t(d.tb,n,a)}catch(e){r(d.tb,n,e.message)}}_generateMbId(e){return`${this.getId()}_${e}`}_generateMbSourceIdPrefix(){return`${this.getId()}___${this.getSource().getTileLayerId()}___`}_generateMbSourceId(e){return`${this._generateMbSourceIdPrefix()}${e}`}_getVectorStyle(){var e;const t=this.getSourceDataRequest();return t?null===(e=t.getData())||void 0===e?void 0:e.vectorStyleSheet:null}_getSpriteMeta(){var e;const t=this.getSourceDataRequest();return t?null===(e=t.getData())||void 0===e?void 0:e.spriteMeta:null}_getSpriteImageData(){var e;const t=this.getSourceDataRequest();return t?null===(e=t.getData())||void 0===e?void 0:e.spriteSheetImageData:null}getMbLayerIds(){const e=this._getVectorStyle();return e&&e.layers?e.layers.map((e=>this._generateMbId(e.id))):[]}getMbSourceIds(){const e=this._getVectorStyle();return e&&e.sources?Object.keys(e.sources).map((e=>this._generateMbSourceId(e))):[]}ownsMbLayerId(e){return e.startsWith(this.getId())}ownsMbSourceId(e){return e.startsWith(this.getId())}_makeNamespacedImageId(e){return this.getSource().getSpriteNamespacePrefix()+"/"+e}_requiresPrevSourceCleanup(e){const t=this._generateMbSourceIdPrefix(),r=e.getStyle();return!!r.sources&&Object.keys(r.sources).some((e=>{const r=this.ownsMbSourceId(e),i=e.startsWith(t);return r&&!i}))}_getImageData(e){const t=window.document.createElement("canvas"),r=t.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return t.width=e.width,t.height=e.height,r.drawImage(e,0,0,e.width,e.height),r.getImageData(0,0,e.width,e.height)}_isCrossOriginUrl(e){const t=window.document.createElement("a");return t.href=e,t.protocol!==window.document.location.protocol||t.host!==window.document.location.host||t.port!==window.document.location.port}_loadSpriteSheetImageData(e){return new Promise(((t,r)=>{const i=new Image;this._isCrossOriginUrl(e)&&(i.crossOrigin="Anonymous"),i.onload=e=>{t(this._getImageData(i))},i.onerror=e=>{r(e)},i.src=e}))}_addSpriteSheetToMapFromImageData(e,t,r){for(const i in e){if(!e.hasOwnProperty(i)||r.hasImage(i))continue;const{width:n,height:s,x:a,y:o,sdf:c,pixelRatio:u}=e[i];if("number"!=typeof n||"number"!=typeof s)continue;const l=new RGBAImage({width:n,height:s});RGBAImage.copy(t,l,{x:a,y:o},{x:0,y:0},{width:n,height:s}),r.addImage(i,l,{pixelRatio:u,sdf:c})}}syncLayerWithMB(e){const t=this._getVectorStyle();if(!t)return;this._removeStaleMbSourcesAndLayers(e);let r=!1;if((t.sources?Object.keys(t.sources):[]).forEach((i=>{if(r)return;const n=this._generateMbSourceId(i);e.getSource(n)?r=!0:e.addSource(n,t.sources[i])})),!r){const r=this._getSpriteMeta();if(!r)return;const i={};for(const e in r.json)r.json.hasOwnProperty(e)&&(i[this._makeNamespacedImageId(e)]=r.json[e]);const n=this._getSpriteImageData();if(!n)return;this._addSpriteSheetToMapFromImageData(i,n,e),(t.layers?t.layers:[]).forEach((t=>{const r=this._generateMbId(t.id);if(e.getLayer(r))return;const i={...t,source:this._generateMbSourceId("string"==typeof t.source?t.source:void 0),id:r};"symbol"===i.type&&i.layout&&"string"==typeof i.layout["icon-image"]&&(i.layout["icon-image"]=this._makeNamespacedImageId(i.layout["icon-image"])),"fill"===i.type&&i.paint&&"string"==typeof i.paint["fill-pattern"]&&(i.paint["fill-pattern"]=this._makeNamespacedImageId(i.paint["fill-pattern"])),e.addLayer(i)}))}this._setTileLayerProperties(e)}_getOpacityProps(e){return"fill"===e?["fill-opacity"]:"line"===e?["line-opacity"]:"circle"===e?["circle-opacity"]:"background"===e?["background-opacity"]:"symbol"===e?["icon-opacity","text-opacity"]:[]}_setOpacityForType(e,t,r){this._getOpacityProps(t.type).forEach((i=>{const n=t.paint;if(n&&"number"==typeof n[i]){const t=n[i]*this.getAlpha();e.setPaintProperty(r,i,t)}else e.setPaintProperty(r,i,this.getAlpha())}))}_setLayerZoomRange(e,t,r){let i=this.getMinZoom();"number"==typeof t.minzoom&&(i=Math.max(i,t.minzoom));let n=this.getMaxZoom();"number"==typeof t.maxzoom&&(n=Math.min(n,t.maxzoom)),e.setLayerZoomRange(r,i,n)}_setTileLayerProperties(e){const t=this._getVectorStyle();t&&t.layers&&t.layers.forEach((t=>{const r=this._generateMbId(t.id);this.syncVisibilityWithMb(e,r),this._setLayerZoomRange(e,t,r),this._setOpacityForType(e,t,r)}))}areLabelsOnTop(){return!!this._descriptor.areLabelsOnTop}supportsLabelsOnTop(){return!0}async getLicensedFeatures(){return this._source.getLicensedFeatures()}getLayerTypeIconName(){return"grid"}isBasemap(e){return 0===e}}},195:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var i=r(7),n=r(2),s=r(21),a=r(77),o=r(6);function c({onSourceConfigChange:e}){const t=Object(a.getKibanaTileMap)();return Object(i.useEffect)((()=>{t.url&&e()}),[]),Object(o.jsx)(s.EuiPanel,null,Object(o.jsx)(s.EuiFormRow,{label:n.i18n.translate("xpack.maps.source.kbnTMS.kbnTMS.urlLabel",{defaultMessage:"Tilemap url"}),helpText:t.url?null:n.i18n.translate("xpack.maps.source.kbnTMS.noLayerAvailableHelptext",{defaultMessage:'No tilemap layer is available. Ask your system administrator to set "map.tilemap.url" in kibana.yml.'})},Object(o.jsx)(s.EuiFieldText,{readOnly:!0,value:t.url?t.url:""})))}var u=r(196),l=r(118),p=r(1);const d={id:p.Db.KIBANA_BASEMAP,order:10,categories:[p.ab.REFERENCE],checkVisibility:async()=>!!Object(a.getKibanaTileMap)().url,description:n.i18n.translate("xpack.maps.source.kbnTMSDescription",{defaultMessage:"Tile map service configured in kibana.yml"}),icon:"logoKibana",renderWizard:({previewLayers:e})=>Object(o.jsx)(c,{onSourceConfigChange:()=>{const t=l.a.createDescriptor({sourceDescriptor:u.a.createDescriptor()});e([t])}}),title:u.b}},196:function(e,t,r){"use strict";r.d(t,"b",(function(){return h})),r.d(t,"a",(function(){return kibana_tilemap_source_KibanaTilemapSource}));var i=r(4),n=r.n(i),s=r(114),a=r(77),o=r(2),c=r(17),u=r(0),l=r.n(u),p=r(1),d=r(32);const h=o.i18n.translate("xpack.maps.source.kbnTMSTitle",{defaultMessage:"Configured Tile Map Service"});class kibana_tilemap_source_KibanaTilemapSource extends s.a{static createDescriptor(){return{type:kibana_tilemap_source_KibanaTilemapSource.type}}async getImmutableProperties(){return[{label:Object(c.b)(),value:h},{label:o.i18n.translate("xpack.maps.source.kbnTMS.urlLabel",{defaultMessage:"Tilemap url"}),value:await this.getUrlTemplate()}]}async getUrlTemplate(){const e=Object(a.getKibanaTileMap)();if(!e.url)throw new Error(o.i18n.translate("xpack.maps.source.kbnTMS.noConfigErrorMessage",{defaultMessage:"Unable to find map.tilemap.url configuration in the kibana.yml"}));return e.url}getAttributionProvider(){return async()=>{const e=Object(a.getKibanaTileMap)();return function(e){const t=[];return e.split("|").forEach((e=>{e=e.trim();const r=/\[(.*)\]\((.*)\)/.exec(e);r&&(null==r?void 0:r.length)>=3&&r[1]&&r[2]&&t.push({label:r[1],url:r[2]})})),t}(l.a.get(e,"options.attribution",""))}}async getDisplayName(){try{return await this.getUrlTemplate()}catch(e){return""}}}n()(kibana_tilemap_source_KibanaTilemapSource,"type",p.wb.KIBANA_TILEMAP),Object(d.b)({ConstructorFunction:kibana_tilemap_source_KibanaTilemapSource,type:p.wb.KIBANA_TILEMAP})},212:function(e,t,r){"use strict";r.d(t,"a",(function(){return TileStyle}));var i=r(4),n=r.n(i),s=r(1);class TileStyle{constructor(){n()(this,"_descriptor",void 0),this._descriptor={type:s.Y.TILE}}getType(){return s.Y.TILE}renderEditor(){return null}}},253:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r(7);var i=r(6);const n=()=>Object(i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"49",height:"25",fill:"none",viewBox:"0 0 49 25",className:"mapLayersWizardIcon"},Object(i.jsx)("path",{className:"mapLayersWizardIcon__highlight",d:"M13.175 15.71s-1.357 1.258.523 2.987c1.88 1.73-.379 3.912 1.096 5.712.782-.248-.418-.63 2.454-3.616 2.872-2.987 1.045-3.72-.574-4.454-1.619-.733-2.245-2.096-3.499-.629zm-2.506-2.987s.209-.68 1.305-.157c1.097.524 1.306-2.253 3.29-2.986 1.985-.734 2.037-1.625.783-2.306-1.253-.681-.888-1.205-2.088.472-1.202 1.676-2.007-1.516-.157-2.096.835-.262 1.044-1.468 0-1.834-1.045-.367-3.238.104-4.334-1.153C8.37 1.405 6.596.148 5.028 2.82c-1.566 2.672-.626 2.62 0 2.882.628.262 1.358-.42 2.09.943.73 1.363-.21 3.93.73 4.873.94.943-.068 2.841 3.604 3.302.418.052.835.157 1.044.366.21.21.992-.995-.679-1.362-1.67-.367-1.357-.786-1.148-1.1zm5.84-9.941c.495.332 1.462.157.992 1.258-.47 1.1-.627 2.882.313 3.51.94.63.836-1.938 2.559-1.938 1.723 0 2.872-6.13-.784-5.083-3.655 1.048-3.55 1.939-3.08 2.253zM44.716 1.3c.575-1.152-1.514-.89-2.715-.157-1.201.734-2.611.629-3.394.157-.784-.471-.418.734-1.619.891-1.201.157-2.559.262-2.298-.733.261-.996-1.096-.525-1.096-.525-1.15.367-1.985 1.677-1.724 2.83.261 1.153-1.514 1.834-3.133 1.153s-3.551.105-4.125 2.148c-.575 2.044-.992 2.463-1.723 3.197-.732.733.94 1.677 2.036-.053 1.097-1.729 1.828-.366 2.506.367.285.308.68 1.048.68 1.048s.115.258.317.618a2.081 2.081 0 00-.644-.103h-.258a2.028 2.028 0 00-1.518-.681h-2.297a2.04 2.04 0 00-2.037 2.043 2.04 2.04 0 002.037 2.044h1.712l.055.066c-.102.34-.272 1.214.457 1.701.919.615-.51.974.357 2.51.868 1.537 1.736 1.178 2.246.359.51-.82.306-1.025.97-1.537.664-.512.766-1.383.102-2.1-.29-.313-.287-.684-.193-1.003.163-.205.289-.442.366-.7l.031-.039-.02.003a2.106 2.106 0 00.07-.74c.27.209.56.355.857.389 1.32.147.948-1.129 1.836-1.121.51.233.796.626.984 1.435.366 1.572.575.262 1.62-.786 1.044-1.048 1.357-.173 2.819 1.153s.888-.524.731-1.467c-.157-.944 1.88-.01 1.306-2.146-.575-2.135 1.149-.422 1.514-2.098.366-1.677-1.201-1.94-.731-3.25.47-1.31 1.785-2.061 2.037-.209.275 2.031 2.287 1.773 1.817-.218-.47-1.991-.13-1.981.654-2.505.783-.525-1.166-.788-.592-1.94zM39.39 20.007c-1.134.27-.731 2.205.627 2.046 1.357-.16 2.245-.055 2.82 1.203.574 1.258 2.558-1.467 1.514-2.83-1.044-1.362-.835-1.467-1.358-2.358-.522-.89-2.507 1.677-3.603 1.94zm2.432-4.866h-.108a.792.792 0 010-1.583h.108a.792.792 0 110 1.583zm-4.302 3.486a.798.798 0 01-.56-.233.8.8 0 01-.231-.56.8.8 0 01.231-.56.8.8 0 01.56-.23.8.8 0 01.56.23.797.797 0 01.233.56.796.796 0 01-.792.793zm-7.133 3.593a.793.793 0 01-.56-1.35.793.793 0 011.12 0 .795.795 0 01.232.559.797.797 0 01-.792.792zm9.693-4.574a.797.797 0 01-.56-.231.794.794 0 01.56-1.352.793.793 0 010 1.583zm2.288-4.574a.792.792 0 01-.345-1.505c.597-.288.968-.88.968-1.544a.792.792 0 111.584 0 3.316 3.316 0 01-1.863 2.97.79.79 0 01-.344.08z"}))},260:function(e,t,r){"use strict";r.d(t,"b",(function(){return E})),r.d(t,"a",(function(){return ems_tms_source_EMSTMSSource}));var i=r(7),n=r(2),s=r(4),a=r.n(s),o=r(114),c=r(77),u=r(21),l=r(55),p=r(116),d=r(6);const h="auto_select";class tile_service_select_TileServiceSelect extends i.Component{constructor(...e){super(...e),a()(this,"_isMounted",!1),a()(this,"state",{emsTmsOptions:[],hasLoaded:!1}),a()(this,"_loadTmsOptions",(async()=>{try{const e=await Object(c.getEmsTmsServices)();if(!this._isMounted)return;const t=e.map((e=>({value:e.getId(),text:e.getDisplayName()?e.getDisplayName():e.getId()})));t.unshift({value:h,text:n.i18n.translate("xpack.maps.source.emsTile.autoLabel",{defaultMessage:"Autoselect based on Kibana theme"})}),this.setState({emsTmsOptions:t,hasLoaded:!0})}catch(e){this._isMounted&&this.setState({emsTmsOptions:[],hasLoaded:!0})}})),a()(this,"_onChange",(e=>{const t=e.target.value,r=t===h;this.props.onTileSelect({id:r?void 0:t,isAutoSelect:r})}))}componentWillUnmount(){this._isMounted=!1}componentDidMount(){this._isMounted=!0,this._loadTmsOptions()}render(){const e=0===this.state.emsTmsOptions.length?Object(p.a)():null;let t;return this.props.config&&(t=this.props.config.isAutoSelect?h:this.props.config.id),Object(d.jsx)(u.EuiFormRow,{label:n.i18n.translate("xpack.maps.source.emsTile.label",{defaultMessage:"Tile service"}),helpText:e,display:"columnCompressed"},Object(d.jsx)(u.EuiSelect,{hasNoInitialSelection:!t,value:t,options:this.state.emsTmsOptions,onChange:this._onChange,isLoading:!this.state.hasLoaded,disabled:this.state.hasLoaded&&0===this.state.emsTmsOptions.length,compressed:!0}))}}function g({onChange:e,config:t}){return Object(d.jsx)(i.Fragment,null,Object(d.jsx)(u.EuiPanel,null,Object(d.jsx)(u.EuiTitle,{size:"xs"},Object(d.jsx)("h5",null,Object(d.jsx)(l.FormattedMessage,{id:"xpack.maps.source.emsTile.settingsTitle",defaultMessage:"Basemap"}))),Object(d.jsx)(u.EuiSpacer,{size:"m"}),Object(d.jsx)(tile_service_select_TileServiceSelect,{onTileSelect:({id:t,isAutoSelect:r})=>{e({propName:"id",value:t}),e({propName:"isAutoSelect",value:r})},config:t})),Object(d.jsx)(u.EuiSpacer,{size:"s"}))}var f=r(17),y=r(1),m=r(8),b=r(32),S=r(26);function _(e){return n.i18n.translate("xpack.maps.source.emsTile.unableToFindTileIdErrorMessage",{defaultMessage:"Unable to find EMS tile configuration for id: {id}. {info}",values:{id:e,info:Object(p.a)()}})}function M(){return Object(m.i)().isEMSUrlSet()?n.i18n.translate("xpack.maps.source.emsOnPremTileTitle",{defaultMessage:"Elastic Maps Server Basemaps"}):n.i18n.translate("xpack.maps.source.emsTileTitle",{defaultMessage:"EMS Basemaps"})}class ems_tms_source_EMSTMSSource extends o.a{static createDescriptor(e){return{type:y.wb.EMS_TMS,id:e.id,isAutoSelect:void 0!==e.isAutoSelect&&e.isAutoSelect,lightModeDefault:void 0!==e.lightModeDefault?e.lightModeDefault:Object(m.k)().desaturated}}constructor(e,t){const r=ems_tms_source_EMSTMSSource.createDescriptor(e);super(r,t),a()(this,"_descriptor",void 0),this._descriptor=r}renderSourceSettingsEditor({onChange:e}){return Object(d.jsx)(g,{onChange:e,config:this._descriptor})}async getImmutableProperties(){const e=await this.getDisplayName(),t=n.i18n.translate("xpack.maps.source.emsTile.isAutoSelectLabel",{defaultMessage:"autoselect based on Kibana theme"}),r=[{label:Object(f.b)(),value:M()},{label:n.i18n.translate("xpack.maps.source.emsTile.serviceId",{defaultMessage:"Tile service"}),value:this._descriptor.isAutoSelect?`${e} - ${t}`:e}],i=Object(m.i)();return i.isEMSUrlSet()&&r.push({label:n.i18n.translate("xpack.maps.source.emsTile.emsOnPremLabel",{defaultMessage:"Elastic Maps Server"}),value:i.getEMSRoot()}),r}async _getEMSTMSService(){let e;const t=this.getTileLayerId();try{e=await Object(c.getEmsTmsServices)()}catch(e){throw new Error(`${_(t)} - ${e.message}`)}const r=e.find((e=>e.getId()===t));if(!r)throw new Error(_(t));return r}async getDisplayName(){try{return(await this._getEMSTMSService()).getDisplayName()}catch(e){return this.getTileLayerId()}}getAttributionProvider(){return async()=>(await this._getEMSTMSService()).getAttributions()}async getUrlTemplate(){const e=await this._getEMSTMSService();return await e.getUrlTemplate()}getSpriteNamespacePrefix(){return"ems/"+this.getTileLayerId()}async getVectorStyleSheetAndSpriteMeta(e){const t=await this._getEMSTMSService();return{vectorStyleSheet:await t.getVectorStyleSheet(),spriteMeta:await t.getSpriteSheetMeta(e)}}getTileLayerId(){return!this._descriptor.isAutoSelect&&this._descriptor.id?this._descriptor.id:Object(m.v)()?Object(m.k)().dark:this._descriptor.lightModeDefault}async getLicensedFeatures(){return Object(m.i)().isEMSUrlSet()?[S.a.ON_PREM_EMS]:[]}}Object(b.b)({ConstructorFunction:ems_tms_source_EMSTMSSource,type:y.wb.EMS_TMS});var v=r(194);class create_source_editor_CreateSourceEditor extends i.Component{constructor(...e){super(...e),a()(this,"state",{}),a()(this,"_onTileSelect",(e=>{this.setState({config:e}),this.props.onTileSelect(e)}))}componentDidMount(){this._onTileSelect({isAutoSelect:!0})}render(){return Object(d.jsx)(u.EuiPanel,null,Object(d.jsx)(tile_service_select_TileServiceSelect,{onTileSelect:this._onTileSelect,config:this.state.config}))}}var w=r(253);const E={id:y.Db.EMS_BASEMAP,order:10,categories:[y.ab.REFERENCE],checkVisibility:async()=>Object(m.i)().isIncludeElasticMapsService(),description:function(){const e=Object(m.i)();return n.i18n.translate("xpack.maps.source.emsTileSourceDescription",{defaultMessage:"Basemap service from {host}",values:{host:e.isEMSUrlSet()?e.getEMSRoot():"Elastic Maps Service"}})}(),disabledReason:n.i18n.translate("xpack.maps.source.emsTileDisabledReason",{defaultMessage:"Elastic Maps Server requires an Enterprise license"}),getIsDisabled:()=>{const e=Object(m.i)();return e.isEMSUrlSet()&&!e.hasOnPremLicense()},icon:w.a,renderWizard:({previewLayers:e})=>Object(d.jsx)(create_source_editor_CreateSourceEditor,{onTileSelect:t=>{const r=v.a.createDescriptor({sourceDescriptor:ems_tms_source_EMSTMSSource.createDescriptor(t)});e([r])}}),title:M()}},289:function(e,t,r){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function i(e,t){if(e===t)return 0;for(var r=e.length,i=t.length,n=0,s=Math.min(r,i);n<s;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0}function n(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var s=r(134),a=Object.prototype.hasOwnProperty,o=Array.prototype.slice,c="foo"===function(){}.name;function u(e){return Object.prototype.toString.call(e)}function l(e){return!n(e)&&"function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer)))}var p=e.exports=m,d=/\s*function\s+([^\(\s]*)\s*/;function h(e){if(s.isFunction(e)){if(c)return e.name;var t=e.toString().match(d);return t&&t[1]}}function g(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function f(e){if(c||!s.isFunction(e))return s.inspect(e);var t=h(e);return"[Function"+(t?": "+t:"")+"]"}function y(e,t,r,i,n){throw new p.AssertionError({message:r,actual:e,expected:t,operator:i,stackStartFunction:n})}function m(e,t){e||y(e,!0,t,"==",p.ok)}function b(e,t,r,a){if(e===t)return!0;if(n(e)&&n(t))return 0===i(e,t);if(s.isDate(e)&&s.isDate(t))return e.getTime()===t.getTime();if(s.isRegExp(e)&&s.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(l(e)&&l(t)&&u(e)===u(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===i(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(n(e)!==n(t))return!1;var c=(a=a||{actual:[],expected:[]}).actual.indexOf(e);return-1!==c&&c===a.expected.indexOf(t)||(a.actual.push(e),a.expected.push(t),function(e,t,r,i){if(null==e||null==t)return!1;if(s.isPrimitive(e)||s.isPrimitive(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var n=S(e),a=S(t);if(n&&!a||!n&&a)return!1;if(n)return b(e=o.call(e),t=o.call(t),r);var c,u,l=v(e),p=v(t);if(l.length!==p.length)return!1;for(l.sort(),p.sort(),u=l.length-1;u>=0;u--)if(l[u]!==p[u])return!1;for(u=l.length-1;u>=0;u--)if(!b(e[c=l[u]],t[c],r,i))return!1;return!0}(e,t,r,a))}return r?e===t:e==t}function S(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function _(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function M(e,t,r,i){var n;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(i=r,r=null),n=function(e){var t;try{e()}catch(e){t=e}return t}(t),i=(r&&r.name?" ("+r.name+").":".")+(i?" "+i:"."),e&&!n&&y(n,r,"Missing expected exception"+i);var a="string"==typeof i,o=!e&&n&&!r;if((!e&&s.isError(n)&&a&&_(n,r)||o)&&y(n,r,"Got unwanted exception"+i),e&&n&&r&&!_(n,r)||!e&&n)throw n}p.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=g(f(this.actual),128)+" "+this.operator+" "+g(f(this.expected),128),this.generatedMessage=!0);var t=e.stackStartFunction||y;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var i=r.stack,n=h(t),s=i.indexOf("\n"+n);if(s>=0){var a=i.indexOf("\n",s+1);i=i.substring(a+1)}this.stack=i}}},s.inherits(p.AssertionError,Error),p.fail=y,p.ok=m,p.equal=function(e,t,r){e!=t&&y(e,t,r,"==",p.equal)},p.notEqual=function(e,t,r){e==t&&y(e,t,r,"!=",p.notEqual)},p.deepEqual=function(e,t,r){b(e,t,!1)||y(e,t,r,"deepEqual",p.deepEqual)},p.deepStrictEqual=function(e,t,r){b(e,t,!0)||y(e,t,r,"deepStrictEqual",p.deepStrictEqual)},p.notDeepEqual=function(e,t,r){b(e,t,!1)&&y(e,t,r,"notDeepEqual",p.notDeepEqual)},p.notDeepStrictEqual=function e(t,r,i){b(t,r,!0)&&y(t,r,i,"notDeepStrictEqual",e)},p.strictEqual=function(e,t,r){e!==t&&y(e,t,r,"===",p.strictEqual)},p.notStrictEqual=function(e,t,r){e===t&&y(e,t,r,"!==",p.notStrictEqual)},p.throws=function(e,t,r){M(!0,e,t,r)},p.doesNotThrow=function(e,t,r){M(!1,e,t,r)},p.ifError=function(e){if(e)throw e};var v=Object.keys||function(e){var t=[];for(var r in e)a.call(e,r)&&t.push(r);return t}}).call(this,r(91))},290:function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},291:function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},77:function(e,t,r){"use strict";r.r(t),r.d(t,"getKibanaTileMap",(function(){return o})),r.d(t,"getEmsFileLayers",(function(){return c})),r.d(t,"getEmsTmsServices",(function(){return u})),r.d(t,"getGlyphUrl",(function(){return h})),r.d(t,"isRetina",(function(){return g})),r.d(t,"makePublicExecutionContext",(function(){return f}));var i=r(1),n=r(8),s=r(26),a=r(0);function o(){return Object(n.M)()}async function c(){return Object(n.i)().isEMSEnabled()?(await d()).getFileLayers():[]}async function u(){return Object(n.i)().isEMSEnabled()?(await d()).getTMSServices():[]}let l,p=null;async function d(){p||(p=new Promise((async(e,t)=>{try{e(await Object(n.y)().createEMSClient())}catch(e){t(e)}})));const e=await p,t=Object(s.c)();return l!==t&&(l=t,e.addQueryParams({license:t||""})),e}function h(){const e=Object(n.i)();return e.isEMSEnabled()?e.getEMSFontLibraryUrl():Object(n.o)().basePath.prepend(`/${i.F}/{fontstack}/{range}`)}function g(){return 2===window.devicePixelRatio}function f(e){const t=Object(n.l)().get(),r=function(e){return Object(a.omitBy)({name:i.e,type:"application",...e},a.isUndefined)}({url:window.location.pathname,description:e});return void 0!==t.name&&t.name!==r.name?{...t,child:r}:{...t,...r}}},91:function(e,t,r){e.exports=r(10)(158)},93:function(e,t,r){"use strict";r.d(t,"a",(function(){return DataRequest})),r.d(t,"b",(function(){return DataRequestAbortError}));var i=r(4),n=r.n(i);class DataRequest{constructor(e){n()(this,"_descriptor",void 0),this._descriptor={...e}}getData(){return this._descriptor.data}isLoading(){return!!this._descriptor.dataRequestToken}getMeta(){return this._descriptor.dataRequestMetaAtStart?this._descriptor.dataRequestMetaAtStart:this._descriptor.dataRequestMeta?this._descriptor.dataRequestMeta:{}}hasData(){return!!this._descriptor.data}hasDataOrRequestInProgress(){return this.hasData()||this.isLoading()}getDataId(){return this._descriptor.dataId}getRequestToken(){return this._descriptor.dataRequestToken}}class DataRequestAbortError extends Error{constructor(){super()}}}}]);