(window.controls_bundle_jsonpfunction=window.controls_bundle_jsonpfunction||[]).push([[2],{38:function(e,t,n){"use strict";var o,r=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function i(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function l(e,t){for(var n={},o=[],r=0;r<e.length;r++){var l=e[r],s=t.base?l[0]+t.base:l[0],c=n[s]||0,u="".concat(s," ").concat(c);n[s]=c+1;var d=i(u),p={css:l[1],media:l[2],sourceMap:l[3]};-1!==d?(a[d].references++,a[d].updater(p)):a.push({identifier:u,updater:f(p,t),references:1}),o.push(u)}return o}function s(e){var t=document.createElement("style"),o=e.attributes||{};if(void 0===o.nonce){var a=n.nc;a&&(o.nonce=a)}if(Object.keys(o).forEach((function(e){t.setAttribute(e,o[e])})),"function"==typeof e.insert)e.insert(t);else{var i=r(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function d(e,t,n,o){var r=n?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(e.styleSheet)e.styleSheet.cssText=u(t,r);else{var a=document.createTextNode(r),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(a,i[t]):e.appendChild(a)}}function p(e,t,n){var o=n.css,r=n.media,a=n.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}var g=null,m=0;function f(e,t){var n,o,r;if(t.singleton){var a=m++;n=g||(g=s(t)),o=d.bind(null,n,a,!1),r=d.bind(null,n,a,!0)}else n=s(t),o=p.bind(null,n,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o));var n=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var o=0;o<n.length;o++){var r=i(n[o]);a[r].references--}for(var s=l(e,t),c=0;c<n.length;c++){var u=i(n[c]);0===a[u].references&&(a[u].updater(),a.splice(u,1))}n=s}}}},39:function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,o,r,a=e[1]||"",i=e[3];if(!i)return a;if(t&&"function"==typeof btoa){var l=(n=i,o=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(r," */")),s=i.sources.map((function(e){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(e," */")}));return[a].concat(s).concat([l]).join("\n")}return[a].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,o){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(o)for(var a=0;a<this.length;a++){var i=this[a][0];null!=i&&(r[i]=!0)}for(var l=0;l<e.length;l++){var s=[].concat(e[l]);o&&r[s[0]]||(n&&(s[2]?s[2]="".concat(n," and ").concat(s[2]):s[2]=n),t.push(s))}},t}},44:function(e,t,n){"use strict";e.exports=n(73)},47:function(e,t,n){"use strict";e.exports=n(71)},48:function(e,t,n){"use strict";e.exports=n(72)},49:function(e,t,n){e.exports=n(24)(3)},66:function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(67);case"v8light":return n(69)}},67:function(e,t,n){var o=n(38),r=n(68);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);o(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},68:function(e,t,n){(t=n(39)(!1)).push([e.i,".controlGroup{min-height:64px}.controlsWrapper--twoLine .groupEditActions{padding-top:16px}.controlFrameCloneWrapper{width:max-content}.controlFrameCloneWrapper--small{width:224px}.controlFrameCloneWrapper--medium{width:400px}.controlFrameCloneWrapper--large{width:800px}.controlFrameCloneWrapper--twoLine{margin-top:-20px}.controlFrameCloneWrapper__label{cursor:grabbing !important}.controlFrameCloneWrapper .controlFrame__draggable{cursor:grabbing;height:40px;align-items:center;border-radius:6px;font-weight:600;background-color:#16171c;background-repeat:no-repeat;background-size:0% 100%;box-shadow:0 0 transparent,inset 0 0 0 1px rgba(255,255,255,0.1);transition:box-shadow 150ms ease-in,background-image 150ms ease-in,background-size 150ms ease-in,background-color 150ms ease-in;background-color:#2c2f37;min-width:224px;font-size:12px;font-size:.85714rem;line-height:1.14286rem}@supports (-moz-appearance: none){.controlFrameCloneWrapper .controlFrame__draggable{transition-property:box-shadow, background-image, background-size}}.controlFrameCloneWrapper .controlFrame__formControlLayout .controlFrame__dragHandle,.controlFrameCloneWrapper .controlFrame__draggable .controlFrame__dragHandle{cursor:grabbing}.controlFrame__labelToolTip{max-width:50%}.controlFrameWrapper{flex-basis:auto;position:relative}.controlFrameWrapper.controlFrameWrapper-isEditable .controlFrame__formControlLayoutLabel{padding-left:0}.controlFrameWrapper:not(.controlFrameWrapper-isEditable) .controlFrameFormControlLayout--twoLine .euiFormControlLayout__childrenWrapper{border-radius:6px 0 0 6px}.controlFrameWrapper .controlFrame__formControlLayout{width:100%;min-width:224px;transition:background-color .1s, color .1s}.controlFrameWrapper .controlFrame__formControlLayoutLabel{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important;border-radius:6px}.controlFrameWrapper .controlFrame__formControlLayout:not(.controlFrame__formControlLayout-clone) .controlFrame__dragHandle{cursor:grab}.controlFrameWrapper .controlFrame__formControlLayout .controlFrame__control{height:100%;transition:opacity .1s}.controlFrameWrapper .controlFrame__formControlLayout .controlFrame__control.controlFrame--twoLine{width:100%}.controlFrameWrapper .controlFrame__formControlLayout .controlFrame--controlLoading{height:100%;display:flex;align-items:center;justify-content:center}.controlFrameWrapper--small{width:224px}.controlFrameWrapper--medium{width:400px}.controlFrameWrapper--large{width:800px}.controlFrameWrapper--insertBefore .controlFrame__formControlLayout:after,.controlFrameWrapper--insertAfter .controlFrame__formControlLayout:after{content:'';position:absolute;background-color:rgba(54,162,239,0.5);border-radius:6px;top:0;bottom:0;width:2px}.controlFrameWrapper--insertBefore .controlFrame__formControlLayout:after{left:-5px}.controlFrameWrapper--insertAfter .controlFrame__formControlLayout:after{right:-5px}.controlFrameWrapper .controlFrameFloatingActions{visibility:hidden;opacity:0;transition:visibility .3s, opacity .3s;z-index:1;position:absolute}.controlFrameWrapper .controlFrameFloatingActions--oneLine{right:4px;top:-24px;padding:4px;border-radius:6px;background-color:#1D1E24;box-shadow:0 0 0 1px #343741}.controlFrameWrapper .controlFrameFloatingActions--twoLine{right:4px;top:-4px}.controlFrameWrapper:hover .controlFrameFloatingActions{transition:visibility .1s, opacity .1s;visibility:visible;opacity:1}.controlFrameWrapper-isDragging .euiFormRow__labelWrapper{opacity:0}.controlFrameWrapper-isDragging .controlFrame__formControlLayout{background-color:#264341;color:transparent !important;box-shadow:none}.controlFrameWrapper-isDragging .controlFrame__formControlLayout .euiFormLabel{opacity:0}.controlFrameWrapper-isDragging .controlFrame__formControlLayout .controlFrame__control{opacity:0}\n",""]),e.exports=t},69:function(e,t,n){var o=n(38),r=n(70);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);o(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},70:function(e,t,n){(t=n(39)(!1)).push([e.i,".controlGroup{min-height:64px}.controlsWrapper--twoLine .groupEditActions{padding-top:16px}.controlFrameCloneWrapper{width:max-content}.controlFrameCloneWrapper--small{width:224px}.controlFrameCloneWrapper--medium{width:400px}.controlFrameCloneWrapper--large{width:800px}.controlFrameCloneWrapper--twoLine{margin-top:-20px}.controlFrameCloneWrapper__label{cursor:grabbing !important}.controlFrameCloneWrapper .controlFrame__draggable{cursor:grabbing;height:40px;align-items:center;border-radius:6px;font-weight:600;background-color:#fbfcfd;background-repeat:no-repeat;background-size:0% 100%;box-shadow:0 0 transparent,inset 0 0 0 1px rgba(17,43,134,0.1);transition:box-shadow 150ms ease-in,background-image 150ms ease-in,background-size 150ms ease-in,background-color 150ms ease-in;background-color:#e9edf3;min-width:224px;font-size:12px;font-size:.85714rem;line-height:1.14286rem}@supports (-moz-appearance: none){.controlFrameCloneWrapper .controlFrame__draggable{transition-property:box-shadow, background-image, background-size}}.controlFrameCloneWrapper .controlFrame__formControlLayout .controlFrame__dragHandle,.controlFrameCloneWrapper .controlFrame__draggable .controlFrame__dragHandle{cursor:grabbing}.controlFrame__labelToolTip{max-width:50%}.controlFrameWrapper{flex-basis:auto;position:relative}.controlFrameWrapper.controlFrameWrapper-isEditable .controlFrame__formControlLayoutLabel{padding-left:0}.controlFrameWrapper:not(.controlFrameWrapper-isEditable) .controlFrameFormControlLayout--twoLine .euiFormControlLayout__childrenWrapper{border-radius:6px 0 0 6px}.controlFrameWrapper .controlFrame__formControlLayout{width:100%;min-width:224px;transition:background-color .1s, color .1s}.controlFrameWrapper .controlFrame__formControlLayoutLabel{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important;border-radius:6px}.controlFrameWrapper .controlFrame__formControlLayout:not(.controlFrame__formControlLayout-clone) .controlFrame__dragHandle{cursor:grab}.controlFrameWrapper .controlFrame__formControlLayout .controlFrame__control{height:100%;transition:opacity .1s}.controlFrameWrapper .controlFrame__formControlLayout .controlFrame__control.controlFrame--twoLine{width:100%}.controlFrameWrapper .controlFrame__formControlLayout .controlFrame--controlLoading{height:100%;display:flex;align-items:center;justify-content:center}.controlFrameWrapper--small{width:224px}.controlFrameWrapper--medium{width:400px}.controlFrameWrapper--large{width:800px}.controlFrameWrapper--insertBefore .controlFrame__formControlLayout:after,.controlFrameWrapper--insertAfter .controlFrame__formControlLayout:after{content:'';position:absolute;background-color:rgba(0,119,204,0.5);border-radius:6px;top:0;bottom:0;width:2px}.controlFrameWrapper--insertBefore .controlFrame__formControlLayout:after{left:-5px}.controlFrameWrapper--insertAfter .controlFrame__formControlLayout:after{right:-5px}.controlFrameWrapper .controlFrameFloatingActions{visibility:hidden;opacity:0;transition:visibility .3s, opacity .3s;z-index:1;position:absolute}.controlFrameWrapper .controlFrameFloatingActions--oneLine{right:4px;top:-24px;padding:4px;border-radius:6px;background-color:#fff;box-shadow:0 0 0 1px #D3DAE6}.controlFrameWrapper .controlFrameFloatingActions--twoLine{right:4px;top:-4px}.controlFrameWrapper:hover .controlFrameFloatingActions{transition:visibility .1s, opacity .1s;visibility:visible;opacity:1}.controlFrameWrapper-isDragging .euiFormRow__labelWrapper{opacity:0}.controlFrameWrapper-isDragging .controlFrame__formControlLayout{background-color:#e6f9f7;color:transparent !important;box-shadow:none}.controlFrameWrapper-isDragging .controlFrame__formControlLayout .euiFormLabel{opacity:0}.controlFrameWrapper-isDragging .controlFrame__formControlLayout .controlFrame__control{opacity:0}\n",""]),e.exports=t},71:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(4),a=(o=r)&&"object"==typeof o&&"default"in o?o.default:o,i=n(48),l=n(44);function s(e,t,n){const o=e.slice();return o.splice(n<0?o.length+n:n,0,o.splice(t,1)[0]),o}function c(e){return null!==e&&e>=0}const u={scaleX:1,scaleY:1},d=({layoutRects:e,activeIndex:t,overIndex:n,index:o})=>{const r=s(e,n,t),a=e[o],i=r[o];return i&&a?{x:i.offsetLeft-a.offsetLeft,y:i.offsetTop-a.offsetTop,scaleX:i.width/a.width,scaleY:i.height/a.height}:null},p={scaleX:1,scaleY:1},g=a.createContext({activeIndex:-1,containerId:"Sortable",disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:d,wasSorting:{current:!1}}),m=({isSorting:e,index:t,newIndex:n,transition:o})=>!(!o||!e&&n===t),f={duration:200,easing:"ease"},h=l.CSS.Transition.toString({property:"transform",duration:0,easing:"linear"}),b={roleDescription:"sortable"},v=[i.KeyboardCode.Down,i.KeyboardCode.Right,i.KeyboardCode.Up,i.KeyboardCode.Left];t.SortableContext=function({children:e,id:t,items:n,strategy:o=d}){const{active:s,overlayNode:c,droppableRects:u,over:p,recomputeLayouts:m,willRecomputeLayouts:f}=i.useDndContext(),h=l.useUniqueId("Sortable",t),b=Boolean(null!==c.rect),v=r.useMemo((()=>n.map((e=>"string"==typeof e?e:e.id))),[n]),y=s?v.indexOf(s.id):-1,x=-1!==y,C=r.useRef(x),j=p?v.indexOf(p.id):-1,w=r.useRef(v),O=function(e,t){return e.reduce(((e,n,o)=>{const r=t.get(n);return r&&(e[o]=r),e}),Array(e.length))}(v,u),F=(E=w.current,!(v.join()===E.join()));var E;const S=-1!==j&&-1===y||F;l.useIsomorphicLayoutEffect((()=>{F&&x&&!f&&m()}),[F,x,m,f]),r.useEffect((()=>{w.current=v}),[v]),r.useEffect((()=>{requestAnimationFrame((()=>{C.current=x}))}),[x]);const T=r.useMemo((()=>({activeIndex:y,containerId:h,disableTransforms:S,items:v,overIndex:j,useDragOverlay:b,sortedRects:O,strategy:o,wasSorting:C})),[y,h,S,v,j,O,b,o,C]);return a.createElement(g.Provider,{value:T},e)},t.arrayMove=s,t.defaultAnimateLayoutChanges=m,t.horizontalListSortingStrategy=({layoutRects:e,activeNodeRect:t,activeIndex:n,overIndex:o,index:r})=>{var a;const i=null!=(a=e[n])?a:t;if(!i)return null;const l=function(e,t,n){const o=e[t],r=e[t-1],a=e[t+1];return r||a?n<t?r?o.offsetLeft-(r.offsetLeft+r.width):a.offsetLeft-(o.offsetLeft+o.width):a?a.offsetLeft-(o.offsetLeft+o.width):o.offsetLeft-(r.offsetLeft+r.width):0}(e,r,n);if(r===n){const t=e[o];return t?{x:n<o?t.offsetLeft+t.width-(i.offsetLeft+i.width):t.offsetLeft-i.offsetLeft,y:0,...u}:null}return r>n&&r<=o?{x:-i.width-l,y:0,...u}:r<n&&r>=o?{x:i.width+l,y:0,...u}:{x:0,y:0,...u}},t.rectSortingStrategy=d,t.rectSwappingStrategy=({activeIndex:e,index:t,layoutRects:n,overIndex:o})=>{let r,a;return t===e&&(r=n[t],a=n[o]),t===o&&(r=n[t],a=n[e]),a&&r?{x:a.offsetLeft-r.offsetLeft,y:a.offsetTop-r.offsetTop,scaleX:a.width/r.width,scaleY:a.height/r.height}:null},t.sortableKeyboardCoordinates=(e,{context:{droppableContainers:t,translatedRect:n,scrollableAncestors:o}})=>{if(v.includes(e.code)){if(e.preventDefault(),!n)return;const a=[];Object.entries(t).forEach((([t,o])=>{if(null==o?void 0:o.disabled)return;const r=null==o?void 0:o.node.current;if(!r)return;const l=i.getViewRect(r);switch(e.code){case i.KeyboardCode.Down:n.top+n.height<=l.top&&a.push([t,l]);break;case i.KeyboardCode.Up:n.top>=l.top+l.height&&a.push([t,l]);break;case i.KeyboardCode.Left:n.left>=l.left+l.width&&a.push([t,l]);break;case i.KeyboardCode.Right:n.left+n.width<=l.left&&a.push([t,l])}}));const l=i.closestCorners(a,n);if(l){var r;const e=null==(r=t[l])?void 0:r.node.current;if(e){const t=i.getScrollableAncestors(e).some(((e,t)=>o[t]!==e)),r=i.getViewRect(e),a=t?{x:0,y:0}:{x:n.width-r.width,y:n.height-r.height};return{x:r.left-a.x,y:r.top-a.y}}}}},t.useSortable=function({animateLayoutChanges:e=m,attributes:t,disabled:n,data:o,id:a,strategy:u,transition:d=f}){const{items:p,containerId:v,activeIndex:y,disableTransforms:x,sortedRects:C,overIndex:j,useDragOverlay:w,strategy:O,wasSorting:F}=r.useContext(g),E=p.indexOf(a),S=r.useMemo((()=>({sortable:{containerId:v,index:E,items:p},...o})),[v,o,E,p]),{rect:T,node:L,setNodeRef:D}=i.useDroppable({id:a,data:S}),{active:R,activeNodeRect:I,activatorEvent:_,attributes:W,setNodeRef:M,listeners:N,isDragging:A,over:k,transform:B}=i.useDraggable({id:a,data:S,attributes:{...b,...t},disabled:n}),P=l.useCombinedRefs(D,M),z=Boolean(R),K=z&&F.current&&!x&&c(y)&&c(j),H=!w&&A,V=H&&K?B:null,$=K?null!=V?V:(null!=u?u:O)({layoutRects:C,activeNodeRect:I,activeIndex:y,overIndex:j,index:E}):null,U=c(y)&&c(j)?s(p,y,j).indexOf(a):E,q=r.useRef(U),G=e({active:R,isDragging:A,isSorting:z,id:a,index:E,items:p,newIndex:q.current,transition:d,wasSorting:F.current}),Y=function({rect:e,disabled:t,index:n,node:o}){const[a,l]=r.useState(null),s=r.useRef(n);return r.useEffect((()=>{if(!t&&n!==s.current&&o.current){const t=e.current;if(t){const e=i.getBoundingClientRect(o.current),n={x:t.offsetLeft-e.offsetLeft,y:t.offsetTop-e.offsetTop,scaleX:t.width/e.width,scaleY:t.height/e.height};(n.x||n.y)&&l(n)}}n!==s.current&&(s.current=n)}),[t,n,o,e]),r.useEffect((()=>{a&&requestAnimationFrame((()=>{l(null)}))}),[a]),a}({disabled:!G,index:E,node:L,rect:T});return r.useEffect((()=>{z&&(q.current=U)}),[z,U]),{active:R,attributes:W,activatorEvent:_,rect:T,index:E,isSorting:z,isDragging:A,listeners:N,node:L,overIndex:j,over:k,setNodeRef:P,setDroppableNodeRef:D,setDraggableNodeRef:M,transform:null!=Y?Y:$,transition:Y?h:H||!d?null:z||G?l.CSS.Transition.toString({...d,property:"transform"}):null}},t.verticalListSortingStrategy=({activeIndex:e,activeNodeRect:t,index:n,layoutRects:o,overIndex:r})=>{var a;const i=null!=(a=o[e])?a:t;if(!i)return null;if(n===e){const t=o[r];return t?{x:0,y:e<r?t.offsetTop+t.height-(i.offsetTop+i.height):t.offsetTop-i.offsetTop,...p}:null}const l=function(e,t,n){const o=e[t],r=e[t-1],a=e[t+1];return o?n<t?r?o.offsetTop-(r.offsetTop+r.height):a?a.offsetTop-(o.offsetTop+o.height):0:a?a.offsetTop-(o.offsetTop+o.height):r?o.offsetTop-(r.offsetTop+r.height):0:0}(o,n,e);return n>e&&n<=r?{x:0,y:-i.height-l,...p}:n<e&&n>=r?{x:0,y:i.height+l,...p}:{x:0,y:0,...p}}},72:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(4),a=(o=r)&&"object"==typeof o&&"default"in o?o.default:o,i=n(31),l=n(44),s=n(74);const c={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},u={onDragStart:e=>`Picked up draggable item ${e}.`,onDragOver:(e,t)=>t?`Draggable item ${e} was moved over droppable area ${t}.`:`Draggable item ${e} is no longer over a droppable area.`,onDragEnd:(e,t)=>t?`Draggable item ${e} was dropped over droppable area ${t}`:`Draggable item ${e} was dropped.`,onDragCancel:e=>`Dragging was cancelled. Draggable item ${e} was dropped.`};var d;!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(d||(d={}));const p=e=>g(e,((e,t)=>e<t));function g(e,t){if(0===e.length)return-1;let n=e[0],o=0;for(var r=1;r<e.length;r++)t(e[r],n)&&(o=r,n=e[r]);return o}function m(...e){}function f(e,t){const{[e]:n,...o}=t;return o}const h=r.createContext({activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,activeNodeClientRect:null,activators:[],ariaDescribedById:{draggable:""},containerNodeRect:null,dispatch:m,draggableNodes:{},droppableRects:new Map,droppableContainers:{},over:null,overlayNode:{nodeRef:{current:null},rect:null,setRef:m},scrollableAncestors:[],scrollableAncestorRects:[],recomputeLayouts:m,windowRect:null,willRecomputeLayouts:!1}),b=Object.freeze({x:0,y:0});function v(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function y(e){if(function(e){var t;return(null==(t=window)?void 0:t.TouchEvent)&&e instanceof TouchEvent}(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return function(e){var t;return(null==(t=window)?void 0:t.MouseEvent)&&e instanceof MouseEvent||e.type.includes("mouse")}(e)?{x:e.clientX,y:e.clientY}:{x:0,y:0}}function x(e,t){if(e instanceof KeyboardEvent)return"0 0";const n=y(e);return`${(n.x-t.left)/t.width*100}% ${(n.y-t.top)/t.height*100}%`}function C(e,t=e.offsetLeft,n=e.offsetTop){return{x:t+.5*e.width,y:n+.5*e.height}}const j=function(e,...t){return t.reduce(((e,t)=>({...e,top:e.top+1*t.y,bottom:e.bottom+1*t.y,left:e.left+1*t.x,right:e.right+1*t.x,offsetLeft:e.offsetLeft+1*t.x,offsetTop:e.offsetTop+1*t.y})),{...e})};function w(e){const t=[];return e?function e(n){return n?n instanceof Document&&null!=n.scrollingElement?(t.push(n.scrollingElement),t):!(n instanceof HTMLElement)||n instanceof SVGElement?t:(function(e){const t=window.getComputedStyle(e),n=/(auto|scroll|overlay)/;return null!=["overflow","overflowX","overflowY"].find((e=>{const o=t[e];return"string"==typeof o&&n.test(o)}))}(n)&&t.push(n),e(n.parentNode)):t}(e.parentNode):t}function O(e){return l.canUseDOM?e===document.scrollingElement||e instanceof Document?window:e instanceof HTMLElement?e:null:null}function F(e){return e instanceof Window?{x:e.scrollX,y:e.scrollY}:{x:e.scrollLeft,y:e.scrollTop}}var E;function S(e){const t={x:0,y:0},n={x:e.scrollWidth-e.clientWidth,y:e.scrollHeight-e.clientHeight};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=n.y,isRight:e.scrollLeft>=n.x,maxScroll:n,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(E||(E={}));const T={x:.2,y:.2};function L(e,t,{top:n,left:o,right:r,bottom:a},i=10,s=T){const{clientHeight:c,clientWidth:u}=e,d=(p=e,l.canUseDOM&&p&&p===document.scrollingElement?{top:0,left:0,right:u,bottom:c,width:u,height:c}:t);var p;const{isTop:g,isBottom:m,isLeft:f,isRight:h}=S(e),b={x:0,y:0},v={x:0,y:0},y=d.height*s.y,x=d.width*s.x;return!g&&n<=d.top+y?(b.y=E.Backward,v.y=i*Math.abs((d.top+y-n)/y)):!m&&a>=d.bottom-y&&(b.y=E.Forward,v.y=i*Math.abs((d.bottom-y-a)/y)),!h&&r>=d.right-x?(b.x=E.Forward,v.x=i*Math.abs((d.right-x-r)/x)):!f&&o<=d.left+x&&(b.x=E.Backward,v.x=i*Math.abs((d.left+x-o)/x)),{direction:b,speed:v}}function D(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:n,right:o,bottom:r}=e.getBoundingClientRect();return{top:t,left:n,right:o,bottom:r,width:e.clientWidth,height:e.clientHeight}}function R(e){return e.reduce(((e,t)=>l.add(e,F(t))),b)}function I(e){const{offsetWidth:t,offsetHeight:n}=e,{x:o,y:r}=function e(t,n,o=b){if(!(t&&t instanceof HTMLElement))return o;const r={x:o.x+t.offsetLeft,y:o.y+t.offsetTop};return t.offsetParent===n?r:e(t.offsetParent,n,r)}(e,null);return{width:t,height:n,offsetTop:r,offsetLeft:o}}function _(e){if(e instanceof Window){const e=window.innerWidth,t=window.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t,offsetTop:0,offsetLeft:0}}const{offsetTop:t,offsetLeft:n}=I(e),{width:o,height:r,top:a,bottom:i,left:l,right:s}=e.getBoundingClientRect();return{width:o,height:r,top:a,bottom:i,right:s,left:l,offsetTop:t,offsetLeft:n}}function W(e){const{width:t,height:n,offsetTop:o,offsetLeft:r}=I(e),a=R(w(e)),i=o-a.y,l=r-a.x;return{width:t,height:n,top:i,bottom:i+n,right:l+t,left:l,offsetTop:o,offsetLeft:r}}function M(e){return"top"in e}function N(e,t=e.offsetLeft,n=e.offsetTop){return[{x:t,y:n},{x:t+e.width,y:n},{x:t,y:n+e.height},{x:t+e.width,y:n+e.height}]}const A=(e,t)=>{const n=e.map((([e,n])=>function(e,t){const n=Math.max(t.top,e.offsetTop),o=Math.max(t.left,e.offsetLeft),r=Math.min(t.left+t.width,e.offsetLeft+e.width),a=Math.min(t.top+t.height,e.offsetTop+e.height);if(o<r&&n<a){const i=(r-o)*(a-n);return Number((i/(t.width*t.height+e.width*e.height-i)).toFixed(4))}return 0}(n,t))),o=g(n,((e,t)=>e>t));return n[o]<=0?null:e[o]?e[o][0]:null};function k(e){return e instanceof HTMLElement?e.ownerDocument:document}function B(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:{},translate:{x:0,y:0}},droppable:{containers:{}}}}function P(e,t){switch(t.type){case d.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case d.DragMove:return e.draggable.active?{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}}:e;case d.DragEnd:case d.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case d.RegisterDroppable:{const{element:n}=t,{id:o}=n;return{...e,droppable:{...e.droppable,containers:{...e.droppable.containers,[o]:n}}}}case d.SetDroppableDisabled:{const{id:n,disabled:o}=t,r=e.droppable.containers[n];return r?{...e,droppable:{...e.droppable,containers:{...e.droppable.containers,[n]:{...r,disabled:o}}}}:e}case d.UnregisterDroppable:{const{id:n}=t;return{...e,droppable:{...e.droppable,containers:f(n,e.droppable.containers)}}}default:return e}}const z=r.createContext({type:null,event:null});function K({onDragStart:e,onDragMove:t,onDragOver:n,onDragEnd:o,onDragCancel:a}){const i=r.useContext(z),l=r.useRef(i);r.useEffect((()=>{if(i!==l.current){const{type:r,event:s}=i;switch(r){case d.DragStart:null==e||e(s);break;case d.DragMove:null==t||t(s);break;case d.DragOver:null==n||n(s);break;case d.DragCancel:null==a||a(s);break;case d.DragEnd:null==o||o(s)}l.current=i}}),[i,e,t,n,o,a])}function H({announcements:e=u,hiddenTextDescribedById:t,screenReaderInstructions:n}){const{announce:o,announcement:c}=s.useAnnouncement(),d=l.useUniqueId("DndLiveRegion"),[p,g]=r.useState(!1);return r.useEffect((()=>{g(!0)}),[]),K(r.useMemo((()=>({onDragStart({active:t}){o(e.onDragStart(t.id))},onDragMove({active:t,over:n}){e.onDragMove&&o(e.onDragMove(t.id,null==n?void 0:n.id))},onDragOver({active:t,over:n}){o(e.onDragOver(t.id,null==n?void 0:n.id))},onDragEnd({active:t,over:n}){o(e.onDragEnd(t.id,null==n?void 0:n.id))},onDragCancel({active:t}){o(e.onDragCancel(t.id))}})),[o,e])),p?i.createPortal(a.createElement(a.Fragment,null,a.createElement(s.HiddenText,{id:t,value:n.draggable}),a.createElement(s.LiveRegion,{id:d,announcement:c})),document.body):null}var V,$,U;function q(e){const t=r.useRef(e);return l.useIsomorphicLayoutEffect((()=>{t.current!==e&&(t.current=e)}),[e]),t}(V=t.AutoScrollActivator||(t.AutoScrollActivator={}))[V.Pointer=0]="Pointer",V[V.DraggableRect=1]="DraggableRect",($=t.TraversalOrder||(t.TraversalOrder={}))[$.TreeOrder=0]="TreeOrder",$[$.ReversedTreeOrder=1]="ReversedTreeOrder",(U=t.LayoutMeasuringStrategy||(t.LayoutMeasuringStrategy={}))[U.Always=0]="Always",U[U.BeforeDragging=1]="BeforeDragging",U[U.WhileDragging=2]="WhileDragging",(t.LayoutMeasuringFrequency||(t.LayoutMeasuringFrequency={})).Optimized="optimized";const G=new Map,Y={strategy:t.LayoutMeasuringStrategy.WhileDragging,frequency:t.LayoutMeasuringFrequency.Optimized},X=[],Q=te(_),J=function(e){const t=[];return function(n,o){const a=r.useRef(n);return l.useLazyMemo((r=>n.length?o||!r&&n.length||n!==a.current?n.map((t=>e(t))):null!=r?r:t:t),[n,o])}}(_),Z=te(W);function te(e){return function(t,n){const o=r.useRef(t);return l.useLazyMemo((r=>t?n||!r&&t||t!==o.current?t instanceof HTMLElement&&null==t.parentNode?null:e(t):null!=r?r:null:null),[t,n])}}class ee{constructor(e){this.target=e,this.listeners=[]}add(e,t,n){this.target.addEventListener(e,t,n),this.listeners.push({eventName:e,handler:t})}removeAll(){this.listeners.forEach((({eventName:e,handler:t})=>this.target.removeEventListener(e,t)))}}function ne(e,t){const n=Math.abs(e.x),o=Math.abs(e.y);return"number"==typeof t?Math.sqrt(n**2+o**2)>t:"x"in t&&"y"in t?n>t.x&&o>t.y:"x"in t?n>t.x:"y"in t&&o>t.y}var oe;(oe=t.KeyboardCode||(t.KeyboardCode={})).Space="Space",oe.Down="ArrowDown",oe.Right="ArrowRight",oe.Left="ArrowLeft",oe.Up="ArrowUp",oe.Esc="Escape",oe.Enter="Enter";const re={start:[t.KeyboardCode.Space,t.KeyboardCode.Enter],cancel:[t.KeyboardCode.Esc],end:[t.KeyboardCode.Space,t.KeyboardCode.Enter]},ie=(e,{currentCoordinates:n})=>{switch(e.code){case t.KeyboardCode.Right:return{...n,x:n.x+25};case t.KeyboardCode.Left:return{...n,x:n.x-25};case t.KeyboardCode.Down:return{...n,y:n.y+25};case t.KeyboardCode.Up:return{...n,y:n.y-25}}};class ae{constructor(e){this.props=e,this.autoScrollEnabled=!1,this.coordinates=b;const{event:{target:t}}=e;this.props=e,this.listeners=new ee(k(t)),this.windowListeners=new ee(function(e){var t;return null!=(t=k(e).defaultView)?t:window}(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),setTimeout((()=>{this.listeners.add("keydown",this.handleKeyDown),this.windowListeners.add("resize",this.handleCancel)}))}handleStart(){const{activeNode:e,onStart:t}=this.props;if(!e.node.current)throw new Error("Active draggable node is undefined");const n=_(e.node.current),o={x:n.left,y:n.top};this.coordinates=o,t(o)}handleKeyDown(e){if(e instanceof KeyboardEvent){const{coordinates:n}=this,{active:o,context:r,options:a}=this.props,{keyboardCodes:i=re,coordinateGetter:s=ie,scrollBehavior:c="smooth"}=a,{code:u}=e;if(i.end.includes(u))return void this.handleEnd(e);if(i.cancel.includes(u))return void this.handleCancel(e);const d=s(e,{active:o,context:r.current,currentCoordinates:n});if(d){const o={x:0,y:0},{scrollableAncestors:a}=r.current;for(const r of a){const a=e.code,i=l.subtract(d,n),{isTop:s,isRight:u,isLeft:p,isBottom:g,maxScroll:m,minScroll:f}=S(r),h=D(r),b={x:Math.min(a===t.KeyboardCode.Right?h.right-h.width/2:h.right,Math.max(a===t.KeyboardCode.Right?h.left:h.left+h.width/2,d.x)),y:Math.min(a===t.KeyboardCode.Down?h.bottom-h.height/2:h.bottom,Math.max(a===t.KeyboardCode.Down?h.top:h.top+h.height/2,d.y))},v=a===t.KeyboardCode.Right&&!u||a===t.KeyboardCode.Left&&!p,y=a===t.KeyboardCode.Down&&!g||a===t.KeyboardCode.Up&&!s;if(v&&b.x!==d.x){if(a===t.KeyboardCode.Right&&r.scrollLeft+i.x<=m.x||a===t.KeyboardCode.Left&&r.scrollLeft+i.x>=f.x)return void r.scrollBy({left:i.x,behavior:c});o.x=a===t.KeyboardCode.Right?r.scrollLeft-m.x:r.scrollLeft-f.x,r.scrollBy({left:-o.x,behavior:c});break}if(y&&b.y!==d.y){if(a===t.KeyboardCode.Down&&r.scrollTop+i.y<=m.y||a===t.KeyboardCode.Up&&r.scrollTop+i.y>=f.y)return void r.scrollBy({top:i.y,behavior:c});o.y=a===t.KeyboardCode.Down?r.scrollTop-m.y:r.scrollTop-f.y,r.scrollBy({top:-o.y,behavior:c});break}}this.handleMove(e,l.add(d,o))}}}handleMove(e,t){const{onMove:n}=this.props;e.preventDefault(),n(t),this.coordinates=t}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function le(e){return Boolean(e&&"distance"in e)}function se(e){return Boolean(e&&"delay"in e)}var ue;ae.activators=[{eventName:"onKeyDown",handler:(e,{keyboardCodes:t=re,onActivation:n})=>{const{code:o}=e.nativeEvent;return!!t.start.includes(o)&&(e.preventDefault(),null==n||n({event:e.nativeEvent}),!0)}}],function(e){e.Keydown="keydown"}(ue||(ue={}));class ce{constructor(e,t,n=function(e){return e instanceof EventTarget?e:k(e)}(e.event.target)){this.props=e,this.events=t,this.autoScrollEnabled=!0,this.activated=!1,this.timeoutId=null;const{event:o}=e;this.props=e,this.events=t,this.ownerDocument=k(o.target),this.listeners=new ee(n),this.initialCoordinates=y(o),this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t}}}=this;if(this.listeners.add(e.move.name,this.handleMove,!1),this.listeners.add(e.end.name,this.handleEnd),this.ownerDocument.addEventListener(ue.Keydown,this.handleKeydown),t){if(le(t))return;if(se(t))return void(this.timeoutId=setTimeout(this.handleStart,t.delay))}this.handleStart()}detach(){this.listeners.removeAll(),this.ownerDocument.removeEventListener(ue.Keydown,this.handleKeydown),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,t(e))}handleMove(e){const{activated:t,initialCoordinates:n,props:o}=this,{onMove:r,options:{activationConstraint:a}}=o;if(!n)return;const i=y(e),s=l.subtract(n,i);if(!t&&a){if(se(a))return ne(s,a.tolerance)?this.handleCancel():void 0;if(le(a))return ne(s,a.distance)?this.handleStart():void 0}e.cancelable&&e.preventDefault(),r(i)}handleEnd(){const{onEnd:e}=this.props;this.detach(),e()}handleCancel(){const{onCancel:e}=this.props;this.detach(),e()}handleKeydown(e){e.code===t.KeyboardCode.Esc&&this.handleCancel()}}const pe={move:{name:"pointermove"},end:{name:"pointerup"}};class de extends ce{constructor(e){const{event:t}=e,n=k(t.target);super(e,pe,n)}}de.activators=[{eventName:"onPointerDown",handler:({nativeEvent:e},{onActivation:t})=>!(!e.isPrimary||0!==e.button||(null==t||t({event:e}),0))}];const ge={move:{name:"mousemove"},end:{name:"mouseup"}};var me;!function(e){e[e.RightClick=2]="RightClick"}(me||(me={}));class he extends ce{constructor(e){super(e,ge,k(e.event.target))}}he.activators=[{eventName:"onMouseDown",handler:({nativeEvent:e},{onActivation:t})=>e.button!==me.RightClick&&(null==t||t({event:e}),!0)}];const fe={move:{name:"touchmove"},end:{name:"touchend"}};class ve extends ce{constructor(e){super(e,fe)}}function be(e,{transform:t,...n}){return(null==e?void 0:e.length)?e.reduce(((e,t)=>t({transform:e,...n})),t):t}ve.activators=[{eventName:"onTouchStart",handler:({nativeEvent:e},{onActivation:t})=>{const{touches:n}=e;return!(n.length>1||(null==t||t({event:e}),0))}}];const ye=[{sensor:de,options:{}},{sensor:ae,options:{}}],xe={current:{}},Ce=r.createContext({...b,scaleX:1,scaleY:1}),je=r.memo((function({id:e,autoScroll:n=!0,announcements:o,children:i,sensors:s=ye,collisionDetection:u=A,layoutMeasuring:p,modifiers:g,screenReaderInstructions:m=c,...f}){var v,x,C;const E=r.useReducer(P,void 0,B),[S,T]=E,[D,_]=r.useState((()=>({type:null,event:null}))),{draggable:{active:W,nodes:M,translate:N},droppable:{containers:k}}=S,K=W?M[W]:null,V=r.useRef({initial:null,translated:null}),$=r.useMemo((()=>{var e;return null!=W?{id:W,data:null!=(e=null==K?void 0:K.data)?e:xe,rect:V}:null}),[W,K]),U=r.useRef(null),[q,te]=r.useState(null),[ne,oe]=r.useState(null),re=r.useRef(f),ie=l.useUniqueId("DndDescribedBy",e),{layoutRectMap:le,recomputeLayouts:se,willRecomputeLayouts:ue}=function(e,{dragging:n,dependencies:o,config:a}){const[i,s]=r.useState(!1),{frequency:c,strategy:u}=(d=a)?{...Y,...d}:Y;var d;const p=r.useRef(e),g=r.useCallback((()=>s(!0)),[]),m=r.useRef(null),f=function(){switch(u){case t.LayoutMeasuringStrategy.Always:return!1;case t.LayoutMeasuringStrategy.BeforeDragging:return n;default:return!n}}(),h=l.useLazyMemo((t=>{if(f&&!n)return G;if(!t||t===G||p.current!==e||i){for(let t of Object.values(e))t&&(t.rect.current=t.node.current?I(t.node.current):null);return function(e){const t=new Map;if(e)for(const n of Object.values(e)){if(!n)continue;const{id:e,rect:o,disabled:r}=n;r||null==o.current||t.set(e,o.current)}return t}(e)}return t}),[e,n,f,i]);return r.useEffect((()=>{p.current=e}),[e]),r.useEffect((()=>{i&&s(!1)}),[i]),r.useEffect((function(){f||requestAnimationFrame(g)}),[n,f]),r.useEffect((function(){f||"number"!=typeof c||null!==m.current||(m.current=setTimeout((()=>{g(),m.current=null}),c))}),[c,f,g,...o]),{layoutRectMap:h,recomputeLayouts:g,willRecomputeLayouts:i}}(k,{dragging:null!=W,dependencies:[N.x,N.y],config:p}),pe=function(e,t){const n=null!==t?e[t]:void 0,o=n?n.node.current:null;return l.useLazyMemo((e=>{var n;return null===t?null:null!=(n=null!=o?o:e)?n:null}),[o,t])}(M,W),ge=ne?y(ne):null,me=Z(pe),fe=Q(pe),je=r.useRef(null),we=(Fe=je.current,(Oe=me)&&Fe?{x:Oe.left-Fe.left,y:Oe.top-Fe.top}:b);var Oe,Fe;const Ee=r.useRef({active:null,activeNode:pe,collisionRect:null,droppableRects:le,draggableNodes:M,draggingNodeRect:null,droppableContainers:k,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null,translatedRect:null}),Se=function(e,t){var n,o;return e&&null!=(n=null==(o=t[e])?void 0:o.node.current)?n:null}(null!=(v=null==(x=Ee.current.over)?void 0:x.id)?v:null,k),Te=Q(pe?pe.ownerDocument.defaultView:null),Le=Q(pe?pe.parentElement:null),De=function(e){const t=r.useRef(e),n=l.useLazyMemo((n=>e?n&&e&&t.current&&e.parentNode===t.current.parentNode?n:w(e):X),[e]);return r.useEffect((()=>{t.current=e}),[e]),n}(W?null!=Se?Se:pe:null),Re=J(De),[Ie,_e]=l.useNodeRef(),We=Q(W?Ie.current:null,ue),Me=null!=We?We:fe,Ne=be(g,{transform:{x:N.x-we.x,y:N.y-we.y,scaleX:1,scaleY:1},active:$,over:Ee.current.over,activeNodeRect:fe,draggingNodeRect:Me,containerNodeRect:Le,overlayNodeRect:We,scrollableAncestors:De,scrollableAncestorRects:Re,windowRect:Te}),Ae=ge?l.add(ge,N):null,ke=function(e){const[t,n]=r.useState(null),o=r.useRef(e),a=r.useCallback((e=>{const t=O(e.target);t&&n((e=>e?(e.set(t,F(t)),new Map(e)):null))}),[]);return r.useEffect((()=>{const t=o.current;if(e!==t){r(t);const i=e.map((e=>{const t=O(e);return t?(t.addEventListener("scroll",a,{passive:!0}),[t,F(t)]):null})).filter((e=>null!=e));n(i.length?new Map(i):null),o.current=e}return()=>{r(e),r(t)};function r(e){e.forEach((e=>{const t=O(e);null==t||t.removeEventListener("scroll",a)}))}}),[a,e]),r.useMemo((()=>e.length?t?Array.from(t.values()).reduce(((e,t)=>l.add(e,t)),b):R(e):b),[e,t])}(De),Be=l.add(Ne,ke),Pe=me?j(me,Ne):null,ze=Pe?j(Pe,ke):null,Ke=function(e,t){var n;return e&&null!=(n=t[e])?n:null}($&&ze?u(Array.from(le.entries()),ze):null,k),He=r.useMemo((()=>Ke&&Ke.rect.current?{id:Ke.id,rect:Ke.rect.current,data:Ke.data,disabled:Ke.disabled}:null),[Ke]),Ve=function(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}(Ne,null!=(C=null==Ke?void 0:Ke.rect.current)?C:null,me),$e=r.useCallback(((e,{sensor:t,options:n})=>{if(!U.current)return;const o=M[U.current];if(!o)return;const r=new t({active:U.current,activeNode:o,event:e.nativeEvent,options:n,context:Ee,onStart(e){const t=U.current;if(!t)return;const n=M[t];if(!n)return;const{onDragStart:o}=re.current,r={active:{id:t,data:n.data,rect:V}};T({type:d.DragStart,initialCoordinates:e,active:t}),_({type:d.DragStart,event:r}),null==o||o(r)},onMove(e){T({type:d.DragMove,coordinates:e})},onEnd:a(d.DragEnd),onCancel:a(d.DragCancel)});function a(e){return async function(){const{active:t,over:n,scrollAdjustedTranslate:o}=Ee.current;let r=null;if(t&&o){const{cancelDrop:a}=re.current;r={active:t,delta:o,over:n},e===d.DragEnd&&"function"==typeof a&&await Promise.resolve(a(r))&&(e=d.DragCancel)}if(U.current=null,T({type:e}),te(null),oe(null),r){const{onDragCancel:t,onDragEnd:n}=re.current,o=e===d.DragEnd?n:t;_({type:e,event:r}),null==o||o(r)}}}te(r),oe(e.nativeEvent)}),[T,M]),Ue=function(e,t){return r.useMemo((()=>e.reduce(((e,n)=>{const{sensor:o}=n;return[...e,...o.activators.map((e=>({eventName:e.eventName,handler:t(e.handler,n)})))]}),[])),[e,t])}(s,r.useCallback(((e,t)=>(n,o)=>{const r=n.nativeEvent;null!==U.current||r.dndKit||r.defaultPrevented||!0===e(n,t.options)&&(r.dndKit={capturedBy:t.sensor},U.current=o,$e(n,t))}),[$e]));l.useIsomorphicLayoutEffect((()=>{re.current=f}),Object.values(f)),r.useEffect((()=>{$||(je.current=null),$&&me&&!je.current&&(je.current=me)}),[me,$]),r.useEffect((()=>{const{onDragMove:e}=re.current,{active:t,over:n}=Ee.current;if(!t)return;const o={active:t,delta:{x:Be.x,y:Be.y},over:n};_({type:d.DragMove,event:o}),null==e||e(o)}),[Be.x,Be.y]),r.useEffect((()=>{const{active:e,scrollAdjustedTranslate:t}=Ee.current;if(!e||!U.current||!t)return;const{onDragOver:n}=re.current,o={active:e,delta:{x:t.x,y:t.y},over:He};_({type:d.DragOver,event:o}),null==n||n(o)}),[null==He?void 0:He.id]),l.useIsomorphicLayoutEffect((()=>{Ee.current={active:$,activeNode:pe,collisionRect:ze,droppableRects:le,draggableNodes:M,draggingNodeRect:Me,droppableContainers:k,over:He,scrollableAncestors:De,scrollAdjustedTranslate:Be,translatedRect:Pe},V.current={initial:Me,translated:Pe}}),[$,pe,ze,M,Me,le,k,He,De,Be,Pe]),function({acceleration:e,activator:n=t.AutoScrollActivator.Pointer,canScroll:o,draggingRect:a,enabled:i,interval:s=5,order:c=t.TraversalOrder.TreeOrder,pointerCoordinates:u,scrollableAncestors:d,scrollableAncestorRects:p,threshold:g}){const[m,f]=l.useInterval(),h=r.useRef({x:1,y:1}),v=r.useMemo((()=>{switch(n){case t.AutoScrollActivator.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case t.AutoScrollActivator.DraggableRect:return a}return null}),[n,a,u]),y=r.useRef(b),x=r.useRef(null),C=r.useCallback((()=>{const e=x.current;e&&e.scrollBy(h.current.x*y.current.x,h.current.y*y.current.y)}),[]),j=r.useMemo((()=>c===t.TraversalOrder.TreeOrder?[...d].reverse():d),[c,d]);r.useEffect((()=>{if(i&&d.length&&v){for(const t of j){if(!1===(null==o?void 0:o(t)))continue;const n=d.indexOf(t),r=p[n];if(!r)continue;const{direction:a,speed:i}=L(t,r,v,e,g);if(i.x>0||i.y>0)return f(),x.current=t,m(C,s),h.current=i,void(y.current=a)}h.current={x:0,y:0},y.current={x:0,y:0},f()}else f()}),[e,C,o,f,i,s,JSON.stringify(v),m,d,j,p,JSON.stringify(g)])}({...function(){const e=!(!1===(null==q?void 0:q.autoScrollEnabled)||("object"==typeof n?!1===n.enabled:!1===n));return"object"==typeof n?{...n,enabled:e}:{enabled:e}}(),draggingRect:Pe,pointerCoordinates:Ae,scrollableAncestors:De,scrollableAncestorRects:Re});const qe=r.useMemo((()=>({active:$,activeNode:pe,activeNodeRect:me,activeNodeClientRect:fe,activatorEvent:ne,activators:Ue,ariaDescribedById:{draggable:ie},overlayNode:{nodeRef:Ie,rect:We,setRef:_e},containerNodeRect:Le,dispatch:T,draggableNodes:M,droppableContainers:k,droppableRects:le,over:He,recomputeLayouts:se,scrollableAncestors:De,scrollableAncestorRects:Re,willRecomputeLayouts:ue,windowRect:Te})),[$,pe,fe,me,ne,Ue,Le,We,Ie,T,M,ie,k,le,He,se,De,Re,_e,ue,Te]);return a.createElement(z.Provider,{value:D},a.createElement(h.Provider,{value:qe},a.createElement(Ce.Provider,{value:Ve},i)),a.createElement(H,{announcements:o,hiddenTextDescribedById:ie,screenReaderInstructions:m}))})),we=r.createContext(null),Oe="button";function Fe(){return r.useContext(h)}const Ee=e=>e instanceof KeyboardEvent?"transform 250ms ease":void 0,Se={duration:250,easing:"ease",dragSourceOpacity:0},Te=a.memo((({adjustScale:e=!1,children:t,dropAnimation:n=Se,style:o,transition:i=Ee,modifiers:s,wrapperElement:c="div",className:u,zIndex:d=999})=>{var p,g;const{active:m,activeNodeRect:f,activeNodeClientRect:h,containerNodeRect:b,draggableNodes:v,activatorEvent:y,over:C,overlayNode:j,scrollableAncestors:w,scrollableAncestorRects:O,windowRect:F}=Fe(),E=r.useContext(Ce),S=be(s,{active:m,activeNodeRect:h,draggingNodeRect:j.rect,containerNodeRect:b,over:C,overlayNodeRect:j.rect,scrollableAncestors:w,scrollableAncestorRects:O,transform:E,windowRect:F}),T=function(e,t,n){const o=r.useRef(t);return l.useLazyMemo((r=>{const a=o.current;if(t!==a){if(t&&a&&(a.left!==t.left||a.top!==t.top)&&!r){const o=null==n?void 0:n.getBoundingClientRect();if(o)return{...e,x:o.left-t.left,y:o.top-t.top}}o.current=t}}),[t,e,n])}(S,f,j.nodeRef.current),L=null!==m,D=null!=T?T:S,R=e?D:{...D,scaleX:1,scaleY:1},I=f?{position:"fixed",width:f.width,height:f.height,top:f.top,left:f.left,zIndex:d,transform:l.CSS.Transform.toString(R),touchAction:"none",transformOrigin:e&&y?x(y,f):void 0,transition:T?void 0:"function"==typeof i?i(y):i,...o}:void 0,_=L?{style:I,children:t,className:u,transform:R}:void 0,M=r.useRef(_),N=null!=_?_:M.current,{children:A,...k}=null!=N?N:{},B=r.useRef(null!=(p=null==m?void 0:m.id)?p:null),P=function({animate:e,adjustScale:t,activeId:n,draggableNodes:o,duration:a,easing:i,dragSourceOpacity:s,node:c,transform:u}){const[d,p]=r.useState(!1);return r.useEffect((()=>{e&&n&&i&&a?requestAnimationFrame((()=>{var e;const r=null==(e=o[n])?void 0:e.node.current;if(u&&c&&r&&null!==r.parentNode){const e=c.children.length>1?c:c.children[0];if(e){const n=e.getBoundingClientRect(),o=W(r),d={x:n.left-o.left,y:n.top-o.top};if(Math.abs(d.x)||Math.abs(d.y)){const e=l.CSS.Transform.toString({x:u.x-d.x,y:u.y-d.y,scaleX:t?o.width*u.scaleX/n.width:1,scaleY:t?o.height*u.scaleY/n.height:1}),g=r.style.opacity;return null!=s&&(r.style.opacity=""+s),void(c.animate([{transform:l.CSS.Transform.toString(u)},{transform:e}],{easing:i,duration:a}).onfinish=()=>{c.style.display="none",p(!0),r&&null!=s&&(r.style.opacity=g)})}}}p(!0)})):e&&p(!0)}),[e,n,t,o,a,i,s,c,u]),l.useIsomorphicLayoutEffect((()=>{d&&p(!1)}),[d]),d}({animate:Boolean(n&&B.current&&!m),adjustScale:e,activeId:B.current,draggableNodes:v,duration:null==n?void 0:n.duration,easing:null==n?void 0:n.easing,dragSourceOpacity:null==n?void 0:n.dragSourceOpacity,node:j.nodeRef.current,transform:null==(g=M.current)?void 0:g.transform}),z=Boolean(A&&(t||n&&!P));return r.useEffect((()=>{var e;(null==m?void 0:m.id)!==B.current&&(B.current=null!=(e=null==m?void 0:m.id)?e:null),m&&M.current!==_&&(M.current=_)}),[m,_]),r.useEffect((()=>{P&&(M.current=void 0)}),[P]),z?a.createElement(c,{...k,ref:j.setRef},A):null}));t.DndContext=je,t.DragOverlay=Te,t.KeyboardSensor=ae,t.MouseSensor=he,t.PointerSensor=de,t.TouchSensor=ve,t.applyModifiers=be,t.closestCenter=(e,t)=>{const n=C(t,t.left,t.top),o=e.map((([e,t])=>v(C(t),n))),r=p(o);return e[r]?e[r][0]:null},t.closestCorners=(e,t)=>{const n=N(t,t.left,t.top),o=e.map((([e,t])=>{const o=N(t,M(t)?t.left:void 0,M(t)?t.top:void 0),r=n.reduce(((e,t,n)=>e+v(o[n],t)),0);return Number((r/4).toFixed(4))})),r=p(o);return e[r]?e[r][0]:null},t.defaultAnnouncements=u,t.defaultCoordinates=b,t.defaultDropAnimation=Se,t.getBoundingClientRect=_,t.getScrollableAncestors=w,t.getViewRect=W,t.rectIntersection=A,t.useDndContext=Fe,t.useDndMonitor=K,t.useDraggable=function({id:e,data:t,disabled:n=!1,attributes:o}){const{active:a,activeNodeRect:i,activatorEvent:s,ariaDescribedById:c,draggableNodes:u,droppableRects:d,activators:p,over:g}=r.useContext(h),{role:m=Oe,roleDescription:f="draggable",tabIndex:b=0}=null!=o?o:{},v=(null==a?void 0:a.id)===e,y=r.useContext(v?Ce:we),[x,C]=l.useNodeRef(),j=function(e,t){return r.useMemo((()=>e.reduce(((e,{eventName:n,handler:o})=>(e[n]=e=>{o(e,t)},e)),{})),[e,t])}(p,e),w=q(t);return r.useEffect((()=>(u[e]={node:x,data:w},()=>{delete u[e]})),[u,e]),{active:a,activeNodeRect:i,activatorEvent:s,attributes:r.useMemo((()=>({role:m,tabIndex:b,"aria-pressed":!(!v||m!==Oe)||void 0,"aria-roledescription":f,"aria-describedby":c.draggable})),[m,b,v,f,c.draggable]),droppableRects:d,isDragging:v,listeners:n?void 0:j,node:x,over:g,setNodeRef:C,transform:y}},t.useDroppable=function({data:e,disabled:t=!1,id:n}){const{active:o,dispatch:a,over:i}=r.useContext(h),s=r.useRef(null),[c,u]=l.useNodeRef(),p=q(e);return l.useIsomorphicLayoutEffect((()=>(a({type:d.RegisterDroppable,element:{id:n,disabled:t,node:c,rect:s,data:p}}),()=>a({type:d.UnregisterDroppable,id:n}))),[n]),r.useEffect((()=>{a({type:d.SetDroppableDisabled,id:n,disabled:t})}),[t]),{active:o,rect:s,isOver:(null==i?void 0:i.id)===n,node:c,over:i,setNodeRef:u}},t.useSensor=function(e,t){return r.useMemo((()=>({sensor:e,options:null!=t?t:{}})),[e,t])},t.useSensors=function(...e){return r.useMemo((()=>[...e].filter((e=>null!=e))),[...e])}},73:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(4);const r="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,a=r?o.useLayoutEffect:o.useEffect;let i={};function l(e){return(t,...n)=>n.reduce(((t,n)=>{const o=Object.entries(n);for(const[n,r]of o){const o=t[n];null!=o&&(t[n]=o+e*r)}return t}),{...t})}const s=l(1),c=l(-1),u=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return`translate3d(${t?Math.round(t):0}px, ${n?Math.round(n):0}px, 0)`}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return`scaleX(${t}) scaleY(${n})`}},Transform:{toString(e){if(e)return[u.Translate.toString(e),u.Scale.toString(e)].join(" ")}},Transition:{toString:({property:e,duration:t,easing:n})=>`${e} ${t}ms ${n}`}});t.CSS=u,t.add=s,t.canUseDOM=r,t.subtract=c,t.useCombinedRefs=function(...e){return o.useMemo((()=>t=>{e.forEach((e=>e(t)))}),e)},t.useInterval=function(){const e=o.useRef(null);return[o.useCallback(((t,n)=>{e.current=setInterval(t,n)}),[]),o.useCallback((()=>{null!==e.current&&(clearInterval(e.current),e.current=null)}),[])]},t.useIsomorphicLayoutEffect=a,t.useLazyMemo=function(e,t){const n=o.useRef();return o.useMemo((()=>{const t=e(n.current);return n.current=t,t}),[...t])},t.useNodeRef=function(){const e=o.useRef(null),t=o.useCallback((t=>{e.current=t}),[]);return[e,t]},t.useUniqueId=function(e,t){return o.useMemo((()=>{if(t)return t;const n=null==i[e]?0:i[e]+1;return i[e]=n,`${e}-${n}`}),[e,t])}},74:function(e,t,n){"use strict";e.exports=n(75)},75:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(4),a=(o=r)&&"object"==typeof o&&"default"in o?o.default:o;const i={display:"none"},l={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};t.HiddenText=function({id:e,value:t}){return a.createElement("div",{id:e,style:i},t)},t.LiveRegion=function({id:e,announcement:t}){return a.createElement("div",{id:e,style:l,role:"status","aria-live":"assertive","aria-atomic":!0},t)},t.useAnnouncement=function(){const[e,t]=r.useState("");return{announce:r.useCallback((e=>{null!=e&&t(e)}),[]),announcement:e}}},84:function(e,t,n){"use strict";n.r(t),n.d(t,"setFlyoutRef",(function(){return G})),n.d(t,"ControlGroupContainer",(function(){return control_group_container_ControlGroupContainer}));var o=n(1),r=n.n(o),a=n(4),i=n.n(a),l=n(19),s=n(31),c=n.n(s),u=n(8),d=n.n(u),p=n(41),g=n(14),m=n(5),f=n(33),h=n(16),b=n(2),v=n(11),y=n(21),x=n(34);const C=[{id:"auto","data-test-subj":"control-editor-width-auto",label:y.a.management.controlWidth.getAutoWidthTitle()},{id:"small","data-test-subj":"control-editor-width-small",label:y.a.management.controlWidth.getSmallWidthTitle()},{id:"medium","data-test-subj":"control-editor-width-medium",label:y.a.management.controlWidth.getMediumWidthTitle()},{id:"large","data-test-subj":"control-editor-width-large",label:y.a.management.controlWidth.getLargeWidthTitle()}],j=[{id:"oneLine","data-test-subj":"control-editor-layout-oneLine",label:y.a.management.labelPosition.getInlineTitle()},{id:"twoLine","data-test-subj":"control-editor-layout-twoLine",label:y.a.management.labelPosition.getAboveTitle()}];var w=n(7),O=n(3);const F=({controlCount:e,initialInput:t,updateInput:n,onDeleteAll:o,onClose:r})=>{var s,c,u,p;const[g,f]=Object(a.useState)(!1),h=Object(m.useGeneratedHtmlId)({prefix:"advancedSettingsAccordion"}),[b,v]=Object(a.useState)({defaultControlWidth:w.DEFAULT_CONTROL_WIDTH,...Object(w.getDefaultControlGroupInput)(),...t}),x=Object(a.useCallback)((e=>{v({...b,...e})}),[b]),F=Object(a.useCallback)((e=>{var t;v({...b,ignoreParentSettings:{...null!==(t=b.ignoreParentSettings)&&void 0!==t?t:{},...e}})}),[b]),E=Object(a.useMemo)((()=>!Object.values(Object(l.omit)(b.ignoreParentSettings,"ignoreValidations")).some(Boolean)),[b]),S=Object(a.useCallback)((()=>{const e={...b};if(g){const n={};Object.entries(t.panels).forEach((([t,o])=>n[t]={...o,width:e.defaultControlWidth})),e.panels=n}var o,r;o=e,r=t,d()(o,r)||n(e)}),[b,g,t,n]);return Object(O.jsx)(i.a.Fragment,null,Object(O.jsx)(m.EuiFlyoutHeader,{hasBorder:!0},Object(O.jsx)(m.EuiTitle,{size:"m"},Object(O.jsx)("h2",null,y.a.management.getFlyoutTitle()))),Object(O.jsx)(m.EuiFlyoutBody,{"data-test-subj":"control-group-settings-flyout"},Object(O.jsx)(m.EuiForm,null,Object(O.jsx)(m.EuiFormRow,{label:y.a.management.labelPosition.getLabelPositionTitle()},Object(O.jsx)(m.EuiButtonGroup,{color:"primary",options:j,"data-test-subj":"control-group-layout-options",idSelected:b.controlStyle,legend:y.a.management.labelPosition.getLabelPositionLegend(),onChange:e=>{x({controlStyle:e})}})),Object(O.jsx)(m.EuiSpacer,{size:"m"}),Object(O.jsx)(m.EuiFormRow,{label:y.a.management.getDefaultWidthTitle()},Object(O.jsx)(i.a.Fragment,null,Object(O.jsx)(m.EuiButtonGroup,{color:"primary","data-test-subj":"control-group-default-size-options",idSelected:b.defaultControlWidth,legend:y.a.management.controlWidth.getWidthSwitchLegend(),options:C,onChange:e=>{x({defaultControlWidth:e})}}),e>0&&Object(O.jsx)(i.a.Fragment,null,Object(O.jsx)(m.EuiSpacer,{size:"s"}),Object(O.jsx)(m.EuiCheckbox,{id:"editControls_setAllSizesCheckbox","data-test-subj":"set-all-control-sizes-checkbox",label:y.a.management.getSetAllWidthsToDefaultTitle(),checked:g,onChange:e=>{f(e.target.checked)}})))),Object(O.jsx)(m.EuiHorizontalRule,{margin:"m"}),Object(O.jsx)(m.EuiFlexGroup,null,Object(O.jsx)(m.EuiFlexItem,{grow:!1},Object(O.jsx)(m.EuiSpacer,{size:"xs"}),Object(O.jsx)(m.EuiSwitch,{label:y.a.management.querySync.getQuerySettingsTitle(),"data-test-subj":"control-group-query-sync",showLabel:!1,checked:E,onChange:e=>{const t=!e.target.checked;F({ignoreFilters:t,ignoreTimerange:t,ignoreQuery:t})}})),Object(O.jsx)(m.EuiFlexItem,null,Object(O.jsx)(m.EuiTitle,{size:"xxs"},Object(O.jsx)("h3",null,y.a.management.querySync.getQuerySettingsTitle())),Object(O.jsx)(m.EuiText,{size:"s"},Object(O.jsx)("p",null,y.a.management.querySync.getQuerySettingsSubtitle())),Object(O.jsx)(m.EuiSpacer,{size:"s"}),Object(O.jsx)(m.EuiAccordion,{"data-test-subj":"control-group-query-sync-advanced",id:h,initialIsOpen:!E,buttonContent:y.a.management.querySync.getAdvancedSettingsTitle()},Object(O.jsx)(m.EuiSpacer,{size:"s"}),Object(O.jsx)(m.EuiFormRow,{hasChildLabel:!0,display:"columnCompressedSwitch"},Object(O.jsx)(m.EuiSwitch,{"data-test-subj":"control-group-query-sync-time-range",label:y.a.management.querySync.getIgnoreTimerangeTitle(),compressed:!0,checked:Boolean(null===(s=b.ignoreParentSettings)||void 0===s?void 0:s.ignoreTimerange),onChange:e=>F({ignoreTimerange:e.target.checked})})),Object(O.jsx)(m.EuiFormRow,{hasChildLabel:!0,display:"columnCompressedSwitch"},Object(O.jsx)(m.EuiSwitch,{"data-test-subj":"control-group-query-sync-query",label:y.a.management.querySync.getIgnoreQueryTitle(),compressed:!0,checked:Boolean(null===(c=b.ignoreParentSettings)||void 0===c?void 0:c.ignoreQuery),onChange:e=>F({ignoreQuery:e.target.checked})})),Object(O.jsx)(m.EuiFormRow,{hasChildLabel:!0,display:"columnCompressedSwitch"},Object(O.jsx)(m.EuiSwitch,{"data-test-subj":"control-group-query-sync-filters",label:y.a.management.querySync.getIgnoreFilterPillsTitle(),compressed:!0,checked:Boolean(null===(u=b.ignoreParentSettings)||void 0===u?void 0:u.ignoreFilters),onChange:e=>F({ignoreFilters:e.target.checked})}))))),Object(O.jsx)(m.EuiHorizontalRule,{margin:"m"}),Object(O.jsx)(m.EuiFlexGroup,null,Object(O.jsx)(m.EuiFlexItem,{grow:!1},Object(O.jsx)(m.EuiSpacer,{size:"xs"}),Object(O.jsx)(m.EuiSwitch,{"data-test-subj":"control-group-validate-selections",label:y.a.management.validateSelections.getValidateSelectionsTitle(),showLabel:!1,checked:!Boolean(null===(p=b.ignoreParentSettings)||void 0===p?void 0:p.ignoreValidations),onChange:e=>F({ignoreValidations:!e.target.checked})})),Object(O.jsx)(m.EuiFlexItem,null,Object(O.jsx)(m.EuiTitle,{size:"xxs"},Object(O.jsx)("h3",null,y.a.management.validateSelections.getValidateSelectionsTitle())),Object(O.jsx)(m.EuiText,{size:"s"},Object(O.jsx)("p",null,y.a.management.validateSelections.getValidateSelectionsSubTitle())))),Object(O.jsx)(m.EuiHorizontalRule,{margin:"m"}),Object(O.jsx)(m.EuiFlexGroup,null,Object(O.jsx)(m.EuiFlexItem,{grow:!1},Object(O.jsx)(m.EuiSpacer,{size:"xs"}),Object(O.jsx)(m.EuiSwitch,{"data-test-subj":"control-group-chaining",label:y.a.management.controlChaining.getHierarchyTitle(),showLabel:!1,checked:"HIERARCHICAL"===b.chainingSystem,onChange:e=>x({chainingSystem:e.target.checked?"HIERARCHICAL":"NONE"})})),Object(O.jsx)(m.EuiFlexItem,null,Object(O.jsx)(m.EuiTitle,{size:"xxs"},Object(O.jsx)("h3",null,y.a.management.controlChaining.getHierarchyTitle())),Object(O.jsx)(m.EuiText,{size:"s"},Object(O.jsx)("p",null,y.a.management.controlChaining.getHierarchySubTitle())))),e>0&&Object(O.jsx)(i.a.Fragment,null,Object(O.jsx)(m.EuiHorizontalRule,{margin:"m"}),Object(O.jsx)(m.EuiSpacer,{size:"m"}),Object(O.jsx)(m.EuiButtonEmpty,{onClick:o,"data-test-subj":"delete-all-controls-button","aria-label":"delete-all",iconType:"trash",color:"danger",flush:"left",size:"s"},y.a.management.getDeleteAllButtonTitle())))),Object(O.jsx)(m.EuiFlyoutFooter,null,Object(O.jsx)(m.EuiFlexGroup,{responsive:!1,justifyContent:"spaceBetween"},Object(O.jsx)(m.EuiFlexItem,{grow:!1},Object(O.jsx)(m.EuiButtonEmpty,{"aria-label":"cancel-editing-group",iconType:"cross",onClick:()=>{r()}},y.a.manageControl.getCancelTitle())),Object(O.jsx)(m.EuiFlexItem,{grow:!1},Object(O.jsx)(m.EuiButton,{"aria-label":"save-group",iconType:"check",color:"primary","data-test-subj":"control-group-editor-save",onClick:()=>{S(),r()}},y.a.manageControl.getSaveChangesTitle())))))},E=({controlGroupContainer:e,closePopover:t})=>{const{overlays:n}=v.a.getServices(),{openConfirm:o,openFlyout:r}=n,a={key:"manageControls",onClick:()=>{(()=>{var t;const n=v.a.getContextProvider(),a=r(Object(x.toMountPoint)(Object(O.jsx)(n,null,Object(O.jsx)(F,{initialInput:e.getInput(),updateInput:t=>e.updateInput(t),controlCount:Object.keys(null!==(t=e.getInput().panels)&&void 0!==t?t:{}).length,onDeleteAll:()=>{return t=a,void o(y.a.management.deleteControls.getSubtitle(),{confirmButtonText:y.a.management.deleteControls.getConfirm(),cancelButtonText:y.a.management.deleteControls.getCancel(),title:y.a.management.deleteControls.getDeleteAllTitle(),buttonColor:"danger"}).then((n=>{n&&Object.keys(e.getInput().panels).forEach((t=>e.removeEmbeddable(t))),t.close()}));var t},onClose:()=>a.close()}))),{outsideClickCloses:!1,onClose:()=>{a.close(),G(void 0)}});G(a)})(),t()},icon:"gear","data-test-subj":"controls-settings-button","aria-label":y.a.management.getManageButtonTitle()};return Object(O.jsx)(m.EuiContextMenuItem,a,y.a.management.getManageButtonTitle())};n(66);var S=n(32),T=n.n(S),L=n(47),D=n(48),R=n(30),I=n(49),_=n.n(I),W=n(44);const M=({embeddable:e,isCreate:t,title:n,width:o,onSave:r,onCancel:l,removeControl:s,updateTitle:c,updateWidth:u,onTypeEditorChange:d,getRelevantDataViewId:p,setLastUsedDataViewId:g})=>{const{controls:f}=v.a.getServices(),{getControlTypes:h,getControlFactory:b}=f,[x,j]=Object(a.useState)(!t&&e?e.type:h()[0]),[w,F]=Object(a.useState)(),[E,S]=Object(a.useState)(n),[T,L]=Object(a.useState)(o),[D,R]=Object(a.useState)(!1);return Object(O.jsx)(i.a.Fragment,null,Object(O.jsx)(m.EuiFlyoutHeader,{hasBorder:!0},Object(O.jsx)(m.EuiTitle,{size:"m"},Object(O.jsx)("h2",null,t?y.a.manageControl.getFlyoutCreateTitle():y.a.manageControl.getFlyoutEditTitle()))),Object(O.jsx)(m.EuiFlyoutBody,{"data-test-subj":"control-editor-flyout"},Object(O.jsx)(m.EuiForm,null,Object(O.jsx)(m.EuiFormRow,{label:y.a.manageControl.getControlTypeTitle()},Object(O.jsx)(m.EuiKeyPadMenu,null,(t?h():[x]).map((e=>{var t,n,o,r;const a=b(e),i=null===(t=(n=a).getIconType)||void 0===t?void 0:t.call(n),l=null===(o=(r=a).getDescription)||void 0===o?void 0:o.call(r),s=Object(O.jsx)(m.EuiKeyPadMenuItem,{id:`createControlButton_${e}`,"data-test-subj":`create-${e}-control`,label:a.getDisplayName(),isSelected:x===e,onClick:()=>{j(e)}},Object(O.jsx)(m.EuiIcon,{type:i&&"empty"!==i?i:"controlsHorizontal",size:"l"}));return l?Object(O.jsx)(m.EuiToolTip,{content:l,position:"top"},s):s})))),x&&Object(O.jsx)(i.a.Fragment,null,(t=>{const n=b(t).controlEditorComponent;return n?Object(O.jsx)(n,{getRelevantDataViewId:p,setLastUsedDataViewId:g,onChange:d,setValidState:R,initialInput:null==e?void 0:e.getInput(),setDefaultTitle:e=>{E&&E!==w||(S(e),c(e)),F(e)}}):null})(x),Object(O.jsx)(m.EuiFormRow,{label:y.a.manageControl.getTitleInputTitle()},Object(O.jsx)(m.EuiFieldText,{"data-test-subj":"control-editor-title-input",placeholder:w,value:E,onChange:e=>{c(e.target.value||w),S(e.target.value)}})),Object(O.jsx)(m.EuiFormRow,{label:y.a.manageControl.getWidthInputTitle()},Object(O.jsx)(m.EuiButtonGroup,{color:"primary",legend:y.a.management.controlWidth.getWidthSwitchLegend(),options:C,idSelected:T,onChange:e=>{L(e),u(e)}})),Object(O.jsx)(m.EuiSpacer,{size:"l"}),s&&Object(O.jsx)(m.EuiButtonEmpty,{"aria-label":`delete-${n}`,iconType:"trash",flush:"left",color:"danger",onClick:()=>{l(),s()}},y.a.management.getDeleteButtonTitle())))),Object(O.jsx)(m.EuiFlyoutFooter,null,Object(O.jsx)(m.EuiFlexGroup,{responsive:!1,justifyContent:"spaceBetween"},Object(O.jsx)(m.EuiFlexItem,{grow:!1},Object(O.jsx)(m.EuiButtonEmpty,{"aria-label":`cancel-${n}`,"data-test-subj":"control-editor-cancel",iconType:"cross",onClick:()=>l()},y.a.manageControl.getCancelTitle())),Object(O.jsx)(m.EuiFlexItem,{grow:!1},Object(O.jsx)(m.EuiButton,{"aria-label":`save-${n}`,"data-test-subj":"control-editor-save",iconType:"check",color:"primary",disabled:!D,onClick:()=>r(x)},y.a.manageControl.getSaveChangesTitle())))))},N=({embeddableId:e})=>{const{overlays:t,controls:n}=v.a.getHooks(),{getControlFactory:o}=n.useService(),{openFlyout:r,openConfirm:i}=t.useService(),s=Object(b.useReduxContainerContext)(),{containerActions:{untilEmbeddableLoaded:c,removeEmbeddable:u,updateInputForChild:d},actions:{setControlWidth:p},useEmbeddableSelector:g,useEmbeddableDispatch:f}=s,h=f(),{panels:C}=g((e=>e)),j=Object(a.useRef)(C[e]);Object(a.useEffect)((()=>{j.current=C[e]}),[C,e]);return Object(O.jsx)(m.EuiButtonIcon,{"data-test-subj":`control-action-${e}-edit`,"aria-label":y.a.floatingActions.getEditButtonTitle(),iconType:"pencil",onClick:()=>(async()=>{const t=C[e],n=o(t.type),a=await c(e),g=a.getRoot();let m={};if(!n)throw new R.EmbeddableFactoryNotFoundError(t.type);let f=!1;const w=n=>{f||Object(l.isEqual)(j.current.explicitInput,{...t.explicitInput,...m})&&Object(l.isEqual)(j.current.width,t.width)?n.close():i(y.a.management.discardChanges.getSubtitle(),{confirmButtonText:y.a.management.discardChanges.getConfirm(),cancelButtonText:y.a.management.discardChanges.getCancel(),title:y.a.management.discardChanges.getTitle(),buttonColor:"danger"}).then((o=>{o&&(h(p({width:t.width,embeddableId:e})),n.close())}))},F=r(((e,t)=>{const n=v.a.getContextProvider(),o=t.ReduxEmbeddableStoreProvider;return Object(x.toMountPoint)(Object(O.jsx)(o,null,Object(O.jsx)(b.ReduxEmbeddableContext.Provider,{value:t},Object(O.jsx)(n,null,e))))})(Object(O.jsx)(M,{isCreate:!1,width:t.width,embeddable:a,title:a.getTitle(),onCancel:()=>w(F),updateTitle:e=>m.title=e,setLastUsedDataViewId:e=>g.setLastUsedDataViewId(e),updateWidth:t=>h(p({width:t,embeddableId:e})),onTypeEditorChange:e=>m={...m,...e},onSave:()=>{const t=n;t.presaveTransformFunction&&(m=t.presaveTransformFunction(m,a)),d(e,m),F.close()},removeControl:()=>{i(y.a.management.deleteControls.getSubtitle(),{confirmButtonText:y.a.management.deleteControls.getConfirm(),cancelButtonText:y.a.management.deleteControls.getCancel(),title:y.a.management.deleteControls.getDeleteTitle(),buttonColor:"danger"}).then((t=>{t&&(u(e),f=!0,F.close())}))}}),s),{outsideClickCloses:!1,onClose:e=>{G(void 0),w(e)}});G(F)})(),color:"text"})},A=({customPrepend:e,enableActions:t,embeddableId:n})=>{var o;const r=Object(a.useMemo)((()=>i.a.createRef()),[]),{useEmbeddableSelector:l,containerActions:{untilEmbeddableLoaded:s,removeEmbeddable:c}}=Object(b.useReduxContainerContext)(),{controlStyle:u}=l((e=>e)),{overlays:d}=v.a.getHooks(),{openConfirm:p}=d.useService(),g=(({untilEmbeddableLoaded:e,embeddableId:t})=>{const[n,o]=Object(a.useState)();return Object(a.useEffect)((()=>{let n=!0;return(async()=>{const r=await e(t);n&&o(r)})(),()=>{n=!1}}),[e,t]),n})({untilEmbeddableLoaded:s,embeddableId:n}),[f,h]=Object(a.useState)(),x="twoLine"===u;Object(a.useEffect)((()=>{r.current&&g&&g.render(r.current);const e=null==g?void 0:g.getInput$().subscribe((e=>h(e.title)));return()=>{null==e||e.unsubscribe()}}),[g,r]);const C=Object(O.jsx)("div",{className:T()("controlFrameFloatingActions",{"controlFrameFloatingActions--twoLine":x,"controlFrameFloatingActions--oneLine":!x})},Object(O.jsx)(m.EuiToolTip,{content:y.a.floatingActions.getEditButtonTitle()},Object(O.jsx)(N,{embeddableId:n})),Object(O.jsx)(m.EuiToolTip,{content:y.a.floatingActions.getRemoveButtonTitle()},Object(O.jsx)(m.EuiButtonIcon,{"data-test-subj":`control-action-${n}-delete`,"aria-label":y.a.floatingActions.getRemoveButtonTitle(),onClick:()=>p(y.a.management.deleteControls.getSubtitle(),{confirmButtonText:y.a.management.deleteControls.getConfirm(),cancelButtonText:y.a.management.deleteControls.getCancel(),title:y.a.management.deleteControls.getDeleteTitle(),buttonColor:"danger"}).then((e=>{e&&c(n)})),iconType:"cross",color:"danger"}))),j=T()("controlFrame__control",{"controlFrame--twoLine":"twoLine"===u,"controlFrame--oneLine":"oneLine"===u}),w=Object(O.jsx)(m.EuiFormControlLayout,{className:T()("controlFrame__formControlLayout",{"controlFrameFormControlLayout--twoLine":"twoLine"===u}),fullWidth:!0,prepend:Object(O.jsx)(i.a.Fragment,null,null!==(o=g&&e)&&void 0!==o?o:null,x?void 0:Object(O.jsx)(m.EuiToolTip,{anchorClassName:"controlFrame__labelToolTip",content:f},Object(O.jsx)(m.EuiFormLabel,{className:"controlFrame__formControlLayoutLabel",htmlFor:n},f)))},g&&Object(O.jsx)("div",{className:j,id:`controlFrame--${n}`,ref:r}),!g&&Object(O.jsx)("div",{className:j,id:`controlFrame--${n}`},Object(O.jsx)("div",{className:"controlFrame--controlLoading"},Object(O.jsx)(m.EuiLoadingChart,null))));return Object(O.jsx)(i.a.Fragment,null,g&&t&&C,Object(O.jsx)(m.EuiFormRow,{"data-test-subj":"control-frame-title",fullWidth:!0,label:x?f||y.a.emptyState.getTwoLineLoadingTitle():void 0},w))},k=e=>{const{embeddableId:t,isEditable:n}=e,{over:o,listeners:r,isSorting:a,transform:i,transition:l,attributes:s,isDragging:c,setNodeRef:u}=Object(L.useSortable)({id:t,animateLayoutChanges:()=>!0,disabled:!n});return e.dragInfo={...e.dragInfo,isOver:(null==o?void 0:o.id)===t,isDragging:c},Object(O.jsx)(B,_()({key:t,ref:u},e,s,r,{style:{transition:null!=l?l:void 0,transform:a?void 0:W.CSS.Translate.toString(i)}}))},B=Object(a.forwardRef)((({embeddableId:e,dragInfo:t,style:n,isEditable:o,...r},a)=>{const{isOver:i,isDragging:l,draggingIndex:s,index:c}=t,{useEmbeddableSelector:u}=Object(b.useReduxContainerContext)(),{panels:d}=u((e=>e)),p=d[e].width,g=Object(O.jsx)("button",_()({ref:a},r,{className:"controlFrame__dragHandle"}),Object(O.jsx)(m.EuiIcon,{type:"grabHorizontal"}));return Object(O.jsx)(m.EuiFlexItem,{grow:"auto"===p,"data-control-id":e,"data-test-subj":"control-frame","data-render-complete":"true",className:T()("controlFrameWrapper",{"controlFrameWrapper-isDragging":l,"controlFrameWrapper-isEditable":o,"controlFrameWrapper--small":"small"===p,"controlFrameWrapper--medium":"medium"===p,"controlFrameWrapper--large":"large"===p,"controlFrameWrapper--insertBefore":i&&(null!=c?c:-1)<(null!=s?s:-1),"controlFrameWrapper--insertAfter":i&&(null!=c?c:-1)>(null!=s?s:-1)}),style:n},Object(O.jsx)(A,{enableActions:o&&-1===s,embeddableId:e,customPrepend:o?g:void 0}))})),P=({draggingId:e})=>{const{useEmbeddableSelector:t}=Object(b.useReduxContainerContext)(),{panels:n,controlStyle:o}=t((e=>e)),r=n[e].width,a=n[e].explicitInput.title;return Object(O.jsx)(m.EuiFlexItem,{className:T()("controlFrameCloneWrapper",{"controlFrameCloneWrapper--small":"small"===r,"controlFrameCloneWrapper--medium":"medium"===r,"controlFrameCloneWrapper--large":"large"===r,"controlFrameCloneWrapper--twoLine":"twoLine"===o})},"twoLine"===o?Object(O.jsx)(m.EuiFormLabel,null,a):void 0,Object(O.jsx)(m.EuiFlexGroup,{responsive:!1,gutterSize:"none",className:"controlFrame__draggable"},Object(O.jsx)(m.EuiFlexItem,{grow:!1},Object(O.jsx)(m.EuiIcon,{type:"grabHorizontal",className:"controlFrame__dragHandle"})),"oneLine"===o?Object(O.jsx)(m.EuiFlexItem,null,Object(O.jsx)("label",{className:"controlFrameCloneWrapper__label"},a)):void 0))},z=()=>{const e=Object(b.useReduxContainerContext)(),{useEmbeddableSelector:t,useEmbeddableDispatch:n,actions:{setControlOrders:o}}=e,r=n(),{panels:l,viewMode:s,controlStyle:c}=t((e=>e)),u=s===R.ViewMode.EDIT,d=Object(a.useMemo)((()=>Object.values(l).sort(((e,t)=>e.order>t.order?1:-1)).reduce(((e,t)=>(e.push(t.explicitInput.id),e)),[])),[l]),[p,g]=Object(a.useState)(null),f=Object(a.useMemo)((()=>p?d.indexOf(p):-1),[d,p]),h=Object(D.useSensors)(Object(D.useSensor)(D.PointerSensor),Object(D.useSensor)(D.KeyboardSensor,{coordinateGetter:L.sortableKeyboardCoordinates})),v=!(d&&d.length>0);if(!u&&v)return null;let y="subdued";return v&&(y="plain"),p&&(y="success"),Object(O.jsx)(i.a.Fragment,null,d.length>0?Object(O.jsx)(m.EuiPanel,{borderRadius:"m",color:y,paddingSize:v?"s":"none","data-test-subj":"controls-group-wrapper",className:T()("controlsWrapper",{"controlsWrapper--empty":v,"controlsWrapper--twoLine":"twoLine"===c})},Object(O.jsx)(m.EuiFlexGroup,{wrap:!1,gutterSize:"m",direction:"row",responsive:!1,alignItems:"center","data-test-subj":"controls-group","data-shared-items-count":d.length},Object(O.jsx)(m.EuiFlexItem,null,Object(O.jsx)(D.DndContext,{onDragStart:({active:e})=>g(e.id),onDragEnd:({over:e})=>{if(e){const t=d.indexOf(e.id);if(f!==t){const e=t;r(o({ids:Object(L.arrayMove)([...d],f,e)}))}}g(null)},onDragCancel:()=>g(null),sensors:h,collisionDetection:D.closestCenter,layoutMeasuring:{strategy:D.LayoutMeasuringStrategy.Always}},Object(O.jsx)(L.SortableContext,{items:d,strategy:L.rectSortingStrategy},Object(O.jsx)(m.EuiFlexGroup,{className:T()("controlGroup",{"controlGroup-isDragging":p}),alignItems:"center",gutterSize:"s",wrap:!0},d.map(((e,t)=>l[e]&&Object(O.jsx)(k,{isEditable:u,dragInfo:{index:t,draggingIndex:f},embeddableId:e,key:e}))))),Object(O.jsx)(D.DragOverlay,null,p?Object(O.jsx)(P,{draggingId:p}):null))))):Object(O.jsx)(i.a.Fragment,null))},K={setControlStyle:(e,t)=>{e.controlStyle=t.payload},setDefaultControlWidth:(e,t)=>{e.defaultControlWidth=t.payload},setControlWidth:(e,t)=>{e.panels[t.payload.embeddableId].width=t.payload.width},setControlOrders:(e,t)=>{t.payload.ids.forEach(((t,n)=>{e.panels[t].order=n}))}},H={HIERARCHICAL:{getContainerSettings:e=>({childIdInitializeOrder:Object.values(e.panels).sort(((e,t)=>e.order>t.order?1:-1)).map((e=>e.explicitInput.id)),initializeSequentially:!0}),getPrecedingFilters:({id:e,childOrder:t,getChild:n})=>{var o;let r=[];const a=null===(o=t.IdsToOrder)||void 0===o?void 0:o[e];if(!a||0===a)return r;for(let e=0;e<a;e++){var i;const o=n(t.idsInOrder[e]);if(!o||Object(R.isErrorEmbeddable)(o))return r;r=[...r,...null!==(i=o.getOutput().filters)&&void 0!==i?i:[]]}return r},onChildChange:({childOutputChangedId:e,childOrder:t,recalculateFilters$:n,getChild:o})=>{if(e===t.lastChildId)return void n.next();const r=t.IdsToOrder[e]+1;r>=t.idsInOrder.length||setTimeout((()=>{var e;return null===(e=o(t.idsInOrder[r]))||void 0===e?void 0:e.refreshInputFromParent()}),1)}},NONE:{getContainerSettings:()=>{},getPrecedingFilters:()=>{},onChildChange:({recalculateFilters$:e})=>e.next()}};var V=n(13);const $=({defaultControlWidth:e,updateDefaultWidth:t,addNewEmbeddable:n,buttonType:o,closePopover:r,setLastUsedDataViewId:a,getRelevantDataViewId:i})=>{const{overlays:l,controls:s}=v.a.getServices(),{getControlTypes:c,getControlFactory:u}=s,{openFlyout:d,openConfirm:p}=l;if(0===c().length)return null;const g={key:"addControl",onClick:()=>{(async()=>{const o=v.a.getContextProvider();new Promise(((n,r)=>{let l={};const s=e=>{if(0===Object.keys(l).length)return r(),void e.close();p(y.a.management.discardNewControl.getSubtitle(),{confirmButtonText:y.a.management.discardNewControl.getConfirm(),cancelButtonText:y.a.management.discardNewControl.getCancel(),title:y.a.management.discardNewControl.getTitle(),buttonColor:"danger"}).then((t=>{t&&(r(),e.close())}))},c=d(Object(x.toMountPoint)(Object(O.jsx)(o,null,Object(O.jsx)(M,{setLastUsedDataViewId:a,getRelevantDataViewId:i,isCreate:!0,width:null!=e?e:V.b,updateTitle:e=>l.title=e,updateWidth:t,onSave:e=>{const t=u(e);t.presaveTransformFunction&&(l=t.presaveTransformFunction(l)),n({type:e,controlInput:l}),c.close()},onCancel:()=>s(c),onTypeEditorChange:e=>l={...l,...e}}))),{outsideClickCloses:!1,onClose:e=>{s(e),G(void 0)}});G(c)})).then((async e=>{await n(e.type,e.controlInput)}),(()=>{}))})(),r&&r()},"data-test-subj":"controls-create-button","aria-label":y.a.management.getManageButtonTitle()};return"callout"===o?Object(O.jsx)(m.EuiButton,_()({},g,{color:"primary",size:"s"}),y.a.emptyState.getAddControlButtonTitle()):Object(O.jsx)(m.EuiContextMenuItem,_()({},g,{icon:"plusInCircle"}),y.a.emptyState.getAddControlButtonTitle())},U=Object(b.withSuspense)(b.LazyReduxEmbeddableWrapper);let q;const G=e=>{q=e};class control_group_container_ControlGroupContainer extends R.Container{closeAllFlyouts(){var e;null===(e=q)||void 0===e||e.close(),q=void 0}constructor(e,t){var n;super(e,{embeddableLoaded:{}},v.a.getServices().controls.getControlFactory,t,null===(n=H[e.chainingSystem])||void 0===n?void 0:n.getContainerSettings(e)),r()(this,"type",h.a),r()(this,"subscriptions",new g.Subscription),r()(this,"domNode",void 0),r()(this,"childOrderCache",void 0),r()(this,"recalculateFilters$",void 0),r()(this,"relevantDataViewId",void 0),r()(this,"lastUsedDataViewId",void 0),r()(this,"setLastUsedDataViewId",(e=>{this.lastUsedDataViewId=e})),r()(this,"setRelevantDataViewId",(e=>{this.relevantDataViewId=e})),r()(this,"getMostRelevantDataViewId",(()=>{var e;return null!==(e=this.lastUsedDataViewId)&&void 0!==e?e:this.relevantDataViewId})),r()(this,"getCreateControlButton",((e,t)=>Object(O.jsx)($,{buttonType:e,defaultControlWidth:this.getInput().defaultControlWidth,updateDefaultWidth:e=>this.updateInput({defaultControlWidth:e}),addNewEmbeddable:(e,t)=>this.addNewEmbeddable(e,t),closePopover:t,getRelevantDataViewId:()=>this.getMostRelevantDataViewId(),setLastUsedDataViewId:e=>this.setLastUsedDataViewId(e)}))),r()(this,"getEditControlGroupButton",(e=>Object(O.jsx)(E,{controlGroupContainer:this,closePopover:e}))),r()(this,"getToolbarButtons",(()=>Object(O.jsx)(b.SolutionToolbarPopover,{ownFocus:!0,label:y.a.getControlButtonTitle(),iconType:"arrowDown",iconSide:"right",panelPaddingSize:"none","data-test-subj":"dashboard-controls-menu-button"},(({closePopover:e})=>Object(O.jsx)(m.EuiContextMenuPanel,{items:[this.getCreateControlButton("toolbar",e),this.getEditControlGroupButton(e)]}))))),r()(this,"setupSubscriptions",(()=>{this.subscriptions.add(this.getInput$().pipe(Object(f.skip)(1),Object(f.distinctUntilChanged)(((e,t)=>((e,t)=>{const n=Object.values(e).map((e=>({id:e.explicitInput.id,order:e.order}))),o=Object.values(t).map((e=>({id:e.explicitInput.id,order:e.order})));return d()(n,o)})(e.panels,t.panels)))).subscribe((()=>{this.recalculateDataViews(),this.recalculateFilters(),this.childOrderCache=this.getEmbeddableOrderCache(),this.childOrderCache.idsInOrder.forEach((e=>{var t;return null===(t=this.getChild(e))||void 0===t?void 0:t.refreshInputFromParent()}))})));const e=Object(g.pipe)(Object(f.map)((()=>this.getChildIds())),Object(f.distinctUntilChanged)(d.a),Object(f.switchMap)((e=>Object(g.merge)(...e.map((e=>this.getChild(e).getOutput$().pipe(Object(f.catchError)((()=>g.EMPTY)),Object(f.mapTo)(e))))))));this.subscriptions.add(this.getOutput$().pipe(e).subscribe((e=>{this.recalculateDataViews(),H[this.getInput().chainingSystem].onChildChange({childOutputChangedId:e,childOrder:this.childOrderCache,getChild:e=>this.getChild(e),recalculateFilters$:this.recalculateFilters$})}))),this.subscriptions.add(this.recalculateFilters$.pipe(Object(f.debounceTime)(10)).subscribe((()=>this.recalculateFilters())))})),r()(this,"getEmbeddableOrderCache",(()=>{const e=this.getInput().panels,t={},n=[];Object.values(e).sort(((e,t)=>e.order>t.order?1:-1)).forEach((e=>{t[e.explicitInput.id]=e.order,n.push(e.explicitInput.id)}));const o=n[n.length-1];return{IdsToOrder:t,idsInOrder:n,lastChildId:o}})),r()(this,"getPanelCount",(()=>Object.keys(this.getInput().panels).length)),r()(this,"recalculateFilters",(()=>{const e=[];Object.values(this.children).map((t=>{var n;const o=t.getOutput();e.push(...null!==(n=null==o?void 0:o.filters)&&void 0!==n?n:[])})),this.updateOutput({filters:Object(p.g)(e)})})),r()(this,"recalculateDataViews",(()=>{const e=[];Object.values(this.children).map((t=>{var n;const o=t.getOutput();e.push(...null!==(n=o.dataViews)&&void 0!==n?n:[])})),this.updateOutput({dataViews:Object(l.uniqBy)(e,"id")})})),r()(this,"untilReady",(()=>{const e=()=>Object.keys(this.getInput().panels).some((e=>!this.getOutput().embeddableLoaded[e]));return e()?new Promise(((t,n)=>{const o=Object(g.merge)(this.getOutput$(),this.getInput$()).subscribe((()=>{this.destroyed&&n(),e()||(o.unsubscribe(),t())}))})):Promise.resolve()})),this.recalculateFilters$=new g.Subject,this.childOrderCache=this.getEmbeddableOrderCache(),this.untilReady().then((()=>{this.recalculateDataViews(),this.recalculateFilters(),this.setupSubscriptions()}))}createNewPanelState(e,t={}){const n=super.createNewPanelState(e,t);let o=0;return Object.keys(this.getInput().panels).length>0&&(o=Object.values(this.getInput().panels).reduce(((e,t)=>(t.order>e&&(e=t.order),e)),0)+1),{order:o,width:this.getInput().defaultControlWidth,...n}}onRemoveEmbeddable(e){const t=super.onRemoveEmbeddable(e);for(let n=this.childOrderCache.IdsToOrder[e]+1;n<this.childOrderCache.idsInOrder.length;n++){const e=t[this.childOrderCache.idsInOrder[n]].order;t[this.childOrderCache.idsInOrder[n]]={...t[this.childOrderCache.idsInOrder[n]],order:e-1}}return t}getInheritedInput(e){const{filters:t,query:n,ignoreParentSettings:o,timeRange:r,chainingSystem:a}=this.getInput(),i=H[a].getPrecedingFilters({id:e,childOrder:this.childOrderCache,getChild:e=>this.getChild(e)});return{ignoreParentSettings:o,filters:[...null!=o&&o.ignoreFilters?[]:null!=t?t:[],...null!=i?i:[]],query:null!=o&&o.ignoreQuery?void 0:n,timeRange:null!=o&&o.ignoreTimerange?void 0:r,id:e}}render(e){this.domNode&&c.a.unmountComponentAtNode(this.domNode),this.domNode=e;const t=v.a.getContextProvider();c.a.render(Object(O.jsx)(t,null,Object(O.jsx)(U,{embeddable:this,reducers:K},Object(O.jsx)(z,null))),e)}destroy(){super.destroy(),this.closeAllFlyouts(),this.subscriptions.unsubscribe(),this.domNode&&c.a.unmountComponentAtNode(this.domNode)}}}}]);