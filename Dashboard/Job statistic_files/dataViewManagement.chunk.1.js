(window.dataViewManagement_bundle_jsonpfunction=window.dataViewManagement_bundle_jsonpfunction||[]).push([[1],Array(20).concat([function(e,t,n){e.exports=n(10)(2)},function(e,t,n){e.exports=n(10)(2471)},function(e,t,n){e.exports=n(10)(9)},function(e,t,n){"use strict";let a,i;Object.defineProperty(t,"__esModule",{value:!0}),t.KBN_FIELD_TYPES=t.ES_FIELD_TYPES=void 0,t.ES_FIELD_TYPES=a,function(e){e._ID="_id",e._INDEX="_index",e._SOURCE="_source",e._TYPE="_type",e.STRING="string",e.TEXT="text",e.KEYWORD="keyword",e.VERSION="version",e.BOOLEAN="boolean",e.OBJECT="object",e.DATE="date",e.DATE_NANOS="date_nanos",e.DATE_RANGE="date_range",e.GEO_POINT="geo_point",e.GEO_SHAPE="geo_shape",e.FLOAT="float",e.HALF_FLOAT="half_float",e.SCALED_FLOAT="scaled_float",e.DOUBLE="double",e.INTEGER="integer",e.LONG="long",e.SHORT="short",e.UNSIGNED_LONG="unsigned_long",e.FLOAT_RANGE="float_range",e.DOUBLE_RANGE="double_range",e.INTEGER_RANGE="integer_range",e.LONG_RANGE="long_range",e.NESTED="nested",e.BYTE="byte",e.IP="ip",e.IP_RANGE="ip_range",e.ATTACHMENT="attachment",e.TOKEN_COUNT="token_count",e.MURMUR3="murmur3",e.HISTOGRAM="histogram"}(a||(t.ES_FIELD_TYPES=a={})),t.KBN_FIELD_TYPES=i,function(e){e._SOURCE="_source",e.ATTACHMENT="attachment",e.BOOLEAN="boolean",e.DATE="date",e.DATE_RANGE="date_range",e.GEO_POINT="geo_point",e.GEO_SHAPE="geo_shape",e.IP="ip",e.IP_RANGE="ip_range",e.MURMUR3="murmur3",e.NUMBER="number",e.NUMBER_RANGE="number_range",e.STRING="string",e.UNKNOWN="unknown",e.CONFLICT="conflict",e.OBJECT="object",e.NESTED="nested",e.HISTOGRAM="histogram",e.MISSING="missing"}(i||(t.KBN_FIELD_TYPES=i={}))},function(e,t,n){e.exports=n(10)(21)},function(e,t,n){e.exports=n(10)(3)},function(e,t,n){"use strict";function a(e,t){return e===t}function i(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var a=t.length,i=0;i<a;i++)if(!e(t[i],n[i]))return!1;return!0}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,n=null,s=null;return function(){return i(t,n,arguments)||(s=e.apply(null,arguments)),n=arguments,s}}function r(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var n=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}function l(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return function(){for(var t=arguments.length,a=Array(t),i=0;i<t;i++)a[i]=arguments[i];var s=0,l=a.pop(),d=r(a),o=e.apply(void 0,[function(){return s++,l.apply(null,arguments)}].concat(n)),c=e((function(){for(var e=[],t=d.length,n=0;n<t;n++)e.push(d[n].apply(null,arguments));return o.apply(null,e)}));return c.resultFunc=l,c.dependencies=d,c.recomputations=function(){return s},c.resetRecomputations=function(){return s=0},c}}t.__esModule=!0,t.defaultMemoize=s,t.createSelectorCreator=l,t.createStructuredSelector=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;if("object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e);return t(n.map((function(t){return e[t]})),(function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.reduce((function(e,t,a){return e[n[a]]=t,e}),{})}))};var d=t.createSelector=l(s)},function(e,t,n){"use strict";var a,i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),s=[];function r(e){for(var t=-1,n=0;n<s.length;n++)if(s[n].identifier===e){t=n;break}return t}function l(e,t){for(var n={},a=[],i=0;i<e.length;i++){var l=e[i],d=t.base?l[0]+t.base:l[0],o=n[d]||0,c="".concat(d," ").concat(o);n[d]=o+1;var u=r(c),p={css:l[1],media:l[2],sourceMap:l[3]};-1!==u?(s[u].references++,s[u].updater(p)):s.push({identifier:c,updater:m(p,t),references:1}),a.push(c)}return a}function d(e){var t=document.createElement("style"),a=e.attributes||{};if(void 0===a.nonce){var s=n.nc;s&&(a.nonce=s)}if(Object.keys(a).forEach((function(e){t.setAttribute(e,a[e])})),"function"==typeof e.insert)e.insert(t);else{var r=i(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var o,c=(o=[],function(e,t){return o[e]=t,o.filter(Boolean).join("\n")});function u(e,t,n,a){var i=n?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(e.styleSheet)e.styleSheet.cssText=c(t,i);else{var s=document.createTextNode(i),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(s,r[t]):e.appendChild(s)}}function p(e,t,n){var a=n.css,i=n.media,s=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}var f=null,g=0;function m(e,t){var n,a,i;if(t.singleton){var s=g++;n=f||(f=d(t)),a=u.bind(null,n,s,!1),i=u.bind(null,n,s,!0)}else n=d(t),a=p.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return a(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a));var n=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var a=0;a<n.length;a++){var i=r(n[a]);s[i].references--}for(var d=l(e,t),o=0;o<n.length;o++){var c=r(n[o]);0===s[c].references&&(s[c].updater(),s.splice(c,1))}n=d}}}},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,a,i,s=e[1]||"",r=e[3];if(!r)return s;if(t&&"function"==typeof btoa){var l=(n=r,a=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(i," */")),d=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[s].concat(d).concat([l]).join("\n")}return[s].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,a){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(a)for(var s=0;s<this.length;s++){var r=this[s][0];null!=r&&(i[r]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);a&&i[d[0]]||(n&&(d[2]?d[2]="".concat(n," and ").concat(d[2]):d[2]=n),t.push(d))}},t}},function(e,t,n){e.exports=n(10)(42)},function(e,t,n){"use strict";function a(e,t,n,i){var s=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(s,a.prototype),s.expected=t,s.found=n,s.location=i,s.name="SyntaxError",s}function i(e,t,n){return n=n||" ",e.length>t?e:(t-=e.length,e+(n+=n.repeat(t)).slice(0,t))}!function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(a,Error),a.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var n,a=null;for(n=0;n<e.length;n++)if(e[n].source===this.location.source){a=e[n].text.split(/\r\n|\n|\r/g);break}var s=this.location.start,r=this.location.source+":"+s.line+":"+s.column;if(a){var l=this.location.end,d=i("",s.line.toString().length),o=a[s.line-1],c=s.line===l.line?l.column:o.length+1;t+="\n --\x3e "+r+"\n"+d+" |\n"+s.line+" | "+o+"\n"+d+" | "+i("",s.column-1)+i("",c-s.column,"^")}else t+="\n at "+r}return t},a.buildMessage=function(e,t){var n={literal:function(e){return'"'+i(e.text)+'"'},class:function(e){var t=e.parts.map((function(e){return Array.isArray(e)?s(e[0])+"-"+s(e[1]):s(e)}));return"["+(e.inverted?"^":"")+t+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function a(e){return e.charCodeAt(0).toString(16).toUpperCase()}function i(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+a(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+a(e)}))}function s(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+a(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+a(e)}))}function r(e){return n[e.type](e)}return"Expected "+function(e){var t,n,a=e.map(r);if(a.sort(),a.length>0){for(t=1,n=1;t<a.length;t++)a[t-1]!==a[t]&&(a[n]=a[t],n++);a.length=n}switch(a.length){case 1:return a[0];case 2:return a[0]+" or "+a[1];default:return a.slice(0,-1).join(", ")+", or "+a[a.length-1]}}(e)+" but "+function(e){return e?'"'+i(e)+'"':"end of input"}(t)+" found."},e.exports={SyntaxError:a,parse:function(e,t){var n,i={},s=(t=void 0!==t?t:{}).grammarSource,r={start:ue,Literal:Me},l=ue,d='"',o="\\",c="@kuery-cursor@",u=/^[\\"]/,p=/^[^"]/,f=/^[\\():<>"*{}]/,g=/^[0-9a-f]/i,m=/^[ \t\r\n\xA0]/,b=se("(",!1),h=se(")",!1),j=se(":",!1),x=se("{",!1),v=se("}",!1),y=le("fieldName"),O=le("value"),F=le("OR"),M=se("or",!0),E=le("AND"),P=se("and",!0),T=le("NOT"),S=se("not",!0),w=le("literal"),I=se('"',!1),_=se("\\",!1),C=re(["\\",'"'],!1,!1),L=re(['"'],!0,!1),D={type:"any"},N=se("*",!1),A=se("\\t",!1),k=se("\\r",!1),B=se("\\n",!1),R=re(["\\","(",")",":","<",">",'"',"*","{","}"],!1,!1),K=se("u",!1),V=re([["0","9"],["a","f"]],!1,!0),U=se("<=",!1),q=se(">=",!1),H=se("<",!1),Y=se(">",!1),G=le("whitespace"),z=re([" ","\t","\r","\n"," "],!1,!1),W=se("@kuery-cursor@",!1),$=function(e,t){return t},Q=function(e,t){return t},J=function(){return Ae},Z=function(t,n,a){const{start:i,end:s}=oe(ee,X);return{type:"cursor",start:i.offset,end:s.offset-n.length,prefix:t.join(""),suffix:a.join(""),text:e.substring(ee,X).replace(n,"")}},X=0,ee=0,te=[{line:1,column:1}],ne=0,ae=[],ie=0;if("startRule"in t){if(!(t.startRule in r))throw new Error("Can't start parsing from rule \""+t.startRule+'".');l=r[t.startRule]}function se(e,t){return{type:"literal",text:e,ignoreCase:t}}function re(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function le(e){return{type:"other",description:e}}function de(t){var n,a=te[t];if(a)return a;for(n=t-1;!te[n];)n--;for(a={line:(a=te[n]).line,column:a.column};n<t;)10===e.charCodeAt(n)?(a.line++,a.column=1):a.column++,n++;return te[t]=a,a}function oe(e,t){var n=de(e),a=de(t);return{source:s,start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:a.line,column:a.column}}}function ce(e){X<ne||(X>ne&&(ne=X,ae=[]),ae.push(e))}function ue(){var e,t,n,a,s,r;for(e=X,t=[],n=De();n!==i;)t.push(n),n=De();return(n=pe())===i&&(n=null),(a=we())!==i?(ee=e,s=n,e="cursor"===(r=a).type?{...r,suggestionTypes:["conjunction"]}:null!==s?s:Re.function.buildNode("is","*","*")):(X=e,e=i),e}function pe(){var e,t,n,a,s;if(e=X,(t=fe())!==i){if(n=[],a=X,ye()!==i&&(s=fe())!==i?(ee=a,a=$(0,s)):(X=a,a=i),a!==i)for(;a!==i;)n.push(a),a=X,ye()!==i&&(s=fe())!==i?(ee=a,a=$(0,s)):(X=a,a=i);else n=i;n!==i?(ee=e,e=function(e,t){const n=[e,...t];return Ae&&n.find((e=>"cursor"===e.type))||Ke("or",n)}(t,n)):(X=e,e=i)}else X=e,e=i;return e===i&&(e=fe()),e}function fe(){var e,t,n,a,s;if(e=X,(t=ge())!==i){if(n=[],a=X,Oe()!==i&&(s=ge())!==i?(ee=a,a=$(0,s)):(X=a,a=i),a!==i)for(;a!==i;)n.push(a),a=X,Oe()!==i&&(s=ge())!==i?(ee=a,a=$(0,s)):(X=a,a=i);else n=i;n!==i?(ee=e,e=function(e,t){const n=[e,...t];return Ae&&n.find((e=>"cursor"===e.type))||Ke("and",n)}(t,n)):(X=e,e=i)}else X=e,e=i;return e===i&&(e=ge()),e}function ge(){var e,t,n;return e=X,Fe()!==i&&(t=me())!==i?(ee=e,e="cursor"===(n=t).type?n:Ke("not",[n])):(X=e,e=i),e===i&&(e=me()),e}function me(){var t,n,a,s,r,l,d,o;if(t=X,40===e.charCodeAt(X)?(n="(",X++):(n=i,0===ie&&ce(b)),n!==i){for(a=[],s=De();s!==i;)a.push(s),s=De();(s=pe())!==i&&(r=we())!==i?(41===e.charCodeAt(X)?(l=")",X++):(l=i,0===ie&&ce(h)),l!==i?(ee=t,d=s,t="cursor"===(o=r).type?{...o,suggestionTypes:["conjunction"]}:d):(X=t,t=i)):(X=t,t=i)}else X=t,t=i;return t===i&&(t=function(){var t,n,a,s,r,l,d,o,c,u;if(t=X,(n=be())!==i){for(a=[],s=De();s!==i;)a.push(s),s=De();if(58===e.charCodeAt(X)?(s=":",X++):(s=i,0===ie&&ce(j)),s!==i){for(r=[],l=De();l!==i;)r.push(l),l=De();if(123===e.charCodeAt(X)?(l="{",X++):(l=i,0===ie&&ce(x)),l!==i){for(d=[],o=De();o!==i;)d.push(o),o=De();(o=pe())!==i&&(c=we())!==i?(125===e.charCodeAt(X)?(u="}",X++):(u=i,0===ie&&ce(v)),u!==i?(ee=t,t=function(e,t,n){return"cursor"===t.type?{...t,nestedPath:t.nestedPath?`${e.value}.${t.nestedPath}`:e.value}:"cursor"===n.type?{...n,suggestionTypes:["conjunction"]}:Ke("nested",[e,t])}(n,o,c)):(X=t,t=i)):(X=t,t=i)}else X=t,t=i}else X=t,t=i}else X=t,t=i;return t===i&&(t=function(){var t;return t=function(){var t,n,a,s,r,l,d,o,c;if(t=X,(n=be())!==i){for(a=[],s=De();s!==i;)a.push(s),s=De();if(s=function(){var t,n;return t=X,"<="===e.substr(X,2)?(n="<=",X+=2):(n=i,0===ie&&ce(U)),n!==i&&(ee=t,n="lte"),(t=n)===i&&(t=X,">="===e.substr(X,2)?(n=">=",X+=2):(n=i,0===ie&&ce(q)),n!==i&&(ee=t,n="gte"),(t=n)===i&&(t=X,60===e.charCodeAt(X)?(n="<",X++):(n=i,0===ie&&ce(H)),n!==i&&(ee=t,n="lt"),(t=n)===i&&(t=X,62===e.charCodeAt(X)?(n=">",X++):(n=i,0===ie&&ce(Y)),n!==i&&(ee=t,n="gt"),t=n))),t}(),s!==i){for(r=[],l=De();l!==i;)r.push(l),l=De();(l=Me())!==i?(ee=t,d=n,o=s,t="cursor"===(c=l).type?{...c,suggestionTypes:["conjunction"]}:Ke("range",[d,o,c])):(X=t,t=i)}else X=t,t=i}else X=t,t=i;return t}(),t===i&&(t=function(){var t,n,a,s,r,l,d,o;if(t=X,(n=be())!==i){for(a=[],s=De();s!==i;)a.push(s),s=De();if(58===e.charCodeAt(X)?(s=":",X++):(s=i,0===ie&&ce(j)),s!==i){for(r=[],l=De();l!==i;)r.push(l),l=De();(l=he())!==i?(ee=t,d=n,t="cursor"===(o=l).type?{...o,fieldName:d.value,suggestionTypes:["value","conjunction"]}:o(d)):(X=t,t=i)}else X=t,t=i}else X=t,t=i;return t}(),t===i&&(t=function(){var e,t;return e=X,(t=ve())!==i&&(ee=e,t=function(e){if("cursor"===e.type){const t=`${e.prefix}${e.suffix}`.trim();return{...e,fieldName:t,suggestionTypes:["field","operator","conjunction"]}}return e(Ve(null))}(t)),t}())),t}()),t}()),t}function be(){var e;return ie++,e=Me(),ie--,e===i&&0===ie&&ce(y),e}function he(){var t,n,a,s,r,l,d,o;if(t=X,40===e.charCodeAt(X)?(n="(",X++):(n=i,0===ie&&ce(b)),n!==i){for(a=[],s=De();s!==i;)a.push(s),s=De();s=function(){var e,t,n,a,s;if(e=X,(t=je())!==i){if(n=[],a=X,ye()!==i&&(s=je())!==i?(ee=a,a=Q(0,s)):(X=a,a=i),a!==i)for(;a!==i;)n.push(a),a=X,ye()!==i&&(s=je())!==i?(ee=a,a=Q(0,s)):(X=a,a=i);else n=i;n!==i?(ee=e,e=function(e,t){const n=[e,...t],a=Ae&&n.find((e=>"cursor"===e.type));return a?{...a,suggestionTypes:["value"]}:e=>Ke("or",n.map((t=>t(e))))}(t,n)):(X=e,e=i)}else X=e,e=i;return e===i&&(e=je()),e}(),s!==i&&(r=we())!==i?(41===e.charCodeAt(X)?(l=")",X++):(l=i,0===ie&&ce(h)),l!==i?(ee=t,d=s,t="cursor"===(o=r).type?{...o,suggestionTypes:["conjunction"]}:d):(X=t,t=i)):(X=t,t=i)}else X=t,t=i;return t===i&&(t=ve()),t}function je(){var e,t,n,a,s;if(e=X,(t=xe())!==i){if(n=[],a=X,Oe()!==i&&(s=xe())!==i?(ee=a,a=Q(0,s)):(X=a,a=i),a!==i)for(;a!==i;)n.push(a),a=X,Oe()!==i&&(s=xe())!==i?(ee=a,a=Q(0,s)):(X=a,a=i);else n=i;n!==i?(ee=e,e=function(e,t){const n=[e,...t],a=Ae&&n.find((e=>"cursor"===e.type));return a?{...a,suggestionTypes:["value"]}:e=>Ke("and",n.map((t=>t(e))))}(t,n)):(X=e,e=i)}else X=e,e=i;return e===i&&(e=xe()),e}function xe(){var e,t,n;return e=X,Fe()!==i&&(t=he())!==i?(ee=e,e="cursor"===(n=t).type?{...list,suggestionTypes:["value"]}:e=>Ke("not",[n(e)])):(X=e,e=i),e===i&&(e=he()),e}function ve(){var e,t;return ie++,e=X,(t=Ee())!==i&&(ee=e,t=function(e){if("cursor"===e.type)return e;const t=Ve(!0);return n=>Ke("is",[n,e,t])}(t)),(e=t)===i&&(e=X,(t=Te())!==i&&(ee=e,t=function(e){if("cursor"===e.type)return e;!Be&&"wildcard"===e.type&&Re.wildcard.hasLeadingWildcard(e)&&function(e,t){throw function(e,t){return new a("Leading wildcards are disabled. See query:allowLeadingWildcards in Advanced Settings.",null,null,t)}(0,t=void 0!==t?t:oe(ee,X))}();const t=Ve(!1);return n=>Ke("is",[n,e,t])}(t)),e=t),ie--,e===i&&(t=i,0===ie&&ce(O)),e}function ye(){var t,n,a,s,r;if(ie++,t=X,n=[],(a=De())!==i)for(;a!==i;)n.push(a),a=De();else n=i;if(n!==i)if("or"===e.substr(X,2).toLowerCase()?(a=e.substr(X,2),X+=2):(a=i,0===ie&&ce(M)),a!==i){if(s=[],(r=De())!==i)for(;r!==i;)s.push(r),r=De();else s=i;s!==i?t=n=[n,a,s]:(X=t,t=i)}else X=t,t=i;else X=t,t=i;return ie--,t===i&&(n=i,0===ie&&ce(F)),t}function Oe(){var t,n,a,s,r;if(ie++,t=X,n=[],(a=De())!==i)for(;a!==i;)n.push(a),a=De();else n=i;if(n!==i)if("and"===e.substr(X,3).toLowerCase()?(a=e.substr(X,3),X+=3):(a=i,0===ie&&ce(P)),a!==i){if(s=[],(r=De())!==i)for(;r!==i;)s.push(r),r=De();else s=i;s!==i?t=n=[n,a,s]:(X=t,t=i)}else X=t,t=i;else X=t,t=i;return ie--,t===i&&(n=i,0===ie&&ce(E)),t}function Fe(){var t,n,a,s;if(ie++,t=X,"not"===e.substr(X,3).toLowerCase()?(n=e.substr(X,3),X+=3):(n=i,0===ie&&ce(S)),n!==i){if(a=[],(s=De())!==i)for(;s!==i;)a.push(s),s=De();else a=i;a!==i?t=n=[n,a]:(X=t,t=i)}else X=t,t=i;return ie--,t===i&&(n=i,0===ie&&ce(T)),t}function Me(){var e;return ie++,(e=Ee())===i&&(e=Te()),ie--,e===i&&0===ie&&ce(w),e}function Ee(){var t,n,a,s,r,l,o;if(t=X,ee=X,(n=(n=J())?void 0:i)!==i)if(34===e.charCodeAt(X)?(a=d,X++):(a=i,0===ie&&ce(I)),a!==i){for(s=[],r=Pe();r!==i;)s.push(r),r=Pe();if((r=Ne())!==i){for(l=[],o=Pe();o!==i;)l.push(o),o=Pe();34===e.charCodeAt(X)?(o=d,X++):(o=i,0===ie&&ce(I)),o!==i?(ee=t,t=Z(s,r,l)):(X=t,t=i)}else X=t,t=i}else X=t,t=i;else X=t,t=i;if(t===i)if(t=X,34===e.charCodeAt(X)?(n=d,X++):(n=i,0===ie&&ce(I)),n!==i){for(a=[],s=Pe();s!==i;)a.push(s),s=Pe();34===e.charCodeAt(X)?(s=d,X++):(s=i,0===ie&&ce(I)),s!==i?(ee=t,t=Ve(a.join(""))):(X=t,t=i)}else X=t,t=i;return t}function Pe(){var t,n,a;return(t=Ie())===i&&(t=Ce())===i&&(t=X,92===e.charCodeAt(X)?(n=o,X++):(n=i,0===ie&&ce(_)),n!==i?(u.test(e.charAt(X))?(a=e.charAt(X),X++):(a=i,0===ie&&ce(C)),a!==i?(ee=t,t=a):(X=t,t=i)):(X=t,t=i),t===i&&(t=X,n=X,ie++,a=Ne(),ie--,a===i?n=void 0:(X=n,n=i),n!==i?(p.test(e.charAt(X))?(a=e.charAt(X),X++):(a=i,0===ie&&ce(L)),a!==i?(ee=t,t=a):(X=t,t=i)):(X=t,t=i))),t}function Te(){var e,t,n,a,s,r;if(e=X,ee=X,(t=(t=J())?void 0:i)!==i){for(n=[],a=Se();a!==i;)n.push(a),a=Se();if((a=Ne())!==i){for(s=[],r=Se();r!==i;)s.push(r),r=Se();ee=e,e=Z(n,a,s)}else X=e,e=i}else X=e,e=i;if(e===i){if(e=X,t=[],(n=Se())!==i)for(;n!==i;)t.push(n),n=Se();else t=i;t!==i&&(ee=e,t=function(e){const t=e.join("").trim();return"null"===t?Ve(null):"true"===t?Ve(!0):"false"===t?Ve(!1):e.includes(qe)?Ue(t):Ve(t)}(t)),e=t}return e}function Se(){var t,n,a,s,r;return(t=Ie())===i&&(t=function(){var t,n,a;return t=X,92===e.charCodeAt(X)?(n=o,X++):(n=i,0===ie&&ce(_)),n!==i&&(a=_e())!==i?(ee=t,t=a):(X=t,t=i),t}(),t===i&&(t=Ce())===i&&(t=function(){var t,n,a;return t=X,92===e.charCodeAt(X)?(n=o,X++):(n=i,0===ie&&ce(_)),n!==i?("or"===e.substr(X,2).toLowerCase()?(a=e.substr(X,2),X+=2):(a=i,0===ie&&ce(M)),a===i&&("and"===e.substr(X,3).toLowerCase()?(a=e.substr(X,3),X+=3):(a=i,0===ie&&ce(P)),a===i&&("not"===e.substr(X,3).toLowerCase()?(a=e.substr(X,3),X+=3):(a=i,0===ie&&ce(S)))),a!==i?(ee=t,t=a):(X=t,t=i)):(X=t,t=i),t}(),t===i&&(t=function(){var t,n;return t=X,42===e.charCodeAt(X)?(n="*",X++):(n=i,0===ie&&ce(N)),n!==i&&(ee=t,n=qe),n}(),t===i&&(t=X,n=X,ie++,a=_e(),ie--,a===i?n=void 0:(X=n,n=i),n!==i?(a=X,ie++,s=function(){var e;return(e=ye())===i&&(e=Oe())===i&&(e=Fe()),e}(),ie--,s===i?a=void 0:(X=a,a=i),a!==i?(s=X,ie++,r=Ne(),ie--,r===i?s=void 0:(X=s,s=i),s!==i?(e.length>X?(r=e.charAt(X),X++):(r=i,0===ie&&ce(D)),r!==i?(ee=t,t=r):(X=t,t=i)):(X=t,t=i)):(X=t,t=i)):(X=t,t=i))))),t}function we(){var e,t,n,a,s,r;if(e=X,ee=X,(t=(t=J())?void 0:i)!==i){for(n=[],a=De();a!==i;)n.push(a),a=De();if((a=Ne())!==i){for(s=[],r=De();r!==i;)s.push(r),r=De();ee=e,e=Z(n,a,s)}else X=e,e=i}else X=e,e=i;if(e===i)for(e=[],t=De();t!==i;)e.push(t),t=De();return e}function Ie(){var t,n;return t=X,"\\t"===e.substr(X,2)?(n="\\t",X+=2):(n=i,0===ie&&ce(A)),n!==i&&(ee=t,n="\t"),(t=n)===i&&(t=X,"\\r"===e.substr(X,2)?(n="\\r",X+=2):(n=i,0===ie&&ce(k)),n!==i&&(ee=t,n="\r"),(t=n)===i&&(t=X,"\\n"===e.substr(X,2)?(n="\\n",X+=2):(n=i,0===ie&&ce(B)),n!==i&&(ee=t,n="\n"),t=n)),t}function _e(){var t;return f.test(e.charAt(X))?(t=e.charAt(X),X++):(t=i,0===ie&&ce(R)),t}function Ce(){var t,n,a;return t=X,92===e.charCodeAt(X)?(n=o,X++):(n=i,0===ie&&ce(_)),n!==i?(a=function(){var t,n,a,s,r,l,d,o,c;return t=X,117===e.charCodeAt(X)?(n="u",X++):(n=i,0===ie&&ce(K)),n!==i?(a=X,s=X,(r=Le())!==i&&(l=Le())!==i&&(d=Le())!==i&&(o=Le())!==i?s=r=[r,l,d,o]:(X=s,s=i),(a=s!==i?e.substring(a,X):s)!==i?(ee=t,c=a,t=String.fromCharCode(parseInt(c,16))):(X=t,t=i)):(X=t,t=i),t}(),a!==i?(ee=t,t=a):(X=t,t=i)):(X=t,t=i),t}function Le(){var t;return g.test(e.charAt(X))?(t=e.charAt(X),X++):(t=i,0===ie&&ce(V)),t}function De(){var t;return ie++,m.test(e.charAt(X))?(t=e.charAt(X),X++):(t=i,0===ie&&ce(z)),ie--,t===i&&0===ie&&ce(G),t}function Ne(){var t,n;return t=X,ee=X,(J()?void 0:i)!==i?(e.substr(X,14)===c?(n=c,X+=14):(n=i,0===ie&&ce(W)),n!==i?(ee=t,t=ke):(X=t,t=i)):(X=t,t=i),t}const{parseCursor:Ae,cursorSymbol:ke,allowLeadingWildcards:Be=!0,helpers:{nodeTypes:Re}}=t,Ke=Re.function.buildNodeWithArgumentNodes,Ve=Re.literal.buildNode,Ue=Re.wildcard.buildNode,{wildcardSymbol:qe}=Re.wildcard;if((n=l())!==i&&X===e.length)return n;throw n!==i&&X<e.length&&ce({type:"end"}),He=ae,Ye=ne<e.length?e.charAt(ne):null,Ge=ne<e.length?oe(ne,ne+1):oe(ne,ne),new a(a.buildMessage(He,Ye),He,Ye,Ge);var He,Ye,Ge}}},function(e,t,n){"use strict";var a=n(44);Object.defineProperty(t,"__esModule",{value:!0}),t.KbnFieldType=void 0;var i=a(n(20)),s=n(23);t.KbnFieldType=class KbnFieldType{constructor(e={}){(0,i.default)(this,"name",void 0),(0,i.default)(this,"sortable",void 0),(0,i.default)(this,"filterable",void 0),(0,i.default)(this,"esTypes",void 0),this.name=e.name||s.KBN_FIELD_TYPES.UNKNOWN,this.sortable=e.sortable||!1,this.filterable=e.filterable||!1,this.esTypes=Object.freeze((e.esTypes||[]).slice())}}},function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(33);case"v8light":return n(35)}},function(e,t,n){var a=n(27),i=n(34);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,n){(t=n(28)(!1)).push([e.i,".testScript__searchBar .globalQueryBar{padding:16px 0 0}\n",""]),e.exports=t},function(e,t,n){var a=n(27),i=n(36);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,n){(t=n(28)(!1)).push([e.i,".testScript__searchBar .globalQueryBar{padding:16px 0 0}\n",""]),e.exports=t},function(e,t,n){e.exports=n(10)(16)},function(e,t,n){e.exports=n(10)(14)},function(e,t,n){e.exports=n(10)(4)},function(e,t,n){e.exports=n(10)(19)},function(e,t,n){e.exports=n(10)(2468)},function(e,t,n){e.exports=n(10)(2476)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ES_FIELD_TYPES",{enumerable:!0,get:function(){return s.ES_FIELD_TYPES}}),Object.defineProperty(t,"KBN_FIELD_TYPES",{enumerable:!0,get:function(){return s.KBN_FIELD_TYPES}}),Object.defineProperty(t,"KbnFieldType",{enumerable:!0,get:function(){return a.KbnFieldType}}),Object.defineProperty(t,"castEsToKbnFieldTypeName",{enumerable:!0,get:function(){return i.castEsToKbnFieldTypeName}}),Object.defineProperty(t,"getFilterableKbnTypeNames",{enumerable:!0,get:function(){return i.getFilterableKbnTypeNames}}),Object.defineProperty(t,"getKbnFieldType",{enumerable:!0,get:function(){return i.getKbnFieldType}}),Object.defineProperty(t,"getKbnTypeNames",{enumerable:!0,get:function(){return i.getKbnTypeNames}});var a=n(31),i=n(45),s=n(23)},function(e,t,n){e.exports=n(10)(2469)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getKbnTypeNames=t.getKbnFieldType=t.getFilterableKbnTypeNames=t.castEsToKbnFieldTypeName=void 0;var a=n(46),i=n(23);const s=(0,a.createKbnFieldTypes)();t.getKbnFieldType=e=>s.find((t=>t.name===e))||a.kbnFieldTypeUnknown,t.getKbnTypeNames=()=>s.filter((e=>e.name)).map((e=>e.name)),t.castEsToKbnFieldTypeName=e=>{const t=s.find((t=>t.esTypes.includes(e)));return t&&t.name?t.name:i.KBN_FIELD_TYPES.UNKNOWN},t.getFilterableKbnTypeNames=()=>s.filter((e=>e.filterable)).map((e=>e.name))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.kbnFieldTypeUnknown=t.createKbnFieldTypes=void 0;var a=n(31),i=n(23);const s=new a.KbnFieldType({name:i.KBN_FIELD_TYPES.UNKNOWN});t.kbnFieldTypeUnknown=s,t.createKbnFieldTypes=()=>[new a.KbnFieldType({name:i.KBN_FIELD_TYPES.STRING,sortable:!0,filterable:!0,esTypes:[i.ES_FIELD_TYPES.STRING,i.ES_FIELD_TYPES.TEXT,i.ES_FIELD_TYPES.KEYWORD,i.ES_FIELD_TYPES.VERSION,i.ES_FIELD_TYPES._TYPE,i.ES_FIELD_TYPES._ID]}),new a.KbnFieldType({name:i.KBN_FIELD_TYPES.NUMBER,sortable:!0,filterable:!0,esTypes:[i.ES_FIELD_TYPES.FLOAT,i.ES_FIELD_TYPES.HALF_FLOAT,i.ES_FIELD_TYPES.SCALED_FLOAT,i.ES_FIELD_TYPES.DOUBLE,i.ES_FIELD_TYPES.INTEGER,i.ES_FIELD_TYPES.LONG,i.ES_FIELD_TYPES.UNSIGNED_LONG,i.ES_FIELD_TYPES.SHORT,i.ES_FIELD_TYPES.BYTE,i.ES_FIELD_TYPES.TOKEN_COUNT]}),new a.KbnFieldType({name:i.KBN_FIELD_TYPES.NUMBER_RANGE,sortable:!0,filterable:!0,esTypes:[i.ES_FIELD_TYPES.FLOAT_RANGE,i.ES_FIELD_TYPES.DOUBLE_RANGE,i.ES_FIELD_TYPES.INTEGER_RANGE,i.ES_FIELD_TYPES.LONG_RANGE]}),new a.KbnFieldType({name:i.KBN_FIELD_TYPES.DATE,sortable:!0,filterable:!0,esTypes:[i.ES_FIELD_TYPES.DATE,i.ES_FIELD_TYPES.DATE_NANOS]}),new a.KbnFieldType({name:i.KBN_FIELD_TYPES.DATE_RANGE,sortable:!0,filterable:!0,esTypes:[i.ES_FIELD_TYPES.DATE_RANGE]}),new a.KbnFieldType({name:i.KBN_FIELD_TYPES.IP,sortable:!0,filterable:!0,esTypes:[i.ES_FIELD_TYPES.IP]}),new a.KbnFieldType({name:i.KBN_FIELD_TYPES.IP_RANGE,sortable:!0,filterable:!0,esTypes:[i.ES_FIELD_TYPES.IP_RANGE]}),new a.KbnFieldType({name:i.KBN_FIELD_TYPES.BOOLEAN,sortable:!0,filterable:!0,esTypes:[i.ES_FIELD_TYPES.BOOLEAN]}),new a.KbnFieldType({name:i.KBN_FIELD_TYPES.OBJECT,esTypes:[i.ES_FIELD_TYPES.OBJECT]}),new a.KbnFieldType({name:i.KBN_FIELD_TYPES.NESTED,esTypes:[i.ES_FIELD_TYPES.NESTED]}),new a.KbnFieldType({name:i.KBN_FIELD_TYPES.GEO_POINT,esTypes:[i.ES_FIELD_TYPES.GEO_POINT]}),new a.KbnFieldType({name:i.KBN_FIELD_TYPES.GEO_SHAPE,esTypes:[i.ES_FIELD_TYPES.GEO_SHAPE]}),new a.KbnFieldType({name:i.KBN_FIELD_TYPES.ATTACHMENT,esTypes:[i.ES_FIELD_TYPES.ATTACHMENT]}),new a.KbnFieldType({name:i.KBN_FIELD_TYPES.MURMUR3,esTypes:[i.ES_FIELD_TYPES.MURMUR3]}),new a.KbnFieldType({name:i.KBN_FIELD_TYPES._SOURCE,esTypes:[i.ES_FIELD_TYPES._SOURCE]}),new a.KbnFieldType({name:i.KBN_FIELD_TYPES.HISTOGRAM,filterable:!0,esTypes:[i.ES_FIELD_TYPES.HISTOGRAM]}),new a.KbnFieldType({name:i.KBN_FIELD_TYPES.CONFLICT}),s]},function(e,t,n){"use strict";n.r(t),n.d(t,"mountManagementSection",(function(){return fa}));var a={};n.r(a),n.d(a,"buildNode",(function(){return Ct})),n.d(a,"toElasticsearchQuery",(function(){return Lt}));var i={};n.r(i),n.d(i,"wildcardSymbol",(function(){return Dt})),n.d(i,"buildNode",(function(){return kt})),n.d(i,"test",(function(){return Bt})),n.d(i,"toElasticsearchQuery",(function(){return Rt})),n.d(i,"toQueryStringQuery",(function(){return Kt})),n.d(i,"hasLeadingWildcard",(function(){return Vt}));var s={};n.r(s),n.d(s,"buildNodeParams",(function(){return Wt})),n.d(s,"toElasticsearchQuery",(function(){return $t}));var r={};n.r(r),n.d(r,"buildNodeParams",(function(){return Qt})),n.d(r,"toElasticsearchQuery",(function(){return Jt}));var l={};n.r(l),n.d(l,"buildNodeParams",(function(){return Zt})),n.d(l,"toElasticsearchQuery",(function(){return Xt}));var d={};n.r(d),n.d(d,"buildNodeParams",(function(){return en})),n.d(d,"toElasticsearchQuery",(function(){return tn}));var o={};n.r(o),n.d(o,"buildNodeParams",(function(){return nn})),n.d(o,"toElasticsearchQuery",(function(){return an}));var c={};n.r(c),n.d(c,"buildNodeParams",(function(){return sn})),n.d(c,"toElasticsearchQuery",(function(){return rn}));var u={};n.r(u),n.d(u,"buildNodeParams",(function(){return ln})),n.d(u,"toElasticsearchQuery",(function(){return dn}));var p={};n.r(p),n.d(p,"buildNode",(function(){return cn})),n.d(p,"buildNodeWithArgumentNodes",(function(){return un})),n.d(p,"toElasticsearchQuery",(function(){return pn}));var f=n(4),g=n.n(f),m=n(14),b=n.n(m),h=n(11),j=n(0),x=n(8),v=n(9),y=n(6);const O=j.i18n.translate("indexPatternManagement.editIndexPattern.list.defaultIndexPatternListName",{defaultMessage:"Default"}),F=j.i18n.translate("indexPatternManagement.editIndexPattern.list.rollupIndexPatternListName",{defaultMessage:"Rollup"}),M=(e="")=>"rollup"===e,E=(e,t)=>{const n=[];return t&&n.push({key:"default",name:O}),M(e.type)&&n.push({key:"rollup",name:F}),n},P=(e,t)=>{var n;if(!M(e.type))return[];const a=null===(n=e.typeMeta)||void 0===n?void 0:n.aggs,i=a&&Object.keys(a).filter((e=>a[e][t.name]));return i&&i.length?["Rollup aggregations:"].concat(i.map((e=>{const n=a[e][t.name];switch(e){case"date_histogram":return j.i18n.translate("indexPatternManagement.editIndexPattern.list.dateHistogramSummary",{defaultMessage:"{aggName} (interval: {interval}, {delay} {time_zone})",values:{aggName:e,interval:n.fixed_interval,delay:n.delay?j.i18n.translate("indexPatternManagement.editIndexPattern.list.DateHistogramDelaySummary",{defaultMessage:"delay: {delay},",values:{delay:n.delay}}):"",time_zone:n.time_zone}});case"histogram":return j.i18n.translate("indexPatternManagement.editIndexPattern.list.histogramSummary",{defaultMessage:"{aggName} (interval: {interval})",values:{aggName:e,interval:n.interval}});default:return e}}))):[]};function T(){return[{text:j.i18n.translate("indexPatternManagement.dataViews.listBreadcrumb",{defaultMessage:"Data views"}),href:"/"}]}function S(e){return[...T(),{text:e.title,href:`/patterns/${e.id}`}]}var w=n(25),I=n.n(w),_=n(12),C=n(5);const L=j.i18n.translate("indexPatternManagement.indexPatternTable.savedObjectName",{defaultMessage:"data view"}),D=({spacesApi:e,capabilities:t,spaceIds:n,id:a,title:i,refresh:s})=>{const[r,l]=Object(f.useState)(!1),d=e.ui.components.getSpaceList,o=e.ui.components.getShareToSpaceFlyout,c={savedObjectTarget:{type:_.DATA_VIEW_SAVED_OBJECT_TYPE,namespaces:n,id:a,title:i,noun:L},onUpdate:s,onClose:function(){l(!1)}},u=!t||t.savedObjectsManagement.shareIntoSpace?{cursorStyle:"pointer",listOnClick:()=>l(!0)}:{cursorStyle:"not-allowed"};return Object(C.jsx)(g.a.Fragment,null,Object(C.jsx)(d,I()({namespaces:n,displayLimit:8,behaviorContext:"outside-space"},u)),r&&Object(C.jsx)(o,c))};var N=n(13),A=n(15);const k="indexedFields",B="scriptedFields",R="sourceFilters";var K=n(20),V=n.n(K),U=n(26);const q=j.i18n.translate("indexPatternManagement.editIndexPattern.sourcePlaceholder",{defaultMessage:"field filter, accepts wildcards (e.g., `user*` to filter fields starting with 'user')"}),H=({onAddFilter:e})=>{const[t,n]=Object(f.useState)(""),a=Object(f.useCallback)((()=>{e(t),n("")}),[t,e]);return Object(C.jsx)(y.EuiFlexGroup,null,Object(C.jsx)(y.EuiFlexItem,{grow:10},Object(C.jsx)(y.EuiFieldText,{fullWidth:!0,value:t,onChange:e=>n(e.target.value.trim()),placeholder:q})),Object(C.jsx)(y.EuiFlexItem,null,Object(C.jsx)(y.EuiButton,{isDisabled:0===t.length,onClick:a},Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.editIndexPattern.source.addButtonLabel",defaultMessage:"Add"}))))},Y=({filterToDeleteValue:e,onCancelConfirmationModal:t,onDeleteFilter:n})=>Object(C.jsx)(y.EuiConfirmModal,{title:Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.editIndexPattern.source.deleteSourceFilterLabel",defaultMessage:"Delete field filter '{value}'?",values:{value:e}}),onCancel:t,onConfirm:n,cancelButtonText:Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.editIndexPattern.source.deleteFilter.cancelButtonLabel",defaultMessage:"Cancel"}),buttonColor:"danger",confirmButtonText:Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.editIndexPattern.source.deleteFilter.deleteButtonLabel",defaultMessage:"Delete"}),defaultFocusedButton:y.EUI_MODAL_CONFIRM_BUTTON}),G=()=>Object(C.jsx)(g.a.Fragment,null,Object(C.jsx)(y.EuiText,{size:"s"},Object(C.jsx)("p",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.editIndexPattern.sourceLabel",defaultMessage:"Field filters can be used to exclude one or more fields when fetching a document. This happens when viewing a document in the Discover app, or with a table displaying results from a saved search in the Dashboard app. If you have documents with large or unimportant fields you may benefit from filtering those out at this lower level."})),Object(C.jsx)("p",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.editIndexPattern.source.noteLabel",defaultMessage:"Note that multi-fields will incorrectly appear as matches in the table below. These filters only actually apply to fields in the original source document, so matching multi-fields are not actually being filtered."}))),Object(C.jsx)(y.EuiSpacer,{size:"s"})),z=j.i18n.translate("indexPatternManagement.editIndexPattern.source.table.filterHeader",{defaultMessage:"Filter"}),W=j.i18n.translate("indexPatternManagement.editIndexPattern.source.table.filterDescription",{defaultMessage:"Filter name"}),$=j.i18n.translate("indexPatternManagement.editIndexPattern.source.table.matchesHeader",{defaultMessage:"Matches"}),Q=j.i18n.translate("indexPatternManagement.editIndexPattern.source.table.matchesDescription",{defaultMessage:"Language used for the field"}),J=j.i18n.translate("indexPatternManagement.editIndexPattern.source.table.editAria",{defaultMessage:"Edit"}),Z=j.i18n.translate("indexPatternManagement.editIndexPattern.source.table.saveAria",{defaultMessage:"Save"}),X=j.i18n.translate("indexPatternManagement.editIndexPattern.source.table.deleteAria",{defaultMessage:"Delete"}),ee=j.i18n.translate("indexPatternManagement.editIndexPattern.source.table.cancelAria",{defaultMessage:"Cancel"});class table_Table extends f.Component{constructor(e){super(e),V()(this,"startEditingFilter",((e,t)=>this.setState({editingFilterId:e,editingFilterValue:t}))),V()(this,"stopEditingFilter",(()=>this.setState({editingFilterId:""}))),V()(this,"onEditingFilterChange",(e=>this.setState({editingFilterValue:e.target.value}))),V()(this,"onEditFieldKeyDown",(({key:e})=>{y.keys.ENTER===e&&this.state.editingFilterId&&this.state.editingFilterValue&&(this.props.saveFilter({clientId:this.state.editingFilterId,value:this.state.editingFilterValue}),this.stopEditingFilter()),y.keys.ESCAPE===e&&this.stopEditingFilter()})),this.state={editingFilterId:"",editingFilterValue:""}}getColumns(){const{deleteFilter:e,fieldWildcardMatcher:t,indexPattern:n,saveFilter:a}=this.props;return[{field:"value",name:z,description:W,dataType:"string",sortable:!0,render:(e,t)=>this.state.editingFilterId&&this.state.editingFilterId===t.clientId?Object(C.jsx)(y.EuiFieldText,{autoFocus:!0,value:this.state.editingFilterValue,onChange:this.onEditingFilterChange,onKeyDown:this.onEditFieldKeyDown}):Object(C.jsx)("span",null,e)},{field:"value",name:$,description:Q,dataType:"string",sortable:!0,render:(e,a)=>{const i=t([this.state.editingFilterId===a.clientId?this.state.editingFilterValue:e]),s=n.getNonScriptedFields().map((e=>e.name)).filter(i).sort();return s.length?Object(C.jsx)("span",null,s.join(", ")):Object(C.jsx)("em",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.editIndexPattern.source.table.notMatchedLabel",defaultMessage:"The source filter doesn't match any known fields."}))}},{name:"",align:y.RIGHT_ALIGNMENT,width:"100",render:t=>this.state.editingFilterId===t.clientId?Object(C.jsx)(g.a.Fragment,null,Object(C.jsx)(y.EuiButtonIcon,{size:"s",onClick:()=>{a({clientId:this.state.editingFilterId,value:this.state.editingFilterValue}),this.stopEditingFilter()},iconType:"checkInCircleFilled","aria-label":Z}),Object(C.jsx)(y.EuiButtonIcon,{size:"s",onClick:()=>{this.stopEditingFilter()},iconType:"cross","aria-label":ee})):Object(C.jsx)(g.a.Fragment,null,Object(C.jsx)(y.EuiButtonIcon,{size:"s",onClick:()=>this.startEditingFilter(t.clientId,t.value),iconType:"pencil","aria-label":J}),Object(C.jsx)(y.EuiButtonIcon,{size:"s",color:"danger",onClick:()=>e(t),iconType:"trash","aria-label":X}))}]}render(){const{items:e,isSaving:t}=this.props,n=this.getColumns();return Object(C.jsx)(y.EuiInMemoryTable,{loading:t,items:e,columns:n,pagination:{initialPageSize:10,pageSizeOptions:[5,10,25,50]},sorting:!0})}}class source_filters_table_SourceFiltersTable extends f.Component{constructor(e){super(e),V()(this,"clientSideId",0),V()(this,"updateFilters",(()=>{const e=(this.props.indexPattern.sourceFilters||[]).map((e=>({...e,clientId:++this.clientSideId})));this.setState({filters:e})})),V()(this,"getFilteredFilters",Object(U.createSelector)((e=>e.filters),((e,t)=>t.filterFilter),((e,t)=>{if(t){const n=t.toLowerCase();return e.filter((e=>e.value.toLowerCase().includes(n)))}return e}))),V()(this,"startDeleteFilter",(e=>{this.setState({filterToDelete:e,isDeleteConfirmationModalVisible:!0})})),V()(this,"hideDeleteConfirmationModal",(()=>{this.setState({filterToDelete:void 0,isDeleteConfirmationModalVisible:!1})})),V()(this,"deleteFilter",(async()=>{const{indexPattern:e,onAddOrRemoveFilter:t,saveIndexPattern:n}=this.props,{filterToDelete:a,filters:i}=this.state;e.sourceFilters=i.filter((e=>e.clientId!==a.clientId)),this.setState({isSaving:!0}),await n(e),t&&t(),this.updateFilters(),this.setState({isSaving:!1}),this.hideDeleteConfirmationModal()})),V()(this,"onAddFilter",(async e=>{const{indexPattern:t,onAddOrRemoveFilter:n,saveIndexPattern:a}=this.props;t.sourceFilters=[...t.sourceFilters||[],{value:e}],this.setState({isSaving:!0}),await a(t),n&&n(),this.updateFilters(),this.setState({isSaving:!1})})),V()(this,"saveFilter",(async({clientId:e,value:t})=>{const{indexPattern:n,saveIndexPattern:a}=this.props,{filters:i}=this.state;n.sourceFilters=i.map((n=>n.clientId===e?{value:t,clientId:e}:n)),this.setState({isSaving:!0}),await a(n),this.updateFilters(),this.setState({isSaving:!1})})),this.state={filterToDelete:void 0,isDeleteConfirmationModalVisible:!1,isSaving:!1,filters:[]}}UNSAFE_componentWillMount(){this.updateFilters()}render(){const{indexPattern:e,fieldWildcardMatcher:t}=this.props,{isSaving:n,filterToDelete:a}=this.state,i=this.getFilteredFilters(this.state,this.props);return Object(C.jsx)(g.a.Fragment,null,Object(C.jsx)(G,null),Object(C.jsx)(H,{onAddFilter:this.onAddFilter}),Object(C.jsx)(y.EuiSpacer,{size:"l"}),Object(C.jsx)(table_Table,{isSaving:n,indexPattern:e,items:i,fieldWildcardMatcher:t,deleteFilter:this.startDeleteFilter,saveFilter:this.saveFilter}),a&&Object(C.jsx)(Y,{filterToDeleteValue:a.value,onCancelConfirmationModal:this.hideDeleteConfirmationModal,onDeleteFilter:this.deleteFilter}))}}const te=e=>{var t;return!e.isMapped&&e.isUserEditable&&"composite"!==(null===(t=e.runtimeField)||void 0===t?void 0:t.type)},ne=j.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.additionalInfoAriaLabel",{defaultMessage:"Additional field information"}),ae=j.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.conflictDetailIconAria",{defaultMessage:"Conflict Detail"}),ie=j.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.primaryTimeAriaLabel",{defaultMessage:"Primary time field"}),se=j.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.primaryTimeTooltip",{defaultMessage:"This field represents the time that events occurred."}),re=j.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.nameHeader",{defaultMessage:"Name"}),le=j.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.typeHeader",{defaultMessage:"Type"}),de=j.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.formatHeader",{defaultMessage:"Format"}),oe=j.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.searchableHeader",{defaultMessage:"Searchable"}),ce=j.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.searchableDescription",{defaultMessage:"These fields can be used in the filter bar"}),ue=j.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.isSearchableAria",{defaultMessage:"Is searchable"}),pe=j.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.aggregatableLabel",{defaultMessage:"Aggregatable"}),fe=j.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.aggregatableDescription",{defaultMessage:"These fields can be used in visualization aggregations"}),ge=j.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.isAggregatableAria",{defaultMessage:"Is aggregatable"}),me=j.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.excludedLabel",{defaultMessage:"Excluded"}),be=j.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.excludedDescription",{defaultMessage:"Fields that are excluded from _source when it is fetched"}),he=j.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.isExcludedAria",{defaultMessage:"Is excluded"}),je=j.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.editLabel",{defaultMessage:"Edit"}),xe=j.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.editDescription",{defaultMessage:"Edit"}),ve=j.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.deleteLabel",{defaultMessage:"Delete"}),ye=j.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.deleteDescription",{defaultMessage:"Delete"}),Oe=j.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.customLabelTooltip",{defaultMessage:"A custom label for the field."}),Fe=j.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.runtimeIconTipTitle",{defaultMessage:"Runtime field"}),Me=j.i18n.translate("indexPatternManagement.editDataView.fields.table.runtimeIconTipText",{defaultMessage:"This field exists on the data view only."}),Ee=j.i18n.translate("indexPatternManagement.editDataView.fields.table.conflictType",{defaultMessage:"Conflict"}),Pe=e=>{const t=[];return Object.keys(e).forEach((n=>{t.push({type:n,indices:e[n].slice(0,99).join(", ")})})),t},Te=[{field:"type",name:j.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.conflictModalTypeColumn",{defaultMessage:"Type"})},{field:"indices",name:j.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.conflictModalIndicesColumn",{defaultMessage:"Indices"})}];class table_table_Table extends f.PureComponent{renderBooleanTemplate(e,t){return e?Object(C.jsx)(y.EuiIcon,{type:"dot",color:"success","aria-label":t}):Object(C.jsx)("span",null)}renderFieldType(e,t){const n=t.conflictDescriptions&&t.conflictDescriptions[t.name];return Object(C.jsx)("span",null,"conflict"===e&&n?"":e,t.conflictDescriptions?((e,t,n,a)=>{const i=()=>{const i=n(Object(v.toMountPoint)((({closeFn:e,fieldName:t,conflictDescriptions:n})=>Object(C.jsx)(g.a.Fragment,null,Object(C.jsx)(y.EuiModalHeader,null,Object(C.jsx)(y.EuiModalHeaderTitle,null,Object(C.jsx)("h1",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.editIndexPattern.fields.conflictModal.title",defaultMessage:"This field has a type conflict"})))),Object(C.jsx)(y.EuiModalBody,null,Object(C.jsx)(y.EuiText,null,Object(C.jsx)("p",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.editIndexPattern.fields.conflictModal.description",defaultMessage:"The type of the {fieldName} field changes across indices and might not be available for search, visualizations, and other analysis.",values:{fieldName:Object(C.jsx)(y.EuiCode,null,t)}})),Object(C.jsx)(y.EuiBasicTable,{tableCaption:"Demo of EuiBasicTable",items:Pe(n),rowHeader:"firstName",columns:Te,tableLayout:"auto"}))),Object(C.jsx)(y.EuiModalFooter,null,Object(C.jsx)(y.EuiButton,{onClick:e,fill:!0},Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.editIndexPattern.fields.conflictModal.closeBtn",defaultMessage:"Close"})))))({closeFn:()=>{i.close()},fieldName:e,conflictDescriptions:t}),{theme$:a.theme$}))};return Object(C.jsx)("span",null,Object(C.jsx)(y.EuiBadge,{color:"warning",iconType:"alert",onClick:i,iconOnClick:i,iconOnClickAriaLabel:ae,onClickAriaLabel:ae},Ee))})(t.name,t.conflictDescriptions,this.props.openModal,this.props.theme):"")}render(){const{items:e,editField:t,deleteField:n,indexPattern:a}=this.props,i=[{field:"displayName",name:re,dataType:"string",sortable:!0,render:(e,t)=>((e,t)=>Object(C.jsx)("span",null,e.name,e.info&&e.info.length?Object(C.jsx)("span",null," ",Object(C.jsx)(y.EuiIconTip,{type:"questionInCircle",color:"primary","aria-label":ne,content:e.info.map(((e,t)=>Object(C.jsx)("div",{key:t},e)))})):null,t===e.name?Object(C.jsx)("span",null," ",Object(C.jsx)(y.EuiIconTip,{type:"clock",color:"primary","aria-label":ie,content:se})):null,!e.isMapped&&e.hasRuntime?Object(C.jsx)("span",null," ",Object(C.jsx)(y.EuiIconTip,{type:"indexRuntime",title:Fe,content:Object(C.jsx)("span",null,Me)})):null,e.customLabel&&e.customLabel!==e.name?Object(C.jsx)("div",null,Object(C.jsx)(y.EuiToolTip,{content:Oe},Object(C.jsx)(y.EuiBadge,{iconType:"flag",iconSide:"left"},e.customLabel))):null))(t,a.timeFieldName),width:"38%","data-test-subj":"indexedFieldName"},{field:"type",name:le,dataType:"string",sortable:!0,render:(e,t)=>this.renderFieldType(e,t),"data-test-subj":"indexedFieldType"},{field:"format",name:de,dataType:"string",sortable:!0},{field:"searchable",name:oe,description:ce,dataType:"boolean",sortable:!0,render:e=>this.renderBooleanTemplate(e,ue)},{field:"aggregatable",name:pe,description:fe,dataType:"boolean",sortable:!0,render:e=>this.renderBooleanTemplate(e,ge)},{field:"excluded",name:me,description:be,dataType:"boolean",sortable:!0,render:e=>this.renderBooleanTemplate(e,he)},{name:"",actions:[{name:je,description:xe,icon:"pencil",onClick:t,type:"icon","data-test-subj":"editFieldFormat",available:e=>e.isUserEditable}],width:"40px"},{name:"",actions:[{name:ve,description:ye,icon:"trash",onClick:e=>n(e.name),type:"icon","data-test-subj":"deleteField",available:te}],width:"40px"}];return Object(C.jsx)(y.EuiInMemoryTable,{items:e,columns:i,pagination:{initialPageSize:10,pageSizeOptions:[5,10,25,50]},sorting:{sort:{field:"displayName",direction:"asc"}}})}}class indexed_fields_table_IndexedFieldsTable extends f.Component{constructor(e){super(e),V()(this,"getFilteredFields",Object(U.createSelector)((e=>e.fields),((e,t)=>t.fieldFilter),((e,t)=>t.indexedFieldTypeFilter),((e,t)=>t.schemaFieldTypeFilter),((e,t,n,a)=>{if(t){const n=t.toLowerCase();e=e.filter((e=>e.name.toLowerCase().includes(n)||e.displayName&&e.displayName.toLowerCase().includes(n)))}return n.length&&(e=e.filter((e=>{var t,a,i;return!(!n.includes("conflict")||"conflict"!==e.kbnType)||!!("runtimeField"in e&&null!==(t=e.runtimeField)&&void 0!==t&&t.type&&n.includes(null===(a=e.runtimeField)||void 0===a?void 0:a.type))||(null===(i=e.esTypes)||void 0===i?void 0:i.length)&&e.esTypes.filter((e=>n.includes(e))).length}))),a.length&&(e=e.filter((e=>a.includes("runtime")&&"runtimeField"in e||a.includes("indexed")&&!("runtimeField"in e)))),e}))),this.state={fields:this.mapFields(this.props.fields)}}UNSAFE_componentWillReceiveProps(e){e.fields!==this.props.fields&&this.setState({fields:this.mapFields(e.fields)})}mapFields(e){const{indexPattern:t,fieldWildcardMatcher:n,helpers:a,userEditPermission:i}=this.props,s=n(t.sourceFilters&&t.sourceFilters.map((e=>e.value))||[]);return e&&e.map((e=>{var n,r,l;return{...e.spec,type:(null===(n=e.esTypes)||void 0===n?void 0:n.join(", "))||"",kbnType:e.type,displayName:e.displayName,format:(null===(r=t.getFormatterForFieldNoDefault(e.name))||void 0===r||null===(l=r.type)||void 0===l?void 0:l.title)||"",excluded:!!s&&s(e.name),info:a.getFieldInfo&&a.getFieldInfo(t,e),isMapped:!!e.isMapped,isUserEditable:i,hasRuntime:!!e.runtimeField}}))||[]}render(){const{indexPattern:e}=this.props,t=this.getFilteredFields(this.state,this.props);return Object(C.jsx)("div",null,Object(C.jsx)(table_table_Table,{indexPattern:e,items:t,editField:e=>this.props.helpers.editField(e.name),deleteField:e=>this.props.helpers.deleteField(e),openModal:this.props.openModal,theme:this.props.theme}))}}var Se=n(7),we=n.n(Se);class components_table_table_Table extends f.PureComponent{constructor(...e){super(...e),V()(this,"renderFormatCell",(e=>{const{indexPattern:t}=this.props,n=Object(Se.get)(t,["fieldFormatMap",e,"type","title"],"");return Object(C.jsx)("span",null,n)}))}render(){const{items:e,editField:t,deleteField:n}=this.props,a=[{field:"displayName",name:j.i18n.translate("indexPatternManagement.editIndexPattern.scripted.table.nameHeader",{defaultMessage:"Name"}),description:j.i18n.translate("indexPatternManagement.editIndexPattern.scripted.table.nameDescription",{defaultMessage:"Name of the field"}),dataType:"string",sortable:!0,width:"38%"},{field:"lang",name:j.i18n.translate("indexPatternManagement.editIndexPattern.scripted.table.langHeader",{defaultMessage:"Lang"}),description:j.i18n.translate("indexPatternManagement.editIndexPattern.scripted.table.langDescription",{defaultMessage:"Language used for the field"}),dataType:"string",sortable:!0,"data-test-subj":"scriptedFieldLang"},{field:"script",name:j.i18n.translate("indexPatternManagement.editIndexPattern.scripted.table.scriptHeader",{defaultMessage:"Script"}),description:j.i18n.translate("indexPatternManagement.editIndexPattern.scripted.table.scriptDescription",{defaultMessage:"Script for the field"}),dataType:"string",sortable:!0},{field:"name",name:j.i18n.translate("indexPatternManagement.editIndexPattern.scripted.table.formatHeader",{defaultMessage:"Format"}),description:j.i18n.translate("indexPatternManagement.editIndexPattern.scripted.table.formatDescription",{defaultMessage:"Format used for the field"}),render:this.renderFormatCell,sortable:!1},{name:"",actions:[{type:"icon",name:j.i18n.translate("indexPatternManagement.editIndexPattern.scripted.table.editHeader",{defaultMessage:"Edit"}),description:j.i18n.translate("indexPatternManagement.editIndexPattern.scripted.table.editDescription",{defaultMessage:"Edit this field"}),icon:"pencil",onClick:t,available:e=>!!e.isUserEditable},{type:"icon",name:j.i18n.translate("indexPatternManagement.editIndexPattern.scripted.table.deleteHeader",{defaultMessage:"Delete"}),description:j.i18n.translate("indexPatternManagement.editIndexPattern.scripted.table.deleteDescription",{defaultMessage:"Delete this field"}),icon:"trash",color:"danger",onClick:n,available:e=>!!e.isUserEditable}],width:"40px"}];return Object(C.jsx)(y.EuiInMemoryTable,{items:e,columns:a,pagination:{initialPageSize:10,pageSizeOptions:[5,10,25,50]},sorting:!0})}}const Ie=Object(h.withRouter)((({indexPatternId:e,history:t})=>{const{dataViews:n,docLinks:a}=Object(v.useKibana)().services,i=null==a?void 0:a.links,s=n.getCanSaveSync();return Object(C.jsx)(y.EuiFlexGroup,{alignItems:"center"},Object(C.jsx)(y.EuiFlexItem,null,Object(C.jsx)(y.EuiText,{size:"s"},Object(C.jsx)("p",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.editIndexPattern.scriptedLabel",defaultMessage:"Scripted fields can be used in visualizations and displayed in documents. However, they cannot be searched."}),Object(C.jsx)("br",null),Object(C.jsx)(y.EuiIcon,{type:"alert",color:"warning",style:{marginRight:"4px"}}),Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.editIndexPattern.deprecation",defaultMessage:"Scripted fields are deprecated. Use {runtimeDocs} instead.",values:{runtimeDocs:Object(C.jsx)(y.EuiLink,{target:"_blank",href:i.runtimeFields.overview},Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.header.runtimeLink",defaultMessage:"runtime fields"}))}})))),s&&Object(C.jsx)(y.EuiFlexItem,{grow:!1},Object(C.jsx)(y.EuiButton,I()({"data-test-subj":"addScriptedFieldLink"},Object(v.reactRouterNavigate)(t,`patterns/${e}/create-field/`)),Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.editIndexPattern.scripted.addFieldButton",defaultMessage:"Add scripted field"}))))})),_e=({deprecatedLangsInUse:e,painlessDocLink:t})=>e.length?Object(C.jsx)(g.a.Fragment,null,Object(C.jsx)(y.EuiCallOut,{title:Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.editIndexPattern.scripted.deprecationLangHeader",defaultMessage:"Deprecation languages in use"}),color:"danger",iconType:"cross"},Object(C.jsx)("p",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.editIndexPattern.scripted.deprecationLangLabel.deprecationLangDetail",defaultMessage:"The following deprecated languages are in use: {deprecatedLangsInUse}. Support for these languages will be removed in the next major version of Kibana and Elasticsearch. Convert you scripted fields to {link} to avoid any problems.",values:{deprecatedLangsInUse:e.join(", "),link:Object(C.jsx)(y.EuiLink,{href:t},Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.editIndexPattern.scripted.deprecationLangLabel.painlessDescription",defaultMessage:"Painless"}))}}))),Object(C.jsx)(y.EuiSpacer,{size:"m"})):null,Ce=({field:e,hideDeleteConfirmationModal:t,deleteField:n})=>{const a=j.i18n.translate("indexPatternManagement.editIndexPattern.scripted.deleteFieldLabel",{defaultMessage:"Delete scripted field '{fieldName}'?",values:{fieldName:e.name}}),i=j.i18n.translate("indexPatternManagement.editIndexPattern.scripted.deleteField.cancelButton",{defaultMessage:"Cancel"}),s=j.i18n.translate("indexPatternManagement.editIndexPattern.scripted.deleteField.deleteButton",{defaultMessage:"Delete"});return Object(C.jsx)(y.EuiConfirmModal,{title:a,onCancel:t,onConfirm:n,cancelButtonText:i,confirmButtonText:s,defaultFocusedButton:y.EUI_MODAL_CONFIRM_BUTTON})};class scripted_fields_table_ScriptedFieldsTable extends f.Component{constructor(e){super(e),V()(this,"fetchFields",(async()=>{const e=await this.props.indexPattern.getScriptedFields(),t=[],n=[],a=["painless"];for(const i of e){const e=i.lang;!n.includes(e)&&a.includes(e)||t.push(e)}this.setState({fields:e,deprecatedLangsInUse:t})})),V()(this,"getFilteredItems",(()=>{const{fields:e}=this.state,{fieldFilter:t,scriptedFieldLanguageFilter:n,userEditPermission:a}=this.props;let i=e;n.length&&(i=e.filter((e=>n.includes(e.lang))));let s=i;if(t){const e=t.toLowerCase();s=i.filter((t=>t.name.toLowerCase().includes(e)))}return s.forEach((e=>e.isUserEditable=a)),s})),V()(this,"startDeleteField",(e=>{this.setState({fieldToDelete:e,isDeleteConfirmationModalVisible:!0})})),V()(this,"hideDeleteConfirmationModal",(()=>{this.setState({fieldToDelete:void 0,isDeleteConfirmationModalVisible:!1})})),V()(this,"deleteField",(()=>{const{indexPattern:e,onRemoveField:t,saveIndexPattern:n}=this.props,{fieldToDelete:a}=this.state;e.removeScriptedField(a.name),n(e),t&&t(),this.fetchFields(),this.hideDeleteConfirmationModal()})),this.state={deprecatedLangsInUse:[],fieldToDelete:void 0,isDeleteConfirmationModalVisible:!1,fields:[]}}UNSAFE_componentWillMount(){this.fetchFields()}render(){const{indexPattern:e,painlessDocLink:t}=this.props,{fieldToDelete:n,deprecatedLangsInUse:a}=this.state,i=this.getFilteredItems();return Object(C.jsx)(g.a.Fragment,null,Object(C.jsx)(Ie,{indexPatternId:e.id||""}),Object(C.jsx)(_e,{deprecatedLangsInUse:a,painlessDocLink:t}),Object(C.jsx)(y.EuiSpacer,{size:"l"}),Object(C.jsx)(components_table_table_Table,{indexPattern:e,items:i,editField:e=>this.props.helpers.redirectToRoute(e),deleteField:this.startDeleteField}),n&&Object(C.jsx)(Ce,{deleteField:this.deleteField,field:n,hideDeleteConfirmationModal:this.hideDeleteConfirmationModal}))}}function Le(e,t,n=""){const a=Object(Se.countBy)(function(e,t){const n=(t||"").toLowerCase();return e.filter((e=>e.name.toLowerCase().includes(n)))}(e,n),(function(e){return e.scripted?"scripted":"indexed"}));return Object(Se.defaults)(a,{indexed:0,scripted:0,sourceFilters:t.excludes?t.excludes.filter((e=>e.toLowerCase().includes(n.toLowerCase()))).length:0}),a}function De(e,t,n){let a="";switch(e){case"indexed":a=j.i18n.translate("indexPatternManagement.editIndexPattern.tabs.fieldsHeader",{defaultMessage:"Fields"});break;case"scripted":a=j.i18n.translate("indexPatternManagement.editIndexPattern.tabs.scriptedHeader",{defaultMessage:"Scripted fields"});break;case"sourceFilters":a=j.i18n.translate("indexPatternManagement.editIndexPattern.tabs.sourceHeader",{defaultMessage:"Field filters"})}return a+` (${t[e]===n[e]?t[e]:t[e]+" / "+n[e]})`}function Ne(e){return Object(Se.uniq)(e).map((e=>({value:e,name:e})))}const Ae=j.i18n.translate("indexPatternManagement.editIndexPattern.fields.searchAria",{defaultMessage:"Search fields"}),ke=j.i18n.translate("indexPatternManagement.editIndexPattern.fields.filter",{defaultMessage:"Field type"}),Be=j.i18n.translate("indexPatternManagement.editIndexPattern.fields.filterAria",{defaultMessage:"Filter field types"}),Re=j.i18n.translate("indexPatternManagement.editIndexPattern.fields.schema",{defaultMessage:"Schema type"}),Ke=j.i18n.translate("indexPatternManagement.editIndexPattern.fields.schemaAria",{defaultMessage:"Filter schema types"}),Ve=j.i18n.translate("indexPatternManagement.editIndexPattern.fields.scriptedFieldFilter",{defaultMessage:"All languages"}),Ue=j.i18n.translate("indexPatternManagement.editIndexPattern.fields.scriptedFieldFilterAria",{defaultMessage:"Filter scripted field languages"}),qe=j.i18n.translate("indexPatternManagement.editIndexPattern.fields.runtime",{defaultMessage:"Runtime"}),He=j.i18n.translate("indexPatternManagement.editIndexPattern.fields.indexed",{defaultMessage:"Indexed"}),Ye=j.i18n.translate("indexPatternManagement.editIndexPattern.fields.filterPlaceholder",{defaultMessage:"Search"}),Ge=j.i18n.translate("indexPatternManagement.editIndexPattern.fields.addFieldButtonLabel",{defaultMessage:"Add field"});function ze({indexPattern:e,saveIndexPattern:t,fields:n,history:a,location:i,refreshFields:s}){const{uiSettings:r,docLinks:l,dataViewFieldEditor:d,overlays:o,theme:c,dataViews:u}=Object(v.useKibana)().services,[p,m]=Object(f.useState)(""),[b,h]=Object(f.useState)({getCurrentTab:()=>k}),[j,x]=Object(f.useState)([]),[O,F]=Object(f.useState)(!1),[E,T]=Object(f.useState)([]),[S,w]=Object(f.useState)([]),[I,L]=Object(f.useState)(!1),[D,K]=Object(f.useState)([]),[V,U]=Object(f.useState)([]),[q,H]=Object(f.useState)(!1),[Y,G]=Object(f.useState)([{value:"runtime",name:qe},{value:"indexed",name:He}]),z=Object(f.useRef)(),{DeleteRuntimeFieldProvider:W}=d,$=(e,t,n)=>{if(!e[t])return;const a=[...e];"on"===a[t].checked?a[t].checked=void 0:a[t].checked="on",n(a)},Q=Object(f.useCallback)((()=>{const t=[],n=[];e.fields.getAll().forEach((e=>{e.scripted?e.lang&&n.push(e.lang):("conflict"===e.type&&t.push("conflict"),e.esTypes&&e.esTypes.forEach((e=>t.push(e))))})),K(Ne(t)),T(Ne(n))}),[e]),J=Object(f.useCallback)((()=>{z.current&&z.current()}),[]),Z=Object(f.useCallback)((t=>{z.current=d.openEditor({ctx:{dataView:e},onSave:s,fieldName:t})}),[d,e,s]);Object(f.useEffect)((()=>{Q()}),[e,e.fields,Q]),Object(f.useEffect)((()=>()=>{J()}),[J]);const X=Object(f.useCallback)((e=>Object(N.fieldWildcardMatcher)(e,r.get(_.META_FIELDS))),[r]),ee=u.getCanSaveSync(),te=Object(f.useCallback)((e=>Object(C.jsx)(y.EuiFlexGroup,null,Object(C.jsx)(y.EuiFlexItem,{grow:!0},Object(C.jsx)(y.EuiFieldSearch,{fullWidth:!0,placeholder:Ye,value:p,onChange:e=>m(e.target.value),"data-test-subj":"indexPatternFieldFilter","aria-label":Ae})),e===k&&D.length>0&&Object(C.jsx)(g.a.Fragment,null,Object(C.jsx)(y.EuiFlexItem,{grow:!1},Object(C.jsx)(y.EuiFilterGroup,null,Object(C.jsx)(y.EuiPopover,{anchorPosition:"downCenter","data-test-subj":"indexedFieldTypeFilterDropdown-popover",button:Object(C.jsx)(y.EuiFilterButton,{"aria-label":Be,"data-test-subj":"indexedFieldTypeFilterDropdown",iconType:"arrowDown",onClick:()=>L(!I),isSelected:I,numFilters:D.length,hasActiveFilters:!!D.find((e=>"on"===e.checked)),numActiveFilters:D.filter((e=>"on"===e.checked)).length},ke),isOpen:I,closePopover:()=>L(!1)},D.map(((e,t)=>Object(C.jsx)(y.EuiFilterSelectItem,{checked:e.checked,key:e.value,onClick:()=>{w(e.checked?S.filter((t=>t!==e.value)):[...S,e.value]),$(D,t,K)},"data-test-subj":`indexedFieldTypeFilterDropdown-option-${e.value}${e.checked?"-checked":""}`},e.name)))),Object(C.jsx)(y.EuiPopover,{anchorPosition:"downCenter","data-test-subj":"schemaFieldTypeFilterDropdown-popover",button:Object(C.jsx)(y.EuiFilterButton,{"aria-label":Ke,"data-test-subj":"schemaFieldTypeFilterDropdown",iconType:"arrowDown",onClick:()=>H(!q),isSelected:q,numFilters:Y.length,hasActiveFilters:!!Y.find((e=>"on"===e.checked)),numActiveFilters:Y.filter((e=>"on"===e.checked)).length},Re),isOpen:q,closePopover:()=>H(!1)},Y.map(((e,t)=>Object(C.jsx)(y.EuiFilterSelectItem,{checked:e.checked,key:e.value,onClick:()=>{U(e.checked?V.filter((t=>t!==e.value)):[...V,e.value]),$(Y,t,G)},"data-test-subj":`schemaFieldTypeFilterDropdown-option-${e.value}${e.checked?"-checked":""}`},e.name)))))),ee&&Object(C.jsx)(y.EuiFlexItem,{grow:!1},Object(C.jsx)(y.EuiButton,{fill:!0,onClick:()=>Z(),"data-test-subj":"addField"},Ge))),e===B&&E.length>0&&Object(C.jsx)(y.EuiFlexItem,{grow:!1},Object(C.jsx)(y.EuiFilterGroup,null,Object(C.jsx)(y.EuiPopover,{anchorPosition:"downCenter","data-test-subj":"scriptedFieldLanguageFilterDropdown-popover",button:Object(C.jsx)(y.EuiFilterButton,{"aria-label":Ue,"data-test-subj":"scriptedFieldLanguageFilterDropdown",iconType:"arrowDown",onClick:()=>F(!O),isSelected:O,numFilters:E.length,hasActiveFilters:!!E.find((e=>"on"===e.checked)),numActiveFilters:E.filter((e=>"on"===e.checked)).length},Ve),isOpen:O,closePopover:()=>F(!1)},E.map(((e,t)=>Object(C.jsx)(y.EuiFilterSelectItem,{checked:e.checked,key:e.value,onClick:()=>{x(e.checked?j.filter((t=>t!==e.value)):[...j,e.value]),$(E,t,T)},"data-test-subj":`scriptedFieldLanguageFilterDropdown-option-${e.value}${e.checked?"-checked":""}`},e.name)))))))),[p,S,D,I,j,E,O,Y,V,q,Z,ee]),ne=Object(f.useCallback)((i=>{switch(i){case k:return Object(C.jsx)(f.Fragment,null,Object(C.jsx)(y.EuiSpacer,{size:"m"}),te(i),Object(C.jsx)(y.EuiSpacer,{size:"m"}),Object(C.jsx)(W,{dataView:e,onDelete:s},(t=>Object(C.jsx)(indexed_fields_table_IndexedFieldsTable,{fields:n,indexPattern:e,fieldFilter:p,fieldWildcardMatcher:X,indexedFieldTypeFilter:S,schemaFieldTypeFilter:V,helpers:{editField:Z,deleteField:t,getFieldInfo:P},openModal:o.openModal,theme:c,userEditPermission:u.getCanSaveSync()}))));case B:return Object(C.jsx)(f.Fragment,null,Object(C.jsx)(y.EuiSpacer,{size:"m"}),te(i),Object(C.jsx)(y.EuiSpacer,{size:"m"}),Object(C.jsx)(scripted_fields_table_ScriptedFieldsTable,{indexPattern:e,saveIndexPattern:t,fieldFilter:p,scriptedFieldLanguageFilter:j,helpers:{redirectToRoute:t=>{a.push(function(e,t){return`/dataView/${null==t?void 0:t.id}/field/${encodeURIComponent(e.name)}`}(t,e))}},onRemoveField:Q,painlessDocLink:l.links.scriptedFields.painless,userEditPermission:u.getCanSaveSync()}));case R:return Object(C.jsx)(f.Fragment,null,Object(C.jsx)(y.EuiSpacer,{size:"m"}),te(i),Object(C.jsx)(y.EuiSpacer,{size:"m"}),Object(C.jsx)(source_filters_table_SourceFiltersTable,{saveIndexPattern:t,indexPattern:e,filterFilter:p,fieldWildcardMatcher:X,onAddOrRemoveFilter:Q}))}}),[l.links.scriptedFields.painless,p,X,n,te,a,e,S,V,Q,j,t,Z,W,s,o,c,u]),ae=Object(f.useMemo)((()=>function(e,t){const n=Le(e.fields.getAll(),e.getSourceFiltering()),a=Le(e.fields.getAll(),e.getSourceFiltering(),t),i=[];return i.push({name:De("indexed",a,n),id:k,"data-test-subj":"tab-indexedFields"}),(e=>!M(e.type))(e)&&i.push({name:De("scripted",a,n),id:B,"data-test-subj":"tab-scriptedFields"}),i.push({name:De("sourceFilters",a,n),id:R,"data-test-subj":"tab-sourceFilters"}),i}(e,p).map((e=>({...e,content:ne(e.id)})))),[p,ne,e]),[ie,se]=Object(f.useState)(ae[0].id);return Object(f.useEffect)((()=>{const{startSyncingState:e,stopSyncingState:t,setCurrentTab:n,getCurrentTab:a}=function({defaultTab:e,useHashedUrl:t}){const n=Object(A.createHashHistory)(),a="_a",i={tab:e},s=Object(N.createKbnUrlStateStorage)({useHash:t,history:n}),r=s.get(a),l=Object(N.createStateContainer)({...i,...r},{setTab:e=>t=>({...e,tab:t})},{tab:e=>()=>e.tab}),{start:d,stop:o}=Object(N.syncState)({storageKey:a,stateContainer:{...l,set:e=>e&&l.set(e)},stateStorage:s});return s.set(a,l.getState(),{replace:!0}),{startSyncingState:d,stopSyncingState:o,setCurrentTab:e=>l.transitions.setTab(e),getCurrentTab:()=>l.selectors.tab()}}({useHashedUrl:r.get("state:storeInSessionStorage"),defaultTab:k});return e(),h({setCurrentTab:n,getCurrentTab:a}),se(a()),()=>{t()}}),[r]),Object(C.jsx)(y.EuiTabbedContent,{tabs:ae,selectedTab:ae.find((e=>e.id===ie)),onTabClick:e=>{se(e.id),b.setCurrentTab(e.id)}})}const We=j.i18n.translate("indexPatternManagement.editDataView.setDefaultAria",{defaultMessage:"Set as default data view."}),$e=j.i18n.translate("indexPatternManagement.editDataView.setDefaultTooltip",{defaultMessage:"Set as default data view."}),Qe=j.i18n.translate("indexPatternManagement.editDataView.removeAria",{defaultMessage:"Delete data view."}),Je=j.i18n.translate("indexPatternManagement.editDataView.removeTooltip",{defaultMessage:"Delete data view."}),Ze=({defaultIndex:e,indexPattern:t,setDefault:n,deleteIndexPatternClick:a,children:i,canSave:s})=>Object(C.jsx)(y.EuiPageHeader,{pageTitle:Object(C.jsx)("span",{"data-test-subj":"indexPatternTitle"},t.title),rightSideItems:[e!==t.id&&n&&s&&Object(C.jsx)(y.EuiToolTip,{content:$e},Object(C.jsx)(y.EuiButtonIcon,{color:"text",onClick:n,iconType:"starFilled","aria-label":We,"data-test-subj":"setDefaultIndexPatternButton"})),s&&Object(C.jsx)(y.EuiToolTip,{content:Je},Object(C.jsx)(y.EuiButtonIcon,{color:"danger",onClick:a,iconType:"trash","aria-label":Qe,"data-test-subj":"deleteIndexPatternButton"}))].filter(Boolean)},i);var Xe=n(16);const et={confirmButtonText:j.i18n.translate("indexPatternManagement.editIndexPattern.deleteButton",{defaultMessage:"Delete"}),title:j.i18n.translate("indexPatternManagement.editDataView.deleteHeader",{defaultMessage:"Delete data view"}),buttonColor:"danger"},tt=({dataViews:e,overlays:t,onDelete:n})=>(a,i)=>{t.openConfirm(Object(v.toMountPoint)(i),et).then((async t=>{t&&(await Object(Xe.asyncForEach)(a,(async({id:t})=>e.delete(t))),n())}))},nt=j.i18n.translate("indexPatternManagement.editIndexPattern.timeFilterLabel.mappingAPILink",{defaultMessage:"field mappings"}),at=j.i18n.translate("indexPatternManagement.editIndexPattern.mappingConflictHeader",{defaultMessage:"Mapping conflict"}),it=j.i18n.translate("indexPatternManagement.editIndexPattern.badge.securityDataViewTitle",{defaultMessage:"Security Data View"}),st=Object(h.withRouter)((({indexPattern:e,history:t,location:n})=>{const{uiSettings:a,overlays:i,chrome:s,dataViews:r}=Object(v.useKibana)().services,[l,d]=Object(f.useState)(e.getNonScriptedFields()),[o,c]=Object(f.useState)(e.fields.getAll().filter((e=>"conflict"===e.type))),[u,p]=Object(f.useState)(a.get("defaultIndex")),[m,b]=Object(f.useState)([]);Object(f.useEffect)((()=>{d(e.getNonScriptedFields()),c(e.fields.getAll().filter((e=>"conflict"===e.type)))}),[e]),Object(f.useEffect)((()=>{b(E(e,e.id===u))}),[u,e]);const h=Object(f.useCallback)((()=>{a.set("defaultIndex",e.id),p(e.id||"")}),[a,e.id]),O=tt({dataViews:r,uiSettings:a,overlays:i,onDelete:()=>{t.push("")}}),F=j.i18n.translate("indexPatternManagement.editIndexPattern.timeFilterHeader",{defaultMessage:"Time field: '{timeFieldName}'",values:{timeFieldName:e.timeFieldName}}),M=j.i18n.translate("indexPatternManagement.editIndexPattern.mappingConflictLabel",{defaultMessage:"{conflictFieldsLength, plural, one {A field is} other {# fields are}} defined as several types (string, integer, etc) across the indices that match this pattern. You may still be able to use these conflict fields in parts of Kibana, but they will be unavailable for functions that require Kibana to know their type. Correcting this issue will require reindexing your data.",values:{conflictFieldsLength:o.length}}),P=j.i18n.translate("indexPatternManagement.editDataView.detailsAria",{defaultMessage:"Data view details"});s.docTitle.change(e.title);const T=Boolean(e.timeFieldName||m&&m.length>0),S=Object(v.useKibana)().services.docLinks.links.elasticsearch.mapping,w=r.getCanSaveSync(),I=e.namespaces&&e.namespaces.length>1||e.namespaces.includes("*")?Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.editDataView.deleteWarningWithNamespaces",defaultMessage:"Delete the data view {dataViewName} from every space it is shared in. You can't undo this action.",values:{dataViewName:Object(C.jsx)(y.EuiCode,null,e.title)}}):Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.editDataView.deleteWarning",defaultMessage:"The data view {dataViewName} will be deleted. You can't undo this action.",values:{dataViewName:Object(C.jsx)(y.EuiCode,null,e.title)}});return Object(C.jsx)("div",{"data-test-subj":"editIndexPattern",role:"region","aria-label":P},Object(C.jsx)(Ze,{indexPattern:e,setDefault:h,deleteIndexPatternClick:()=>O([e],Object(C.jsx)("div",null,I)),defaultIndex:u,canSave:w},T&&Object(C.jsx)(y.EuiFlexGroup,{wrap:!0,gutterSize:"s"},Boolean(e.timeFieldName)&&Object(C.jsx)(y.EuiFlexItem,{grow:!1},Object(C.jsx)(y.EuiBadge,{color:"warning"},F)),e.id&&0===e.id.indexOf("security-solution")&&Object(C.jsx)(y.EuiFlexItem,{grow:!1},Object(C.jsx)(y.EuiBadge,null,it)),m.map((e=>Object(C.jsx)(y.EuiFlexItem,{grow:!1,key:e.key},Object(C.jsx)(y.EuiBadge,{color:"hollow"},e.name))))),Object(C.jsx)(y.EuiSpacer,{size:"m"}),Object(C.jsx)(y.EuiText,null,Object(C.jsx)("p",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.editIndexPattern.timeFilterLabel.timeFilterDetail",defaultMessage:"View and edit fields in {indexPatternTitle}. Field attributes, such as type and searchability, are based on {mappingAPILink} in Elasticsearch.",values:{indexPatternTitle:Object(C.jsx)("strong",null,e.title),mappingAPILink:Object(C.jsx)(y.EuiLink,{href:S,target:"_blank",external:!0},nt)}})," ")),o.length>0&&Object(C.jsx)(g.a.Fragment,null,Object(C.jsx)(y.EuiSpacer,null),Object(C.jsx)(y.EuiCallOut,{title:at,color:"warning",iconType:"alert"},Object(C.jsx)("p",null,M)))),Object(C.jsx)(y.EuiSpacer,null),Object(C.jsx)(ze,{indexPattern:e,saveIndexPattern:r.updateSavedObject.bind(r),fields:l,history:t,location:n,refreshFields:()=>{d(e.getNonScriptedFields())}}))})),rt=Object(h.withRouter)((({...e})=>{const{dataViews:t,setBreadcrumbs:n}=Object(v.useKibana)().services,[a,i]=Object(f.useState)();return Object(f.useEffect)((()=>{t.get(e.match.params.id).then((e=>{i(e),n(S(e))}))}),[t,e.match.params.id,n]),a?Object(C.jsx)(st,{indexPattern:a}):Object(C.jsx)(g.a.Fragment,null)}));var lt=n(17);const dt=({isVisible:e=!1})=>e?Object(C.jsx)(f.Fragment,null,Object(C.jsx)(y.EuiCallOut,{title:Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.disabledCallOutHeader",defaultMessage:"Scripting disabled",description:"Showing the status that scripting is disabled in Elasticsearch. Not an update message, that it JUST got disabled."}),color:"danger",iconType:"alert"},Object(C.jsx)("p",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.disabledCallOutLabel",defaultMessage:"All inline scripting has been disabled in Elasticsearch. You must enable inline scripting for at least one language in order to use scripted fields in Kibana."}))),Object(C.jsx)(y.EuiSpacer,{size:"m"})):null;dt.displayName="ScriptingDisabledCallOut";const ot=({isVisible:e=!1})=>{var t;const n=null===(t=Object(v.useKibana)().services.docLinks)||void 0===t?void 0:t.links;return e?Object(C.jsx)(f.Fragment,null,Object(C.jsx)(y.EuiText,{size:"s"},Object(C.jsx)("p",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.warningCallOutLabel.callOutDetail",defaultMessage:"Familiarize yourself with {scripFields} and {scriptsInAggregation} before using this feature. Scripted fields can be used to display and aggregate calculated values. As such, they can be very slow and, if done incorrectly, can cause Kibana to become unusable.",values:{scripFields:Object(C.jsx)(y.EuiLink,{target:"_blank",href:n.scriptedFields.scriptFields},Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.warningCallOutLabel.scripFieldsLink",defaultMessage:"scripted fields"})),scriptsInAggregation:Object(C.jsx)(y.EuiLink,{target:"_blank",href:n.scriptedFields.scriptAggs},Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.warningCallOutLabel.scriptsInAggregationLink",defaultMessage:"scripts in aggregations"}))}}))),Object(C.jsx)(y.EuiSpacer,{size:"m"}),Object(C.jsx)(y.EuiCallOut,{color:"warning",iconType:"alert",title:Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.scriptedFieldsDeprecatedTitle",defaultMessage:"Scripted fields are deprecated",description:"Deprecation warning title within scripted field editor"})},Object(C.jsx)(y.EuiText,{size:"s"},Object(C.jsx)("p",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.scriptedFieldsDeprecatedBody",defaultMessage:"For greater flexibility and Painless script support, use {runtimeDocs}.",values:{runtimeDocs:Object(C.jsx)(y.EuiLink,{target:"_blank",href:n.runtimeFields.overview},Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.warningCallOutLabel.runtimeLink",defaultMessage:"runtime fields"}))}})))),Object(C.jsx)(y.EuiSpacer,{size:"m"})):null};ot.displayName="ScriptingWarningCallOut";const ct=()=>{var e;const t=null===(e=Object(v.useKibana)().services.docLinks)||void 0===e?void 0:e.links.scriptedFields;return Object(C.jsx)(f.Fragment,null,Object(C.jsx)(y.EuiSpacer,null),Object(C.jsx)(y.EuiText,null,Object(C.jsx)("h3",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.syntaxHeader",defaultMessage:"Syntax"})),Object(C.jsx)("p",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.syntax.defaultLabel.defaultDetail",defaultMessage:"By default, Kibana scripted fields use {painless}, a simple and secure scripting language designed specifically for use with Elasticsearch, to access values in the document use the following format:",values:{painless:Object(C.jsx)(y.EuiLink,{target:"_blank",href:t.painless},Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.syntax.defaultLabel.painlessLink",defaultMessage:"Painless"})," ",Object(C.jsx)(y.EuiIcon,{type:"link"}))}})),Object(C.jsx)("p",null,Object(C.jsx)(y.EuiCode,null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.syntax.default.formatLabel",defaultMessage:"doc['some_field'].value"}))),Object(C.jsx)("p",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.syntax.painlessLabel.painlessDetail",defaultMessage:"Painless is powerful but easy to use. It provides access to many {javaAPIs}. Read up on its {syntax} and you'll be up to speed in no time!",values:{javaAPIs:Object(C.jsx)(y.EuiLink,{target:"_blank",href:t.painlessApi},Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.syntax.painlessLabel.javaAPIsLink",defaultMessage:"native Java APIs"})," ",Object(C.jsx)(y.EuiIcon,{type:"link"})),syntax:Object(C.jsx)(y.EuiLink,{target:"_blank",href:t.painlessSyntax},Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.syntax.painlessLabel.syntaxLink",defaultMessage:"syntax"})," ",Object(C.jsx)(y.EuiIcon,{type:"link"}))}})),Object(C.jsx)("p",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.syntax.kibanaLabel",defaultMessage:"Kibana currently imposes one special limitation on the painless scripts you write. They cannot contain named functions."})),Object(C.jsx)("p",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.syntax.lucene.commonLabel.commonDetail",defaultMessage:"Coming from an older version of Kibana? The {lucene} you know and love are still available. Lucene expressions are a lot like JavaScript, but limited to basic arithmetic, bitwise and comparison operations.",values:{lucene:Object(C.jsx)(y.EuiLink,{target:"_blank",href:t.luceneExpressions},Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.syntax.lucene.commonLabel.luceneLink",defaultMessage:"Lucene Expressions"})," ",Object(C.jsx)(y.EuiIcon,{type:"link"}))}})),Object(C.jsx)("p",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.syntax.lucene.limitsLabel",defaultMessage:"There are a few limitations when using Lucene Expressions:"})),Object(C.jsx)("ul",null,Object(C.jsx)("li",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.syntax.lucene.limits.typesLabel",defaultMessage:"Only numeric, boolean, date, and geo_point fields may be accessed"})),Object(C.jsx)("li",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.syntax.lucene.limits.fieldsLabel",defaultMessage:"Stored fields are not available"})),Object(C.jsx)("li",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.syntax.lucene.limits.sparseLabel",defaultMessage:"If a field is sparse (only some documents contain a value), documents missing the field will have a value of 0"}))),Object(C.jsx)("p",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.syntax.lucene.operationsLabel",defaultMessage:"Here are all the operations available to lucene expressions:"})),Object(C.jsx)("ul",null,Object(C.jsx)("li",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.syntax.lucene.operations.arithmeticLabel",defaultMessage:"Arithmetic operators: {operators}",values:{operators:Object(C.jsx)("code",null,"+ - * / %")}})),Object(C.jsx)("li",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.syntax.lucene.operations.bitwiseLabel",defaultMessage:"Bitwise operators: {operators}",values:{operators:Object(C.jsx)("code",null,"| & ^ ~ << >> >>>")}})),Object(C.jsx)("li",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.syntax.lucene.operations.booleanLabel",defaultMessage:"Boolean operators (including the ternary operator): {operators}",values:{operators:Object(C.jsx)("code",null,"&& || ! ?:")}})),Object(C.jsx)("li",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.syntax.lucene.operations.comparisonLabel",defaultMessage:"Comparison operators: {operators}",values:{operators:Object(C.jsx)("code",null,"< <= == >= >")}})),Object(C.jsx)("li",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.syntax.lucene.operations.mathLabel",defaultMessage:"Common mathematic functions: {operators}",values:{operators:Object(C.jsx)("code",null,"abs ceil exp floor ln log10 logn max min sqrt pow")}})),Object(C.jsx)("li",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.syntax.lucene.operations.trigLabel",defaultMessage:"Trigonometric library functions: {operators}",values:{operators:Object(C.jsx)("code",null,"acosh acos asinh asin atanh atan atan2 cosh cos sinh sin tanh tan")}})),Object(C.jsx)("li",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.syntax.lucene.operations.distanceLabel",defaultMessage:"Distance functions: {operators}",values:{operators:Object(C.jsx)("code",null,"haversin")}})),Object(C.jsx)("li",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.syntax.lucene.operations.miscellaneousLabel",defaultMessage:"Miscellaneous functions: {operators}",values:{operators:Object(C.jsx)("code",null,"min, max")}})))))};n(32);var ut,pt,ft=n(21),gt=n.n(ft),mt=n(29),bt=n.n(mt),ht=function(e,t){if("boolean"!=typeof t&&"boolean"===e.type){if([1,"true"].includes(t))return!0;if([0,"false"].includes(t))return!1;throw new Error("".concat(t," is not a valid boolean value for boolean field ").concat(e.name))}return"number"!=typeof t&&"number"===e.type?Number(t):t},jt=function(e,t){var n=ht(e,t);return{script:{source:xt(e),lang:e.lang,params:{value:n}}}},xt=function(e){return"painless"===e.lang?"boolean compare(Supplier s, def v) {return s.get() == v;}"+"compare(() -> { ".concat(e.script," }, params.value);"):"(".concat(e.script,") == value")};!function(e){e.CUSTOM="custom",e.PHRASES="phrases",e.PHRASE="phrase",e.EXISTS="exists",e.MATCH_ALL="match_all",e.QUERY_STRING="query_string",e.RANGE="range",e.RANGE_FROM_VALUE="range_from_value",e.SPATIAL_FILTER="spatial_filter"}(ut||(ut={})),function(e){e.APP_STATE="appState",e.GLOBAL_STATE="globalState"}(pt||(pt={}));var vt={gt:">",gte:">=",lte:"<=",lt:"<"},yt={gt:"boolean gt(Supplier s, def v) {return s.get() > v}",gte:"boolean gte(Supplier s, def v) {return s.get() >= v}",lte:"boolean lte(Supplier s, def v) {return s.get() <= v}",lt:"boolean lt(Supplier s, def v) {return s.get() < v}"},Ot={gt:"boolean gt(Supplier s, def v) {return s.get().toInstant().isAfter(Instant.parse(v))}",gte:"boolean gte(Supplier s, def v) {return !s.get().toInstant().isBefore(Instant.parse(v))}",lte:"boolean lte(Supplier s, def v) {return !s.get().toInstant().isAfter(Instant.parse(v))}",lt:"boolean lt(Supplier s, def v) {return s.get().toInstant().isBefore(Instant.parse(v))}"},Ft=function(e,t){var n=Object(Se.mapValues)(Object(Se.pickBy)(t,(function(e,t){return t in vt})),(function(t){return"number"===e.type&&"string"==typeof t?parseFloat(t):t})),a=Object(Se.map)(n,(function(t,n){return"("+e.script+")"+Object(Se.get)(vt,n)+n})).join(" && ");if("painless"===e.lang){var i="date"===e.type?Ot:yt,s=Object(Se.reduce)(n,(function(e,t,n){return e.concat(Object(Se.get)(i,n))}),[]).join(" "),r=Object(Se.map)(n,(function(t,n){return"".concat(n,"(() -> { ").concat(e.script," }, params.").concat(n,")")})).join(" && ");a="".concat(s).concat(r)}return{script:{source:a,params:n,lang:e.lang}}},Mt=function(e){return function(e){return Object(Se.has)(e,"query.exists")}(e)?function(e){return e.query.exists&&e.query.exists.field}(e):function(e){var t=Object(Se.has)(e,"query.match_phrase"),n=Object(Se.get)(e,"query.match",[]),a=void 0!==Object.values(n).find((function(e){return"phrase"===e.type}));return t||a}(e)?function(e){var t,n,a=null!==(t=null!==(n=e.query.match_phrase)&&void 0!==n?n:e.query.match)&&void 0!==t?t:{};return Object.keys(a)[0]}(e):function(e){var t;return(null==e||null===(t=e.meta)||void 0===t?void 0:t.type)===ut.PHRASES}(e)?function(e){return e.meta.key}(e):function(e){return Object(Se.has)(e,"query.range")}(e)?function(e){return e.query.range&&Object.keys(e.query.range)[0]}(e):void 0},Et=function(e){return Object(Se.get)(e,"meta.disabled",!1)},Pt=function(e){return Object(Se.omit)(e,["meta","$state"])};function Tt(e,t){if(function(e){var t,n,a=Object.keys(null!==(t=e.match||(null===(n=e.query)||void 0===n?void 0:n.match))&&void 0!==t?t:{})[0];return Boolean(a&&("phrase"===Object(Se.get)(e,["query","match",a,"type"])||"phrase"===Object(Se.get)(e,["match",a,"type"])))}(e)){var n=e.match||e.query.match,a=Object.keys(n)[0],i=Object(Se.get)(n,[a]),s=i.query;if(t){var r=t.fields.find((function(e){return e.name===a}));r&&(s=ht(r,i.query))}return{meta:e.meta,$state:e.$state,query:{match_phrase:V()({},a,Object(Se.omit)(gt()(gt()({},i),{},{query:s}),"type"))}}}return e.query||(e.query={}),e.exists&&(e.query.exists=e.exists,delete e.exists),e.range&&(e.query.range=e.range,delete e.range),e.match_all&&(e.query.match_all=e.match_all,delete e.match_all),Object.keys(e).forEach((function(t){"meta"!==t&&"query"!==t&&"$state"!==t&&(e.query[t]=e[t],delete e[t])})),e}var St=n(24),wt=n.n(St),It=n(22),_t=n.n(It);function Ct(e){return{type:"literal",value:e}}function Lt(e){return e.value}var Dt="@kuery-wildcard@";function Nt(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function At(e){return e.replace(/[+-=&|><!(){}[\]^"~*?:\\/]/g,"\\$&")}function kt(e){return e.includes(Dt)?{type:"wildcard",value:e}:_n(e)}function Bt(e,t){var n=e.value.split(Dt).map(Nt).join("[\\s\\S]*");return new RegExp("^".concat(n,"$")).test(t)}function Rt(e){return e.value.split(Dt).join("*")}function Kt(e){return e.value.split(Dt).map(At).join("*")}function Vt(e){var t=e.value;return t.startsWith(Dt)&&t.replace(Dt,"").length>0}function Ut(e,t){if(!t)return[];if("literal"===e.type){var n=Lt(e),a=t.fields.find((function(e){return e.name===n}));return a?[a]:[]}return"wildcard"===e.type?t.fields.filter((function(t){return Bt(e,t.name)})):void 0}var qt=n(18),Ht=n.n(qt);function Yt(e){var t=Ht.a.tz.guess();return"Browser"===e?t:e}function Gt(e){return function(e){var t,n=null==e?void 0:e.subType;return!(null==n||null===(t=n.nested)||void 0===t||!t.path)}(e)?e.subType:void 0}function zt(e,t,n){var a=gt()(gt()({},e),{},{value:n?"".concat(n,".").concat(e.value):e.value});if(!t||"wildcard"===a.type&&!n)return a;var i=Ut(a,t).reduce((function(e,t){var a=Gt(t),i=null==a?void 0:a.nested.path;return n&&!i?[].concat(wt()(e),["".concat(t.name,' is not a nested field but is in nested group "').concat(n,'" in the KQL expression.')]):i&&!n?[].concat(wt()(e),["".concat(t.name," is a nested field, but is not in a nested group in the KQL expression.")]):i!==n?[].concat(wt()(e),["Nested field ".concat(t.name," is being queried with the incorrect nested path. The correct path is ").concat(null==a?void 0:a.nested.path,".")]):e}),[]);if(i.length>0)throw new Error(i.join("\n"));return a}function Wt(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Object(Se.isUndefined)(e))throw new Error("fieldName is a required argument");if(Object(Se.isUndefined)(t))throw new Error("value is a required argument");var a="string"==typeof e?_n(e):Ct(e),i="string"==typeof t?_n(t):Ct(t),s=Ct(n);return{arguments:[a,i,s]}}function $t(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=_t()(e.arguments,3),s=i[0],r=i[1],l=i[2],d="wildcard"===r.type&&r.value===Dt,o="wildcard"===s.type&&s.value===Dt,c=d&&o;if(c)return{match_all:{}};var u=zt(s,t,null!=a&&a.nested?a.nested.path:void 0),p=Object(Se.isUndefined)(r)?r:Ln(r),f=l.value?"phrase":"best_fields";if(null===u.value)return"wildcard"===r.type?{query_string:{query:Kt(r)}}:{multi_match:{type:f,query:p,lenient:!0}};var g=t?Ut(u,t):[];if(g&&0===g.length&&g.push({name:Ln(u),scripted:!1,type:""}),d&&(null==g||!g.length||(null==g?void 0:g.length)===(null==t?void 0:t.fields.length)))return{match_all:{}};var m=g.reduce((function(e,t){var i=function(e){var n=Gt(t);return"wildcard"!==u.type||null==n||!n.nested||null!=a&&a.nested?e:{nested:{path:n.nested.path,query:e,score_mode:"none"}}};if(!t.scripted){if(d)return[].concat(wt()(e),[i({exists:{field:t.name}})]);if("wildcard"===r.type)return[].concat(wt()(e),[i({query_string:{fields:[t.name],query:Kt(r)}})]);if("date"===t.type){var s=n.dateFormatTZ?{time_zone:Yt(n.dateFormatTZ)}:{};return[].concat(wt()(e),[i({range:V()({},t.name,gt()({gte:p,lte:p},s))})])}var l="phrase"===f?"match_phrase":"match";return[].concat(wt()(e),[i(V()({},l,V()({},t.name,p)))])}if(!d)return[].concat(wt()(e),[{script:gt()({},jt(t,p))}])}),[]);return{bool:{should:m||[],minimum_should_match:1}}}function Qt(e){return{arguments:e}}function Jt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n.filtersInMustClause,s=e.arguments||[],r=i?"must":"filter";return{bool:V()({},r,s.map((function(e){return Ln(e,t,n,a)})))}}function Zt(e){return{arguments:e}}function Xt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=e.arguments||[];return{bool:{should:i.map((function(e){return Ln(e,t,n,a)})),minimum_should_match:1}}}function en(e){return{arguments:[e]}}function tn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=_t()(e.arguments,1),s=i[0];return{bool:{must_not:Ln(s,t,n,a)}}}function nn(e,t,n){return{arguments:[_n(e),t,fn.literal.buildNode(n)]}}function an(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=_t()(e.arguments,3),s=i[0],r=i[1],l=i[2],d=zt(s,t,null!=a&&a.nested?a.nested.path:void 0),o=t?Ut(d,t):[];o&&0===o.length&&o.push({name:Ln(d),scripted:!1,type:""});var c=o.map((function(e){var t=function(t){var n=Gt(e);return"wildcard"!==d.type||null==n||!n.nested||a.nested?t:{nested:{path:n.nested.path,query:t,score_mode:"none"}}},i=V()({},r,Ln(l));if(e.scripted)return{script:Ft(e,i)};if("date"===e.type){var s=n.dateFormatTZ?{time_zone:Yt(n.dateFormatTZ)}:{};return t({range:V()({},e.name,gt()(gt()({},i),s))})}return t({range:V()({},e.name,i)})}));return{bool:{should:c,minimum_should_match:1}}}function sn(e){return{arguments:[Ct(e)]}}function rn(e,t){var n,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=_t()(e.arguments,1),s=i[0],r=gt()(gt()({},s),{},{value:null!=a&&a.nested?"".concat(a.nested.path,".").concat(s.value):s.value}),l=Lt(r),d=null==t||null===(n=t.fields)||void 0===n?void 0:n.find((function(e){return e.name===l}));if(null!=d&&d.scripted)throw new Error("Exists query does not support scripted fields");return{exists:{field:l}}}function ln(e,t){return{arguments:["string"==typeof e?_n(e):Ct(e),t]}}function dn(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=_t()(e.arguments,2),r=s[0],l=s[1],d=Ln(r),o=null!=i&&null!==(n=i.nested)&&void 0!==n&&n.path?"".concat(i.nested.path,".").concat(d):d;return{nested:{path:o,query:Ln(l,t,a,gt()(gt()({},i),{},{nested:{path:o}})),score_mode:"none"}}}var on={is:s,and:r,or:l,not:d,range:o,exists:c,nested:u};function cn(e){var t=on[e];if(we.a.isUndefined(t))throw new Error('Unknown function "'.concat(e,'"'));for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return gt()({type:"function",function:e},t.buildNodeParams.apply(t,a))}function un(e,t){if(we.a.isUndefined(on[e]))throw new Error('Unknown function "'.concat(e,'"'));return{type:"function",function:e,arguments:t}}function pn(e,t,n,a){return on[e.function].toElasticsearchQuery(e,t,n,a)}var fn={function:p,literal:a,wildcard:i},gn=n(37),mn=n.n(gn),bn=n(38),hn=n.n(bn),jn=n(39),xn=n.n(jn),vn=n(40),yn=n.n(vn),On=n(41),Fn=n.n(On),Mn=n(42),En=n.n(Mn),Pn=j.i18n.translate("esQuery.kql.errors.endOfInputText",{defaultMessage:"end of input"}),Tn={fieldName:j.i18n.translate("esQuery.kql.errors.fieldNameText",{defaultMessage:"field name"}),value:j.i18n.translate("esQuery.kql.errors.valueText",{defaultMessage:"value"}),literal:j.i18n.translate("esQuery.kql.errors.literalText",{defaultMessage:"literal"}),whitespace:j.i18n.translate("esQuery.kql.errors.whitespaceText",{defaultMessage:"whitespace"})},Sn=function(e){yn()(n,e);var t=Fn()(n);function n(e,a){var i;hn()(this,n);var s=e.message;if(e.expected){var r=e.expected.map((function(e){var t,n="other"===(t=e).type?t.description:"literal"===t.type?'"'.concat(t.text,'"'):"end"===t.type?"end of input":t.text||t.description||"";return Tn[n]||n})),l=Object(Se.uniq)(r).filter((function(e){return void 0!==e})).sort().join(", ");s=j.i18n.translate("esQuery.kql.errors.syntaxError",{defaultMessage:"Expected {expectedList} but {foundInput} found.",values:{expectedList:l,foundInput:e.found?'"'.concat(e.found,'"'):Pn}})}var d=[s,a,Object(Se.repeat)("-",e.location.start.offset)+"^"].join("\n");return i=t.call(this,d),V()(xn()(i),"shortMessage",void 0),i.name="KQLSyntaxError",i.shortMessage=s,i}return mn()(n)}(En()(Error)),wn=n(30),In=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wn.parse;if(void 0===e)throw new Error("expression must be a string, got undefined instead");return n(e,gt()(gt()({},t),{},{helpers:{nodeTypes:fn}}))},_n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return In(e,gt()(gt()({},t),{},{startRule:"Literal"}),wn.parse)},Cn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return In(e,t,wn.parse)}catch(t){throw"SyntaxError"===t.name?new Sn(t,e):t}},Ln=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!t||!t.type||!fn[t.type])return e(fn.function.buildNode("and",[]),n);var s=fn[t.type];return s.toElasticsearchQuery(t,n,a,i)};Object(Se.flow)((function(e){return e.replace(/[\\():<>"*]/g,"\\$&")}),(function(e){return e.replace(/(\s+)(and|or)(\s+)/gi,"$1\\$2$3")}),(function(e){return e.replace(/not(\s+)/gi,"\\$&")}),(function(e){return e.replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\n/g,"\\n")}));var Dn=function(){return Ln.apply(void 0,arguments)};function Nn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=t.map((function(e){return Cn(e.query,{allowLeadingWildcards:n})}));return An(e,s,{dateFormatTZ:a,filtersInMustClause:i})}function An(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=fn.function.buildNode("and",t),i=Dn(a,e,n);return Object.assign({must:[],filter:[],should:[],must_not:[]},i.bool)}function kn(e,t){var n,a;return null===(n=e.meta)||void 0===n||!n.key||!t||("custom"===(null===(a=e.meta)||void 0===a?void 0:a.type)?e.meta.index===t.id:t.fields.some((function(t){return t.name===e.meta.key})))}var Bn=function(e,t){if(!t)return e;var n=Mt(e);if(!n)return e;var a=t.fields.find((function(e){return e.name===n})),i=a&&Gt(a);if(!i)return e;var s=Pt(e);return{meta:e.meta,query:{nested:{path:i.nested.path,query:s.query||s}}}},Rn=function(e){return function(t){return Object(Se.isUndefined)(t.meta)||Object(Se.isUndefined)(t.meta.negate)?!e:t.meta&&t.meta.negate===e}},Kn=function(e){return e.query||e},Vn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=e.filter((function(e){return e&&!Et(e)}));var a=function(a){return e.filter((function(e){return!!e})).filter(Rn(a)).filter((function(e){return!n||kn(e,t)})).map((function(e){return Tt(e,t)})).map((function(e){return Bn(e,t)})).map(Pt).map(Kn)};return{must:[],filter:a(!1),should:[],must_not:a(!0)}};function Un(e,t,n){return{must:(e||[]).map((function(e){var a=function(e){return Object(Se.isString)(e)?""===e.trim()?{match_all:{}}:{query_string:{query:e}}:e}(e.query);return function(e,t,n){return function(e){return Object(Se.has)(e,"query_string.query")}(e)&&("string"==typeof t&&(t=JSON.parse(t)),Object(Se.extend)(e.query_string,t),n&&Object(Se.defaults)(e.query_string,{time_zone:Yt(n)})),e}(a,t,n)})),filter:[],should:[],must_not:[]}}function qn(e){return e.filter((function(e){return!e||"object"!==bt()(e)||!Object(Se.isEqual)(e,{match_all:{}})}))}var Hn=n(19);class test_script_TestScript extends f.Component{constructor(...e){super(...e),V()(this,"defaultProps",{name:"myScriptedField"}),V()(this,"state",{isLoading:!1,additionalFields:[],previewData:void 0}),V()(this,"previewScript",(async e=>{var t;const{indexPattern:n,name:a,script:i,executeScript:s}=this.props;if(!i||0===i.length)return;let r;if(this.setState({isLoading:!0}),e){const t=Object(Hn.getEsQueryConfig)(this.context.services.uiSettings);r=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{allowLeadingWildcards:!1,queryStringOptions:{},ignoreFilterIfFieldNotInIndex:!1};t=Array.isArray(t)?t:[t],n=Array.isArray(n)?n:[n];var i=t.filter((function(e){return Object(Se.has)(e,"query")})),s=Object(Se.groupBy)(i,"language"),r=Nn(e,s.kuery,a.allowLeadingWildcards,a.dateFormatTZ,a.filtersInMustClause),l=Un(s.lucene,a.queryStringOptions,a.dateFormatTZ),d=Vn(n,e,a.ignoreFilterIfFieldNotInIndex);return{bool:{must:qn([].concat(wt()(r.must),wt()(l.must),wt()(d.must))),filter:qn([].concat(wt()(r.filter),wt()(l.filter),wt()(d.filter))),should:qn([].concat(wt()(r.should),wt()(l.should),wt()(d.should))),must_not:[].concat(wt()(r.must_not),wt()(l.must_not),wt()(d.must_not))}}}(this.props.indexPattern,e.query||[],[],t)}const l=await s({name:a,script:i,indexPatternTitle:n.title,query:r,additionalFields:this.state.additionalFields.map((e=>e.value)),http:this.context.services.http});200===l.status?this.setState({isLoading:!1,previewData:null===(t=l.hits)||void 0===t?void 0:t.hits.map((e=>({_id:e._id,...e._source,...e.fields})))}):this.setState({isLoading:!1,previewData:l})})),V()(this,"onAdditionalFieldsChange",(e=>{this.setState({additionalFields:e})}))}componentDidMount(){this.props.script&&this.previewScript()}renderPreview(e){return e?e.error?Object(C.jsx)(y.EuiCallOut,{title:j.i18n.translate("indexPatternManagement.testScript.errorMessage",{defaultMessage:"There's an error in your script"}),color:"danger",iconType:"cross"},Object(C.jsx)(y.EuiCodeBlock,{language:"json",className:"scriptPreviewCodeBlock","data-test-subj":"scriptedFieldPreview"},JSON.stringify(e.error,null," "))):Object(C.jsx)(f.Fragment,null,Object(C.jsx)(y.EuiTitle,{size:"xs"},Object(C.jsx)("p",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.testScript.resultsLabel",defaultMessage:"First 10 results"}))),Object(C.jsx)(y.EuiSpacer,{size:"s"}),Object(C.jsx)(y.EuiCodeBlock,{language:"json",className:"scriptPreviewCodeBlock","data-test-subj":"scriptedFieldPreview"},JSON.stringify(e,null," "))):null}renderToolbar(){const e=new Map,t=[];return this.props.indexPattern.fields.getAll().filter((e=>{const t=e.isSubtypeMulti();return!e.name.startsWith("_")&&!t&&!e.scripted})).forEach((t=>{if(e.has(t.type)){const n=e.get(t.type);n.push(t.name),e.set(t.type,n)}else e.set(t.type,[t.name])})),e.forEach(((e,n)=>{t.push({label:n,options:e.sort().map((e=>({value:e,label:e})))})})),t.sort(((e,t)=>e.label<t.label?-1:e.label>t.label?1:0)),Object(C.jsx)(f.Fragment,null,Object(C.jsx)(y.EuiFormRow,{label:j.i18n.translate("indexPatternManagement.testScript.fieldsLabel",{defaultMessage:"Additional fields"}),fullWidth:!0},Object(C.jsx)(y.EuiComboBox,{placeholder:j.i18n.translate("indexPatternManagement.testScript.fieldsPlaceholder",{defaultMessage:"Select..."}),options:t,selectedOptions:this.state.additionalFields,onChange:e=>this.onAdditionalFieldsChange(e),"data-test-subj":"additionalFieldsSelect",fullWidth:!0})),Object(C.jsx)("div",{className:"testScript__searchBar"},Object(C.jsx)(this.context.services.data.ui.SearchBar,{appName:"indexPatternManagement",showFilterBar:!1,showDatePicker:!1,showQueryInput:!0,query:this.context.services.data.query.queryString.getDefaultQuery(),onQuerySubmit:this.previewScript,indexPatterns:[this.props.indexPattern],customSubmitButton:Object(C.jsx)(y.EuiButton,{disabled:!this.props.script,isLoading:this.state.isLoading,"data-test-subj":"runScriptButton"},Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.testScript.submitButtonLabel",defaultMessage:"Run script"}))})))}render(){return Object(C.jsx)(f.Fragment,null,Object(C.jsx)(y.EuiSpacer,null),Object(C.jsx)(y.EuiText,null,Object(C.jsx)("h3",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.testScript.resultsTitle",defaultMessage:"Preview results"})),Object(C.jsx)("p",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.testScript.instructions",defaultMessage:"Run your script to preview the first 10 results. You can also select some additional fields to include in your results to gain more context or add a query to filter on specific documents."}))),Object(C.jsx)(y.EuiSpacer,null),this.renderToolbar(),Object(C.jsx)(y.EuiSpacer,null),this.renderPreview(this.state.previewData))}}V()(test_script_TestScript,"contextType",v.context);const Yn=({isVisible:e=!1,onClose:t=(()=>{}),indexPattern:n,lang:a,name:i,script:s,executeScript:r})=>{const l=[{id:"syntax",name:"Syntax","data-test-subj":"syntaxTab",content:Object(C.jsx)(ct,null)},{id:"test",name:"Preview results","data-test-subj":"testTab",content:Object(C.jsx)(test_script_TestScript,{indexPattern:n,lang:a,name:i,script:s,executeScript:r})}];return e?Object(C.jsx)(y.EuiFlyout,{onClose:t,"data-test-subj":"scriptedFieldsHelpFlyout"},Object(C.jsx)(y.EuiFlyoutBody,null,Object(C.jsx)(y.EuiTabbedContent,{tabs:l,initialSelectedTab:l[0]}))):null};Yn.displayName="ScriptingHelpFlyout";const Gn=Object(Se.memoize)((e=>e?g.a.lazy((()=>e().then((e=>({default:e}))))):null));class field_format_editor_FieldFormatEditor extends f.PureComponent{constructor(e){super(e),this.state={EditorComponent:Gn(e.fieldFormatEditors.getById(e.fieldFormatId))}}static getDerivedStateFromProps(e){return{EditorComponent:Gn(e.fieldFormatEditors.getById(e.fieldFormatId))}}render(){const{EditorComponent:e}=this.state,{fieldType:t,fieldFormat:n,fieldFormatParams:a,onChange:i,onError:s}=this.props;return Object(C.jsx)(g.a.Fragment,null,e?Object(C.jsx)(g.a.Suspense,{fallback:Object(C.jsx)("div",{style:{minHeight:430,marginTop:8}},Object(C.jsx)(y.EuiDelayRender,null,Object(C.jsx)(y.EuiLoadingContent,{lines:4})))},Object(C.jsx)(e,{fieldType:t,format:n,formatParams:a,onChange:i,onError:s})):null)}}var zn=n(43);const Wn={painless:["number","string","date","boolean"],expression:["number"]},$n=Object(zn.getKbnTypeNames)(),Qn=async({name:e,script:t,indexPatternTitle:n,query:a,additionalFields:i=[],http:s})=>s.post("/internal/index-pattern-management/preview_scripted_field",{body:JSON.stringify({index:n,name:e,script:t,query:a,additionalFields:i})}).then((e=>({status:e.statusCode,hits:e.body.hits}))).catch((e=>({status:e.statusCode,error:e.body.attributes.error}))),Jn=(e,t,n)=>{const a=n.getByFieldType(e.type).map((({id:e,title:t})=>({id:e,title:t})));return[{id:"",defaultFieldFormat:t,title:j.i18n.translate("indexPatternManagement.defaultFormatDropDown",{defaultMessage:"- Default -"})},...a]};class field_editor_FieldEditor extends f.PureComponent{constructor(e,t){super(e,t),V()(this,"supportedLangs",[]),V()(this,"deprecatedLangs",[]),V()(this,"onFieldChange",((e,t)=>{const{spec:n}=this.state;n[e]=t,this.forceUpdate()})),V()(this,"onTypeChange",(e=>{const{fieldFormats:t}=this.context.services,{spec:n,format:a}=this.state,i=t.getDefaultType(e);n.type=e,this.setState({fieldTypeFormats:Jn(n,i,t),fieldFormatId:i.id,fieldFormatParams:a.params()})})),V()(this,"onLangChange",(e=>{const{spec:t}=this.state,n=Object(Se.get)(Wn,e,$n);t.lang=e,t.type=n.includes(t.type)?t.type:n[0],this.setState({fieldTypes:n})})),V()(this,"onFormatChange",((e,t)=>{const{fieldTypeFormats:n}=this.state,{uiSettings:a,fieldFormats:i}=this.context.services,s=new(i.getType(e||n[0].defaultFieldFormat.id))(t,(e=>a.get(e)));this.setState({fieldFormatId:e,fieldFormatParams:t,format:s})})),V()(this,"onFormatParamsChange",(e=>{const{fieldFormatId:t}=this.state;this.onFormatChange(t,e)})),V()(this,"onFormatParamsError",(e=>{this.setState({hasFormatError:!!e})})),V()(this,"onScriptChange",(e=>{this.setState({hasScriptError:!1}),this.onFieldChange("script",e)})),V()(this,"showScriptingHelp",(()=>{this.setState({showScriptingHelp:!0})})),V()(this,"hideScriptingHelp",(()=>{this.setState({showScriptingHelp:!1})})),V()(this,"renderDeleteModal",(()=>{const{spec:e}=this.state;return this.state.showDeleteModal?Object(C.jsx)(y.EuiConfirmModal,{title:j.i18n.translate("indexPatternManagement.deleteFieldHeader",{defaultMessage:"Delete field '{fieldName}'",values:{fieldName:e.name}}),onCancel:this.hideDeleteModal,onConfirm:()=>{this.hideDeleteModal(),this.deleteField()},cancelButtonText:j.i18n.translate("indexPatternManagement.deleteField.cancelButton",{defaultMessage:"Cancel"}),confirmButtonText:j.i18n.translate("indexPatternManagement.deleteField.deleteButton",{defaultMessage:"Delete"}),buttonColor:"danger",defaultFocusedButton:y.EUI_MODAL_CONFIRM_BUTTON},Object(C.jsx)("p",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.deleteFieldLabel",defaultMessage:"You can't recover a deleted field.{separator}Are you sure you want to do this?",values:{separator:Object(C.jsx)("span",null,Object(C.jsx)("br",null),Object(C.jsx)("br",null))}}))):null})),V()(this,"showDeleteModal",(()=>{this.setState({showDeleteModal:!0})})),V()(this,"hideDeleteModal",(()=>{this.setState({showDeleteModal:!1})})),V()(this,"renderScriptingPanels",(()=>{const{scriptingLangs:e,spec:t,showScriptingHelp:n}=this.state;if(t.scripted)return Object(C.jsx)(f.Fragment,null,Object(C.jsx)(dt,{isVisible:!e.length}),Object(C.jsx)(ot,{isVisible:!0}),Object(C.jsx)(Yn,{isVisible:n,onClose:this.hideScriptingHelp,indexPattern:this.props.indexPattern,lang:t.lang,name:t.name,script:t.script,executeScript:Qn}))})),V()(this,"deleteField",(()=>{const{redirectAway:e,indexPatternService:t}=this.props.services,{indexPattern:n}=this.props,{spec:a}=this.state;n.removeScriptedField(a.name),t.updateSavedObject(n).then((()=>{const t=j.i18n.translate("indexPatternManagement.deleteField.deletedHeader",{defaultMessage:"Deleted '{fieldName}'",values:{fieldName:a.name}});this.context.services.notifications.toasts.addSuccess(t),e()}))})),V()(this,"saveField",(async()=>{const e=this.state.spec,{indexPattern:t}=this.props,{fieldFormatId:n,fieldFormatParams:a,customLabel:i}=this.state;if(e.scripted&&(this.setState({isSaving:!0}),!await(async({name:e,script:t,indexPatternTitle:n,http:a})=>200===(await Qn({name:e,script:t,indexPatternTitle:n,http:a})).status)({name:e.name,script:e.script,indexPatternTitle:t.title,http:this.context.services.http})))return void this.setState({hasScriptError:!0,isSaving:!1});const{redirectAway:s,indexPatternService:r}=this.props.services;let l;return t.fields.getByName(e.name)?(l=t.fields.getByName(e.name).spec,t.fields.update(e)):t.fields.add(e),n?t.setFieldFormat(e.name,{id:n,params:a}):t.deleteFieldFormat(e.name),e.customLabel!==i&&(e.customLabel=i,t.fields.update(e)),r.updateSavedObject(t).then((()=>{const t=j.i18n.translate("indexPatternManagement.deleteField.savedHeader",{defaultMessage:"Saved '{fieldName}'",values:{fieldName:e.name}});this.context.services.notifications.toasts.addSuccess(t),s()})).catch((()=>{l?t.fields.update(l):t.fields.remove(e)}))}));const{spec:n,indexPattern:a}=e;this.state={isReady:!1,isCreating:!1,isDeprecatedLang:!1,scriptingLangs:[],fieldTypes:[],fieldTypeFormats:[],existingFieldNames:a.fields.getAll().map((e=>e.name)),fieldFormatId:void 0,fieldFormatParams:{},showScriptingHelp:!1,showDeleteModal:!1,hasFormatError:!1,hasScriptError:!1,isSaving:!1,format:e.indexPattern.getFormatterForField(n),spec:{...n},customLabel:""},this.supportedLangs=["painless"],this.deprecatedLangs=[],this.init(t)}async init(e){var t,n;const{http:a,notifications:i,fieldFormats:s}=e.services,{format:r,spec:l}=this.state,{indexPattern:d}=this.props,o=await((e,t)=>e.get("/api/kibana/scripts/languages").catch((()=>(t.addDanger(j.i18n.translate("indexPatternManagement.scriptingLanguages.errorFetchingToastDescription",{defaultMessage:"Error getting available scripting languages from Elasticsearch"})),[]))))(a,i.toasts),c=Object(Se.intersection)(o,Object(Se.union)(this.supportedLangs,this.deprecatedLangs));l.lang=l.lang&&c.includes(l.lang)?l.lang:void 0,l.scripted&&!l.lang&&(l.lang=c[0]);const u=Object(Se.get)(Wn,l.lang||"",$n);l.type=u.includes(l.type)?l.type:u[0];const p=s.getDefaultType(l.type,l.esTypes);this.setState({isReady:!0,isCreating:!d.fields.getByName(l.name),isDeprecatedLang:this.deprecatedLangs.includes(l.lang||""),errors:[],scriptingLangs:c,fieldTypes:u,fieldTypeFormats:Jn(l,p,s),fieldFormatId:null===(t=d.getFormatterForFieldNoDefault(l.name))||void 0===t||null===(n=t.type)||void 0===n?void 0:n.id,customLabel:l.customLabel||"",fieldFormatParams:r.params()})}isDuplicateName(){const{isCreating:e,spec:t,existingFieldNames:n}=this.state;return e&&n.includes(t.name)}renderName(){var e;const{isCreating:t,spec:n}=this.state,a=null==n||null===(e=n.name)||void 0===e?void 0:e.includes("*"),i=!n.name||!n.name.trim()||a;return t?Object(C.jsx)(y.EuiFormRow,{label:j.i18n.translate("indexPatternManagement.nameLabel",{defaultMessage:"Name"}),helpText:this.isDuplicateName()?Object(C.jsx)("span",null,Object(C.jsx)(y.EuiIcon,{type:"alert",color:"warning",size:"s"})," ",Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.mappingConflictLabel.mappingConflictDetail",defaultMessage:"{mappingConflict} You already have a field with the name {fieldName}. Naming your scripted field with the same name means you won't be able to query both fields at the same time.",values:{mappingConflict:Object(C.jsx)("strong",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.mappingConflictLabel.mappingConflictLabel",defaultMessage:"Mapping Conflict:"})),fieldName:Object(C.jsx)(y.EuiCode,null,n.name)}})):null,isInvalid:i,error:i&&(a?j.i18n.translate("indexPatternManagement.starCharacterNotAllowedValidationErrorMessage",{defaultMessage:"The field cannot have * in the name."}):j.i18n.translate("indexPatternManagement.nameErrorMessage",{defaultMessage:"Name is required"}))},Object(C.jsx)(y.EuiFieldText,{value:n.name||"",placeholder:j.i18n.translate("indexPatternManagement.namePlaceholder",{defaultMessage:"New scripted field"}),"data-test-subj":"editorFieldName",onChange:e=>{this.onFieldChange("name",e.target.value)},isInvalid:i})):null}renderLanguage(){const{spec:e,scriptingLangs:t,isDeprecatedLang:n}=this.state;return e.scripted?Object(C.jsx)(y.EuiFormRow,{label:j.i18n.translate("indexPatternManagement.languageLabel",{defaultMessage:"Language"}),helpText:n?Object(C.jsx)("span",null,Object(C.jsx)(y.EuiIcon,{type:"alert",color:"warning",size:"s"})," ",Object(C.jsx)("strong",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.warningHeader",defaultMessage:"Deprecation Warning:"}))," ",Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.warningLabel.warningDetail",defaultMessage:"{language} is deprecated and support will be removed in the next major version of Kibana and Elasticsearch. We recommend using {painlessLink} for new scripted fields.",values:{language:Object(C.jsx)(y.EuiCode,null,e.lang),painlessLink:Object(C.jsx)(y.EuiLink,{target:"_blank",href:this.context.services.docLinks.links.scriptedFields.painless},Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.warningLabel.painlessLinkLabel",defaultMessage:"Painless"}))}})):null},Object(C.jsx)(y.EuiSelect,{value:e.lang,options:t.map((e=>({value:e,text:e}))),"data-test-subj":"editorFieldLang",onChange:e=>{this.onLangChange(e.target.value)}})):null}renderType(){const{spec:e,fieldTypes:t}=this.state;return Object(C.jsx)(y.EuiFormRow,{label:j.i18n.translate("indexPatternManagement.typeLabel",{defaultMessage:"Type"})},Object(C.jsx)(y.EuiSelect,{value:e.type,disabled:!e.scripted,options:t.map((e=>({value:e,text:e}))),"data-test-subj":"editorFieldType",onChange:e=>{this.onTypeChange(e.target.value)}}))}renderCustomLabel(){const{customLabel:e,spec:t}=this.state;return Object(C.jsx)(y.EuiFormRow,{label:j.i18n.translate("indexPatternManagement.customLabel",{defaultMessage:"Custom label"}),helpText:Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.labelHelpText",defaultMessage:"Set a custom label to use when this field is displayed in Discover, Maps, and Visualize. Queries and filters don't currently support a custom label and will use the original field name."})},Object(C.jsx)(y.EuiFieldText,{value:e||"",placeholder:t.name,"data-test-subj":"editorFieldCustomLabel",onChange:e=>{this.setState({customLabel:e.target.value})}}))}renderTypeConflict(){const{spec:e}=this.state;if(!e.conflictDescriptions||"object"!=typeof e.conflictDescriptions)return null;const t=[{field:"type",name:j.i18n.translate("indexPatternManagement.typeLabel",{defaultMessage:"Type"}),width:"100px"},{field:"indices",name:j.i18n.translate("indexPatternManagement.indexNameLabel",{defaultMessage:"Index names"})}],n=Object.entries(e.conflictDescriptions).map((([e,t])=>({type:e,indices:Array.isArray(t)?t.join(", "):"Index names unavailable"})));return Object(C.jsx)("div",null,Object(C.jsx)(y.EuiSpacer,{size:"m"}),Object(C.jsx)(y.EuiCallOut,{color:"warning",iconType:"alert",title:Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.fieldTypeConflict",defaultMessage:"Field type conflict"}),size:"s"},Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.multiTypeLabelDesc",defaultMessage:"The type of this field changes across indices. It is unavailable for many analysis functions. The indices per type are as follows:"})),Object(C.jsx)(y.EuiSpacer,{size:"m"}),Object(C.jsx)(y.EuiBasicTable,{items:n,columns:t}),Object(C.jsx)(y.EuiSpacer,{size:"m"}))}renderFormat(){const{spec:e,fieldTypeFormats:t,fieldFormatId:n,fieldFormatParams:a,format:i}=this.state,{fieldFormatEditors:s}=this.context.services,r=t[0].defaultFieldFormat.title,l=r?Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.defaultFormatHeader",defaultMessage:"Format (Default: {defaultFormat})",values:{defaultFormat:Object(C.jsx)(y.EuiCode,null,r)}}):Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.formatHeader",defaultMessage:"Format"});return Object(C.jsx)(f.Fragment,null,Object(C.jsx)(y.EuiFormRow,{label:l,helpText:Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.formatLabel",defaultMessage:"Formatting controls how values are displayed. Changing this setting might also affect the field value and highlighting in Discover."})},Object(C.jsx)(y.EuiSelect,{value:n,options:t.map((e=>({value:e.id||"",text:e.title}))),"data-test-subj":"editorSelectedFormatId",onChange:e=>{this.onFormatChange(e.target.value)}})),n?Object(C.jsx)(field_format_editor_FieldFormatEditor,{fieldType:e.type,fieldFormat:i,fieldFormatId:n,fieldFormatParams:a||{},fieldFormatEditors:s,onChange:this.onFormatParamsChange,onError:this.onFormatParamsError}):null)}renderPopularity(){const{spec:e}=this.state;return Object(C.jsx)(y.EuiFormRow,{label:j.i18n.translate("indexPatternManagement.popularityLabel",{defaultMessage:"Popularity",description:'"Popularity" refers to Kibana\'s measurement how popular a field is (i.e. how commonly it is used).'})},Object(C.jsx)(y.EuiFieldNumber,{value:e.count,"data-test-subj":"editorFieldCount",onChange:e=>{this.onFieldChange("count",e.target.value?Number(e.target.value):"")}}))}renderScript(){var e;const{spec:t,hasScriptError:n}=this.state,a=!t.script||!t.script.trim()||n,i=n?Object(C.jsx)("span",{"data-test-subj":"invalidScriptError"},Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.scriptInvalidErrorMessage",defaultMessage:"Script is invalid. View script preview for details"})):Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.scriptRequiredErrorMessage",defaultMessage:"Script is required"});return t.scripted?Object(C.jsx)(f.Fragment,null,Object(C.jsx)(y.EuiFormRow,{fullWidth:!0,label:j.i18n.translate("indexPatternManagement.scriptLabel",{defaultMessage:"Script"}),isInvalid:a,error:a?i:null},Object(C.jsx)(v.CodeEditor,{languageId:lt.PainlessLang.ID,width:"100%",height:"300px",value:null!==(e=t.script)&&void 0!==e?e:"",onChange:this.onScriptChange,"data-test-subj":"editorFieldScript","aria-label":j.i18n.translate("indexPatternManagement.scriptLabelAriaLabel",{defaultMessage:"Script editor"})})),Object(C.jsx)(y.EuiFormRow,null,Object(C.jsx)(f.Fragment,null,Object(C.jsx)(y.EuiText,null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.script.accessWithLabel",defaultMessage:"Access fields with {code}.",values:{code:Object(C.jsx)("code",null,"doc['some_field'].value")}})),Object(C.jsx)("br",null),Object(C.jsx)(y.EuiLink,{onClick:this.showScriptingHelp,"data-test-subj":"scriptedFieldsHelpLink"},Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.script.getHelpLabel",defaultMessage:"Get help with the syntax and preview the results of your script."}))))):null}renderActions(){const{isCreating:e,spec:t,isSaving:n}=this.state,{redirectAway:a}=this.props.services;return Object(C.jsx)(y.EuiFormRow,null,Object(C.jsx)(y.EuiFlexGroup,null,Object(C.jsx)(y.EuiFlexItem,{grow:!1},Object(C.jsx)(y.EuiButton,{fill:!0,onClick:this.saveField,isDisabled:this.isSavingDisabled(),isLoading:n,"data-test-subj":"fieldSaveButton"},e?Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.actions.createButton",defaultMessage:"Create field"}):Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.actions.saveButton",defaultMessage:"Save field"}))),Object(C.jsx)(y.EuiFlexItem,{grow:!1},Object(C.jsx)(y.EuiButtonEmpty,{onClick:a,"data-test-subj":"fieldCancelButton"},Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.actions.cancelButton",defaultMessage:"Cancel"}))),!e&&t.scripted?Object(C.jsx)(y.EuiFlexItem,null,Object(C.jsx)(y.EuiFlexGroup,{justifyContent:"flexEnd"},Object(C.jsx)(y.EuiFlexItem,{grow:!1},Object(C.jsx)(y.EuiButtonEmpty,{color:"danger",onClick:this.showDeleteModal},Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.actions.deleteButton",defaultMessage:"Delete"}))))):null))}isSavingDisabled(){const{spec:e,hasFormatError:t,hasScriptError:n}=this.state;return!(!t&&!n&&e.name&&e.name.trim()&&(!e.scripted||e.script&&e.script.trim()))}render(){const{isReady:e,isCreating:t,spec:n}=this.state;return e?Object(C.jsx)("div",null,Object(C.jsx)(y.EuiText,null,Object(C.jsx)("h3",null,t?Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.createHeader",defaultMessage:"Create scripted field"}):Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.editHeader",defaultMessage:"Edit {fieldName}",values:{fieldName:n.name}}))),Object(C.jsx)(y.EuiSpacer,{size:"m"}),Object(C.jsx)(y.EuiForm,null,this.renderScriptingPanels(),this.renderName(),this.renderCustomLabel(),this.renderLanguage(),this.renderType(),this.renderTypeConflict(),this.renderFormat(),this.renderPopularity(),this.renderScript(),this.renderActions(),this.renderDeleteModal()),Object(C.jsx)(y.EuiSpacer,{size:"l"})):null}}V()(field_editor_FieldEditor,"contextType",v.context);const Zn=j.i18n.translate("indexPatternManagement.editIndexPattern.scripted.newFieldPlaceholder",{defaultMessage:"New Scripted Field"}),Xn=Object(h.withRouter)((({indexPattern:e,mode:t,fieldName:n,history:a})=>{var i;const{uiSettings:s,chrome:r,notifications:l,dataViews:d}=Object(v.useKibana)().services,o="edit"===t&&n?null===(i=e.fields.getByName(n))||void 0===i?void 0:i.spec:{scripted:!0,type:"number",name:void 0},c=`/dataView/${e.id}`;if("edit"===t&&!o){const t=j.i18n.translate("indexPatternManagement.editDataView.scripted.noFieldLabel",{defaultMessage:"'{dataViewTitle}' data view doesn't have a scripted field called '{fieldName}'",values:{dataViewTitle:e.title,fieldName:n}});l.toasts.addWarning(t),a.push(c)}const u=(null==o?void 0:o.name)||Zn;r.docTitle.change([u,e.title]);return o?Object(C.jsx)(g.a.Fragment,null,Object(C.jsx)(Ze,{indexPattern:e,defaultIndex:s.get("defaultIndex"),canSave:d.getCanSaveSync()}),Object(C.jsx)(y.EuiSpacer,{size:"l"}),Object(C.jsx)(field_editor_FieldEditor,{indexPattern:e,spec:o,services:{indexPatternService:d,redirectAway:()=>{a.push(`${c}#/?_a=(tab:${null!=o&&o.scripted?B:k})`)}}})):Object(C.jsx)(g.a.Fragment,null)})),ea=Object(h.withRouter)((({...e})=>{const{setBreadcrumbs:t,dataViews:n}=Object(v.useKibana)().services,[a,i]=Object(f.useState)(),s=e.match.params.fieldName&&decodeURIComponent(e.match.params.fieldName);return Object(f.useEffect)((()=>{n.get(e.match.params.id).then((e=>{i(e),e&&t(s?function(e,t){return[...S(e),{text:t}]}(e,s):function(e){return[...S(e),{text:j.i18n.translate("indexPatternManagement.indexPatterns.createFieldBreadcrumb",{defaultMessage:"Create field"})}]}(e))}))}),[e.match.params.id,s,t,n]),a?Object(C.jsx)(Xn,{indexPattern:a,mode:s?"edit":"create",fieldName:s}):Object(C.jsx)(g.a.Fragment,null)})),ta=j.i18n.translate("indexPatternManagement.dataViewTable.spaceCountAll",{defaultMessage:"all"}),na=j.i18n.translate("indexPatternManagement.dataViewTable.dataViewColumnName",{defaultMessage:"Data view"}),aa=j.i18n.translate("indexPatternManagement.dataViewTable.spacesColumnName",{defaultMessage:"Spaces"}),ia=j.i18n.translate("indexPatternManagement.dataViewTable.tableTitle",{defaultMessage:"Data views selected for deletion"}),sa=(e,t)=>{const n=[{field:"title",name:na,sortable:!0}];return t&&n.push({field:"namespaces",name:aa,sortable:!0,width:"100px",align:"right",render:e=>-1!==e.indexOf("*")?ta:e.length}),Object(C.jsx)("div",null,Object(C.jsx)(y.EuiCallOut,{color:"warning",iconType:"alert",title:"Data views are deleted from every space they are shared in."}),Object(C.jsx)(y.EuiSpacer,{size:"m"}),Object(C.jsx)("div",null,Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.dataViewTable.deleteConfirmSummary",defaultMessage:"You'll permanently delete {count, number} {count, plural, one {data view} other {data views}\n}.",values:{count:e.length}})),Object(C.jsx)(y.EuiSpacer,{size:"m"}),Object(C.jsx)(y.EuiBasicTable,{tableCaption:ia,items:e,columns:n}))},ra={initialPageSize:10,pageSizeOptions:[5,10,25,50]},la={sort:{field:"title",direction:"asc"}},da=j.i18n.translate("indexPatternManagement.dataViewTable.title",{defaultMessage:"Data Views"}),oa=j.i18n.translate("indexPatternManagement.indexPatternTable.badge.securityDataViewTitle",{defaultMessage:"Security Data View"}),ca=({children:e})=>Object(C.jsx)(g.a.Fragment,null,e),ua=Object(h.withRouter)((({history:e,canSave:t,showCreateDialog:n=!1})=>{const{setBreadcrumbs:a,uiSettings:i,indexPatternManagementStart:s,application:r,chrome:l,dataViews:d,IndexPatternEditor:o,spaces:c,overlays:u}=Object(v.useKibana)().services,[p,m]=Object(f.useState)(""),[b,O]=Object(f.useState)([]),[F,M]=Object(f.useState)(!0),[P,S]=Object(f.useState)(n),[w,I]=Object(f.useState)([]),_=(()=>{const e=tt({dataViews:d,overlays:u,uiSettings:i,onDelete:()=>{I([]),N()}});if(0!==w.length)return Object(C.jsx)(y.EuiButton,{color:"danger",iconType:"trash",onClick:()=>e(w,sa(w,!!c))},Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.dataViewTable.deleteButtonLabel",defaultMessage:"Delete {selectedItems, number} {selectedItems, plural, one {Data View} other {Data Views}\n}",values:{selectedItems:w.length}}))})(),L={toolsLeft:_&&[_],query:p,onChange:({queryText:e,error:t})=>{t||m(e)},box:{incremental:!0,schema:{fields:{title:{type:"string"}}}}},N=Object(f.useCallback)((async()=>{M(!0);const e=await async function(e,t){return(await t.getIdsWithTitle(!0)).map((t=>{const{id:n,title:a,namespaces:i}=t,s=e===n;return{id:n,namespaces:i,title:a,default:s,tags:E(t,s),sort:`${s?"0":"1"}${a}`}})).sort(((e,t)=>e.sort<t.sort?-1:e.sort>t.sort?1:0))||[]}(i.get("defaultIndex"),d);return O(e),M(!1),e}),[d,i]);a(T()),Object(f.useEffect)((()=>{!async function(){0!==(await N()).length&&await d.hasUserDataView().catch((()=>!1))||S(!0)}()}),[s,i,d,N]),l.docTitle.change(da);const A="rollup"===new URLSearchParams(Object(h.useLocation)().search).get("type"),k=Object(f.useMemo)((()=>c?c.ui.components.getSpacesContextProvider:ca),[c]),B=tt({dataViews:d,uiSettings:i,overlays:u,onDelete:()=>N()}),R={name:"Actions",field:"id",width:"10%",actions:[{name:j.i18n.translate("indexPatternManagement.dataViewTable.columnDelete",{defaultMessage:"Delete"}),description:j.i18n.translate("indexPatternManagement.dataViewTable.columnDeleteDescription",{defaultMessage:"Delete this data view"}),icon:"trash",color:"danger",type:"icon",onClick:e=>B([e],sa([e],!!c)),isPrimary:!0,"data-test-subj":"action-delete"}]},K=[{field:"title",name:j.i18n.translate("indexPatternManagement.dataViewTable.nameColumn",{defaultMessage:"Name"}),width:"70%",render:(t,n)=>{var a,i;return Object(C.jsx)("div",null,Object(C.jsx)(y.EuiLink,Object(v.reactRouterNavigate)(e,`patterns/${n.id}`),t),0===(null==n||null===(a=n.id)||void 0===a?void 0:a.indexOf("security-solution"))&&Object(C.jsx)(g.a.Fragment,null," ",Object(C.jsx)(y.EuiBadge,null,oa)),null==n||null===(i=n.tags)||void 0===i?void 0:i.map((({key:e,name:t})=>Object(C.jsx)(g.a.Fragment,null," ",Object(C.jsx)(y.EuiBadge,{key:e},t)))))},dataType:"string",sortable:({sort:e})=>e},{field:"namespaces",name:j.i18n.translate("indexPatternManagement.dataViewTable.spacesColumn",{defaultMessage:"Spaces"}),width:"20%",render:(e,t)=>c?Object(C.jsx)(D,{spacesApi:c,capabilities:null==r?void 0:r.capabilities,spaceIds:t.namespaces||[],id:t.id,title:t.title,refresh:()=>{d.clearCache(t.id),N()}}):Object(C.jsx)(g.a.Fragment,null)}];d.getCanSaveSync()&&K.push(R);const V=t?Object(C.jsx)(y.EuiButton,{fill:!0,iconType:"plusInCircle",onClick:()=>S(!0),"data-test-subj":"createIndexPatternButton"},Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.dataViewTable.createBtn",defaultMessage:"Create data view"})):Object(C.jsx)(g.a.Fragment,null);if(F)return Object(C.jsx)(g.a.Fragment,null);const U=P?Object(C.jsx)(o,{onSave:t=>{e.push(`patterns/${t.id}`)},onCancel:()=>S(!1),defaultTypeIsRollup:A}):Object(C.jsx)(g.a.Fragment,null),q={onSelectionChange:I};return Object(C.jsx)("div",{"data-test-subj":"indexPatternTable",role:"region","aria-label":da},Object(C.jsx)(y.EuiPageHeader,{pageTitle:da,description:Object(C.jsx)(x.FormattedMessage,{id:"indexPatternManagement.dataViewTable.indexPatternExplanation",defaultMessage:"Create and manage the data views that help you retrieve your data from Elasticsearch."}),bottomBorder:!0,rightSideItems:[V]}),Object(C.jsx)(y.EuiSpacer,{size:"l"}),Object(C.jsx)(k,null,Object(C.jsx)(y.EuiInMemoryTable,{allowNeutralSort:!1,itemId:"id",isSelectable:d.getCanSaveSync(),items:b,columns:K,pagination:ra,sorting:la,search:L,selection:d.getCanSaveSync()?q:void 0})),U)})),pa={text:j.i18n.translate("indexPatternManagement.indexPatterns.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:j.i18n.translate("indexPatternManagement.dataViews.badge.readOnly.tooltip",{defaultMessage:"Unable to save data views"}),iconType:"glasses"};async function fa(e,t){const[{application:n,chrome:a,uiSettings:i,notifications:s,overlays:r,http:l,docLinks:d,theme:o},{data:c,dataViewFieldEditor:u,dataViewEditor:p,dataViews:f,fieldFormats:g,spaces:m},j]=await e(),y=f.getCanSaveSync();y||a.setBadge(pa);const O={application:n,chrome:a,uiSettings:i,notifications:s,overlays:r,http:l,docLinks:d,data:c,dataViewFieldEditor:u,dataViews:f,indexPatternManagementStart:j,setBreadcrumbs:t.setBreadcrumbs,fieldFormatEditors:u.fieldFormatEditors,IndexPatternEditor:p.IndexPatternEditorComponent,fieldFormats:g,spaces:m,theme:o};return b.a.render(Object(C.jsx)(v.KibanaContextProvider,{services:O},Object(C.jsx)(v.KibanaThemeProvider,{theme$:o.theme$},Object(C.jsx)(x.I18nProvider,null,Object(C.jsx)(h.Router,{history:t.history},Object(C.jsx)(h.Switch,null,Object(C.jsx)(h.Route,{path:["/create"]},Object(C.jsx)(ua,{canSave:y,showCreateDialog:!0})),Object(C.jsx)(h.Route,{path:["/dataView/:id/field/:fieldName","/dataView/:id/create-field/"]},Object(C.jsx)(ea,null)),Object(C.jsx)(h.Route,{path:["/dataView/:id"]},Object(C.jsx)(rt,null)),Object(C.jsx)(h.Redirect,{path:"/patterns*",to:"dataView*"}),Object(C.jsx)(h.Route,{path:["/"]},Object(C.jsx)(ua,{canSave:y}))))))),t.element),()=>{a.docTitle.reset(),b.a.unmountComponentAtNode(t.element)}}}])]);